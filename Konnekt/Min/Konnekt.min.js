var Konnekt=function(){var X=function(){return function(D,u,A,r){function C(c,b,g,m){c=void 0===c?{}:c;var l={},B=window.Proxy?new Proxy(l,{set:L,deleteProperty:O}):l,f=Object.keys(c,"all");Object.defineProperties(l,{__kbname:e("string"===typeof b?b:"default",!0,!0),__kbref:e(g?g.__kbref||g:B,!0,!0),__kbscopeString:e(m||"",!0,!0),__kbImmediateParent:e(g||null,!0,!0),__kbsubscribers:e({}),__kbparentsubscribers:e({}),__kblisteners:e({}),__kbupdatelisteners:e({}),__kbparentlisteners:e({}),__kbparentupdatelisteners:e({}),
__kbcreatelisteners:e([]),__kbdeletelisteners:e([]),__kbparentcreatelisteners:e([]),__kbparentdeletelisteners:e([]),__kbmethodlisteners:e([]),__kbmethodupdatelisteners:e([]),__kbpointers:e({}),__kbevents:e(U),__kbsetindex:e(0,!0),__kbproto:e({}),length:e(0,!0),__kbnonproxy:e(l,!1,!0),__kbproxy:e(B,!1,!0),_stopChange:e(!1,!0)});l.__proto__=C.prototype;b=0;for(g=f.length;b<g;b++)B.set(f[b],c[f[b]]);l.__kbevents.addlistener=[];l.__kbevents.removelistener=[];l.addActionListener("addlistener",function(b){if("string"===
typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],c=g.point.getLayer(g.keys);if(void 0!==c[b.arguments[0]])c[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==c[g.keys.split(".").pop()])c[b.arguments[2]](g.keys.split(".").pop(),b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],c=g.point.getLayer(g.keys);
if(void 0!==c[b.arguments[0]])c[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==c[localPointerkeys.split(".").pop()])c[b.arguments[2]](g.keys.split(".").pop(),b.arguments[1])}});return B}function p(c,b,g,m,l,B,f,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=c;this.key=b;this.arguments=B;this.type=this.event=g;this.listener=f;this.name=c.__kbname;this.root=c.__kbref;this.scope=c.__kbscopeString;this.parent=
c.__kbImmediateParent;this.value=m;this.oldValue=l;this.stopChange=d}function e(c,b,g,m){return{value:c,writable:!!b,enumerable:!!m,configurable:!!g}}function S(c,b,g){return{get:function(){return c.call(this)},set:function(g){b&&(c=g)},enumerable:!1,configurable:!!g}}function R(c,b){var g=b,m=b;return{get:function(){return g},set:function(b){var B=new p(this,c,"set",b,g,arguments,"__kblisteners",this._stopChange);!0!==f(B)&&(m=g,g=b,B.stopChange||(B.listener="__kbupdatelisteners",B.type="postset",
f(B)),this.callSubscribers(this.__kbref,this,c,g,m,this._stopChange));this._stopChange=!1},configurable:!0,enumerable:!0}}function Q(){var c=Array.prototype.slice.call(arguments),b=c.shift();return{get:function(){return c.reduce(function(b,c){return b[c]},b)},set:function(g){var m=c.slice(0,c.length-1).reduce(function(b,g){return b[g]},b);(this._stopChange?m.stopChange():m)[c[c.length-1]]=g;this._stopChange=!1},enumerable:!0,configurable:!0}}function G(c,b){for(var g=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],m=[],l,B=0,f=g.length;B<f;B++)if(l=c[g[B].listener],F.call(l))for(var m=Object.keys(l),d=0,k=m.length;d<k;d++)for(var h=0,e=l[m[d]].length;h<e;h++)b[g[B].method](m[d],l[m[d]][h]);else for(d=0,k=l.length;d<k;d++)b[g[B].method](l[d])}function L(c,b,g){if(J(c,b)||
"length"===b||"__kbsetindex"===b){if("length"===b)if(g>c.length&&void 0!==c[g-1])c.length=g;else{if(g<c.length){b=g;for(var m=c.length;b<m;b++)c[b]&&delete c[b];c.length=g}}else c[b]=g;return!0}c.set(b,g)}function O(c,b){c.del(b);return!0}function P(c,b,g){var m=n(g),l=F(g),B=I(g);if(m&&g.__kbname!==c.__kbname)"default"===g.__kbname?c.merge(g,b):c.__kbpointers[b]||c.addPointer(g,b);else{var m=new p(this,b,"create",g,void 0,[],"__kbcreatelisteners",this._stopChange),d=f(m),k=parseInt(b,10);if(!0!==
d)if((l||B)&&0!==Object.keys(g,"all").length)for(P.call(this,c,b,{}),l=0,B=Object.keys(g,"all"),m=B.length;l<m;l++)P.call(this[b],c[b],B[l],g[B[l]]);else{if(l||B)g=new C(g,c.__kbname,c,c.__kbscopeString+(0!==c.__kbscopeString.length?".":"")+b),G(c,g);Object.defineProperty(c,b,R(b,g));!isNaN(k)&&c.length<=k&&(c.length=k+1);m.listener="__kbupdatelisteners";m.type="postcreate";f(m)}}}function M(c,b,g,m){var l=n(g),B=F(g),d=I(g);if(l&&g.__kbname!==c.__kbname)"default"===g.__kbname?c.merge(g,b):c.__kbpointers[b]||
c.addPointer(g,b);else if(void 0===c[b])-1===N.indexOf(b)?P.call(this,c,b,g):(m?c.stopChange():c)[b]=g;else if(B||d)for(l=0,B=Object.keys(g,"all"),d=B.length;l<d;l++)M.call(this[b],c[b],B[l],g[B[l]],m);else(m?c.stopChange():c)[b]=g}function H(c){return h.call(c).replace(/(\[object\s|\])/g,"").toLowerCase()}function F(c){return"object"===H(void 0!==c?c:this)}function I(c){return"array"===H(void 0!==c?c:this)}function n(c){return"mixed"===H(void 0!==c?c:this)}function J(c,b){b="string"===typeof c?c:
b;var g=Object.getOwnPropertyDescriptor("string"===typeof c?this:c,b);return g?void 0===g.value:!1}function K(c,b){function g(b){var g=parseFloat(b,10),c="true"===b,m=b.indexOf('"'),l=b.lastIndexOf('"');if(isNaN(g)||g.toString().length!==b.length){if(c||"false"===b)return c;b=0===m&&0!==l?b.substring(1,b.length-1):b.substring(1,b.length)}else return g;return b}var m=this.__kbnonproxy;split=c.split(/({"|,"(?=(?:[^"]|"[^"]*")*$)|\[(?=(?:[^"]|"[^"]*")*$)|\](?=(?:[^"]|"[^"]*")*$)|":|"}|{(?=(?:[^"]|"[^"]*")*$)|,(?=(?:[^"]|"[^"]*")*$)|}(?=(?:[^"]|"[^"]*")*$))/).filter(Boolean);
UKeys=[];isValue=isKey=!1;r="";for(var l=1,B=split.length,d,f,k,h;l<B;l++)d=split[l],f=split[l-1],k=split[l+1],h=UKeys[UKeys.length-1],'":'===f&&'{"'===d||'":'===f&&"["===d?(r+=(0!==r.length?".":"")+h,m[h]||m.set(h,b?b(h,{},r,m):{}),m=m[h],UKeys.pop()):"["===f||","===f&&0!==m.length?"{"===d||'{"'===d?(r+=(0!==r.length?".":"")+m.__kbsetindex,"object"!==typeof m[m.__kbsetindex]&&m.set(m.__kbsetindex,b?b(m.length,{},r,m):{}),m.__kbsetindex+=1,m=m[m.__kbsetindex-1]):(m.set(m.__kbsetindex,b?b(m.length,
g(d),r,m):g(d)),m.__kbsetindex+=1):'":'===f?(m.set(h,b?b(h,g(d),r,m):g(d)),UKeys.pop()):'{"'===f||","===f&&'":'===k?UKeys[UKeys.length]=d.replace(/\"/g,""):"}"!==f&&"]"!==f||void 0===d||(r=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")-1):"",m=m.__kbImmediateParent);return this}function E(c,b){"number"===typeof c&&(c=c.toString());var g=-1!==c.indexOf(".")?this.__kbnonproxy.setLayer(c):this.__kbnonproxy;-1!==c.indexOf(".")&&(c=c.split(".").pop());var m=new p(this,c,"set",b,this[c],arguments,
"__kbmethodlisteners");!0!==f(m)&&(M.call(this,g,c,b,this._stopChange),this.stopChange=void 0,m.type="postset",m.listener="__kbmethodupdatelisteners",f(m));return this}function y(c){return c.split(".")}function q(c,b){return function(g,m){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var l=this[b],d=new p(this,b,"addlistener",l,void 0,arguments,"");"string"===typeof g&&1!==y(g).length&&(l=y(g),g=l.pop(),l=l.join("."),d.local=this.getLayer(l),l=d.local[b],d.value=l);!0!==f(d)&&
(F.call(l)?(void 0===l[g]&&(l[g]=[]),l[g].push(m),d.type="postaddlistener",f(d)):I.call(l)&&"function"===typeof g&&(l.push(g),d.type="postaddlistener",f(d)));return this}}function t(c,b){return function(g,m){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var l=this[b],d=new p(this,b,"removelistener",l,void 0,arguments,"");"string"===typeof g&&1!==y(g).length&&(l=y(g),l.pop(),l.join("."),d.local=this.getLayer(l),l=d.local[b],d.value=l,g=y(g).pop());if(!0!==f(d))if(F.call(l)){if(void 0!==
l[g])for(var k=0,h=l[g].length;k<h;k++)if(l[g][k].toString()===m.toString()){l[g].splice(k,1);d.type="postremovelistener";f(d);break}}else if(I.call(l)&&"function"===typeof g)for(k=0,h=l.length;k<h;k++)if(l[k].toString()===g.toString()){l.splice(k,1);d.type="postremovelistener";f(d);break}return this}}function z(c,b){function g(b,c,d){var f=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),k=this,h=b;"string"===typeof b&&1!==y(b).length&&(k=y(b),h=k.pop(),k=k.join("."),
k=this.getLayer(k),void 0===k[d][h]&&(k[d][h]=[]),k[d][h].push(c));F.call(k[d])?(void 0===k[d][h]&&(k[d][h]=[]),k[d][h].push(c),k=k.__kbpointers[h],k=k.point.getLayer(k.keys),void 0!==k[h]&&(void 0===k[d][h]&&(k[d][h]=[]),k[d][h].push(_func))):k[d].push(c);h=0;for(k=f.length;h<k;h++)g.call(this[f[h]],b,c,d)}return function(m,l){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var d=new p(this,b,"addchildlistener",void 0,void 0,arguments,"");!0!==f(d)&&(g.call(this.__kbnonproxy,m,
l,b),d.type="postaddchildlistener",f(d));return this}}function v(c,b){function g(b,c,d){var f=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),k=this,h=b;if("string"===typeof b&&1!==y(b).length){var e=y(b),h=e.pop();e.join(".");k=this.getLayer(e);if(void 0!==k[d][b])for(var e=0,q=k[d][b].length;e<q;e++)if(k[d][b][e].toString()===c.toString()){k[d][b].splice(e,1);break}}if(F.call(k[d])){if(void 0!==k[d][h]){e=0;for(q=k[d][h].length;e<q;e++)if(k[d][h][e].toString()===c.toString()){k[d][h].splice(e,
1);break}if(-1!==k.__kbpointers.indexOf(h)&&(e=k.__kbpointers[h],k=e.point.getLayer(e.keys),void 0!==k[d][h]))for(e=0,q=k[d][h].length;e<q;e++)if(k[d][h][e].toString()===c.toString()){k[d][h].splice(e,1);break}}}else for(e=0,q=k[d].length;e<q;e++)if(k[d][e].toString()===c.toString()){k[d].splice(e,1);break}e=0;for(q=f.length;e<q;e++)g.call(this[f[e]],b,c,d)}return function(m,l){arguments=Array.prototype.slice.call(arguments);arguments.push(c);var d=new p(this,b,"removechildlistener",void 0,void 0,
arguments,"");!0!==f(d)&&(g.call(this.__kbnonproxy,m,l,b),d.type="postremovechildlistener",f(d));return this}}var U={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],
postremovechildlistener:[]},N=["__proto__","_stopChange"],w=function(c,b){if(!b._stopPropogration&&c)for(var g=0,m=c.length;g!==m&&(c[g](b),!b._stopPropogration);g++);},f=function(c){if(c.listener){var b=c.local[c.listener],g=c.local[c.listener.replace("__kb","__kbparent")];F.call(b)?(w(b[c.key],c),w(b["*"],c)):w(b,c);F.call(g)?(w(g[c.key],c),w(g["*"],c)):w(g,c)}w(c.local.__kbref.__kbevents[c.type],c);return c._preventDefault},d=Array.prototype.sort,k=Array.prototype.slice,h;Object.prototype._toString||
(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof C?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(c,b){return Object._keys(c).filter(function(g){return b&&"object"!==b&&"o"!==b?"all"===b?!0:!isNaN(parseInt(g,10)):isNaN(parseInt(g,10))})};h={}.toString;Object.defineProperties(C.prototype,{"typeof":e(H,!1,!0),sizeof:e(function(c){function b(c){for(var l=
Object.keys(c,"all"),d=0,f=void 0,k=0,h=l.length;k<h;k++)f=c[l[k]],"object"===typeof f&&void 0!==f&&null!==f?-1===g.indexOf(f)&&(g.push(f),d+=b(f)):"string"===typeof f?d+=2*f.length:"number"===typeof f?d+=8:"boolean"===typeof f?d+=4:"function"===typeof f&&(d+=2*f.toString().length),d+=2*l[k].length;return d}var g=[];return b(c||this)+" Bytes (Rough estimate)"},!1,!0),isObject:e(F,!1,!0),isArray:e(I,!1,!0),isMixed:e(n,!1,!0),isObservable:e(J,!1,!0),stringify:e(function(c){var b=[];return JSON.stringify(c||
this,function(g,c){if(I(c)||F(c)){if(-1!==b.indexOf(c))return;b.push(c)}return c})},!1,!0),getKeys:e(function(c,b){b="string"===typeof c?c:b?b:"object";return Object.keys("string"===typeof c||void 0===c?this:c,b)},!1,!0),getIndexes:e(function(c){c=void 0!==c?"object"===typeof c?c:this[c]:this;for(var b=[],g=0,m=c.length;g<m;g++)void 0!==c[g]&&(b[b.length]=g);return b},!1,!0),keyCount:S(function(){return this.getKeys("object").length},!1,!0),indexCount:S(function(){return this.length},!1,!0),count:S(function(){return this.keyCount+
this.indexCount},!1,!0),concat:e(Array.prototype.concat),every:e(Array.prototype.every),filter:e(Array.prototype.filter),find:e(Array.prototype.find),findIndex:e(Array.prototype.findIndex),forEach:e(Array.prototype.forEach),includes:e(Array.prototype.includes),indexOf:e(Array.prototype.indexOf),join:e(Array.prototype.join),lastIndexOf:e(Array.prototype.lastIndexOf),map:e(Array.prototype.map),reduce:e(Array.prototype.reduce),reduceRight:e(Array.prototype.reduceRight),slice:e(Array.prototype.slice),
some:e(Array.prototype.some),entries:e(Array.prototype.entries),toLocaleString:e(Array.prototype.toLocaleString),parse:e(K,!0),parseReplace:e(function(c,b){return K.call(b||this,c)},!0),add:e(function(c,b){E.call(this,c,b);return this}),set:e(E),get:e(function(c){"number"===typeof c&&(c=c.toString());var b=-1!==c.indexOf(".")?this.getLayer(c):this;-1!==c.indexOf(".")&&(c=c.split(".").pop());if(b)return b[c];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,c)}),
del:e(function(c,b){var g="number"===typeof c||!isNaN(parseInt(c,10));g&&(c=c.toString());var m=-1!==c.indexOf(".")?this.getLayer(c):this,d=c.split(".").pop();if(m&&void 0!==m[d])if(g&&m.length>parseInt(c,10)&&!b)m=m.__kbnonproxy,m.splice(d,1);else{var k=new p(m,c,"delete",m[d],void 0,[],"__kbmethodlisteners"),h=f(k),q=new p(m,c,"delete",m[d],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==f(q)&&!0!==h&&(m=m.__kbnonproxy,Object.defineProperty(m,d,e(void 0,!0,!0,!1)),delete m[d],g&&m.length>
parseInt(c,10)&&b&&--m.length,k.type="postdelete",k.listener="__kbmethodupdatelisteners",f(k),q.listener="__kbupdatelisteners",q.type="postdelete",q.oldValue=q.value,q.value=void 0,f(q))}return this}),exists:e(function(c){function b(g,c){return 1!==g.length?void 0!==c[g[0]]?b(g.slice(1,g.length),c[g[0]]):!1:void 0!==c[g[0]]}return b(c.split("."),this.__kbnonproxy)}),addPrototype:e(function(c,b){var g=-1!==c.indexOf(".")?this.__kbnonproxy.setLayer(c):this.__kbnonproxy;-1!==c.indexOf(".")&&(c=c.split(".").pop());
void 0===g[c]?Object.defineProperty(g.__proto__,c,e(b,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,g);return this}),addPointer:e(function(){var c=Array.prototype.slice.call(arguments),b=c.shift(),g=b.exists(c.join("."))?c[c.length-1]:c.pop();b instanceof C||(b=new C(b,b.__kbname));var m=new p(this,g,"create",b[g],void 0,[],"__kbcreatelisteners",this._stopChange),d=this.__kbnonproxy;m.root=b.__kbref.__kbproxy;if(!0!==f(m)){Object.defineProperty(d,
g,Q.apply(d,[b].concat(c)));d.__kbpointers[g]={keys:c.join("."),point:b};var c=d,b=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],d=[],k;if(c[g]&&c[g].__kbImmediateParent)for(var h=0,e=b.length;h<e;h++){k=c[b[h].listener];for(var d=Object.keys(k),q=0,t=d.length;q<t;q++)if(g===d[h])for(var z=0,n=k[d[h]].length;z<n;z++)void 0===c[g].__kbImmediateParent[b[h].listener][g]&&(c[g].__kbImmediateParent[b[h].listener][g]=[]),c[g].__kbImmediateParent[b[h].listener][g].push(k[d[h]][z])}G(c,
c[g]);m.listener="__kbupdatelisteners";m.type="postcreate";f(m)}return this}),move:e(function(c,b){this.__kbnonproxy.set(b,c[b]);n(c)?c.del(b):(c[b]=null,delete c[b]);return this}),copy:e(function(c,b){var g=this.__kbnonproxy;n(c)?"default"===c.__kbname?g.merge(c[b],b):g.addPointer(c,b):g.set(b,c[b]);return this}),merge:e(function(c,b){function g(b,c){for(var d=n(b)?b.keys("object"):Object.keys(b),l,f=0,k=d.length;f<k;f++)l=b[d[f]],"object"===typeof l&&-1===m.indexOf(l)&&"undefined"!==c[d[f]]?g(l,
c):void 0===c[d[f]]&&c.set(d[f],"object"===typeof l?{}:l)}var m=[],d=this.__kbnonproxy;b&&void 0===d[b]&&d.set(b,{});g(c,b?d[b]:d);return this}),replace:e(function(c,b){function g(b,c){var d=n(b)?b.keys("object"):Object.keys(b),l;l=b[d[x]];"object"===typeof l&&-1===m.indexOf(l)&&"undefined"!==c[d[x]]?g(l,c):c.set(d[x],"object"===typeof l?{}:l)}var m=[],d=this.__kbnonproxy;b&&void 0===d[b]&&d.set(b,{});g(c,b?d[b]:d);return this}),copyWithin:e(function(c,b,g){b=b||0;g=g||0;var m=new p(this,c,"copyWithin",
this[c],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==f(m)&&c<d.length){c=0>c?d.length-1:c;b=b<d.length?b:d.length-1;g=g<d.length?g:d.length-1;b=0>b?d.length-1:b;g=0>b?d.length-1:g;for(var k=b;k<=g;k++)d.set(c+(k-b),d[k]);m.type="postcopyWithin";m.listener="__kbmethodupdatelisteners";f(m)}return this}),fill:e(function(c,b,g){b=void 0!==b?Math.max(0,b):0;g=void 0!==g&&g<=this.length?Math.min(this.length,Math.max(0,g)):this.length;var d=new p(this,_start,"fill",this[_start],void 0,
arguments,"__kbmethodlisteners"),l=this.__kbnonproxy;if(!0!==f(d)){for(var k=a.key;k<g;k++)l[k]=c;d.type="postfill";d.listener="__kbmethodupdatelisteners";f(d)}return this}),pop:e(function(){var c=new p(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){var g=b[b.length-1];b.del(this.length-1);c.type="postpop";c.listener="__kbmethodupdatelisteners";f(c);return g}return null}),push:e(function(c){var b=new p(this,this.length,"push",
c,void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;!0!==f(b)&&(g.set(g.length,c),b.type="postpush",b.listener="__kbmethodupdatelisteners",f(b));return this.length}),reverse:e(function(){var c=new p(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=null,d=null,l=b.length,g=0;g<l/2;g+=1){var d=l-1-g,k=b[g];b[g]=b[d];b[d]=k}c.type="postreverse";c.listener="__kbmethodupdatelisteners";f(c)}return this}),shift:e(function(){var c=
new p(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=a.key,d=this.length-1;g<d;g++)b[g]=b[g+1];b.del(this.length-1);c.type="postshift";c.listener="__kbmethodupdatelisteners";f(c)}return null}),sort:e(function(){var c=new p(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){var g=k.call(b);d.apply(g,arguments);for(var m=0,l=g.length;m<l;m++)b[m]=g[m];c.type="postsort";c.listener="__kbmethodupdatelisteners";
f(c)}return this}),splice:e(function(c,b,g){c="string"===typeof c?parseInt(c,10):c;var d=new p(this,c,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),l=this.__kbnonproxy;if(!0!==f(d)){var k=[],h=Array.prototype.slice.call(arguments,2),e=h.length-2,q=0;if(0!==b&&void 0!==l[c-1+b])for(var t=0,z=b;t<z;t++){k.push(l[c+t]);for(var n=c+t,v=this.length-1;n<v;n++)l[n]=l[n+1];l.del(l.length-1,!0)}if(0!==e)for(t=0,z=e;t<z;t++){q=c+Math.min(1,t);n=l.length;for(v=q;n>v;n--)l.set(n,l[n-1]);l.set(q,h[t])}d.type=
"postsplice";d.listener="__kbmethodupdatelisteners";f(d);return k}return[]}),unshift:e(function(){var c=new p(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),b=this.__kbnonproxy;if(!0!==f(c)){for(var g=Array.prototype.slice.call(arguments),d=b.length-1+g.length,l=g.length;-1!==d;d--)d<l?b.set(d,g[d]):b.set(d,b[d-g.length]);c.type="postunshift";c.listener="__kbmethodupdatelisteners";f(c)}return this.length}),getLayer:e(function(c){function b(g){var c=g[0];return void 0===this[c]&&
0!==g.length-1?null:n(this[c])?0!==g.length-1?(g.shift(),b.call(this[c],g)):this[c]:this}c=y(c);return b.call(this,c)}),setLayer:e(function(c){function b(g){var c=g[0];void 0===this[c]&&0!==g.length-1&&(this[c]=C({},this.__kbname,this,this.__kbscopeString+"."+c));return n(this[c])?0!==g.length-1?(g.shift(),b.call(this[c],g)):this[c]:this}c=y(c);return b.call(this,c)}),ignoreCreate:e(function(c){-1===N.indexOf(c)&&N.push(c);return this}),addActionListener:e(function(c,b){var g=this.__kbnonproxy;void 0!==
g.__kbref.__kbevents[c]&&g.__kbref.__kbevents[c].push(b);return this}),removeActionListener:e(function(c,b){var g=this.__kbnonproxy;if(void 0!==g.__kbref.__kbevents[c])for(var d=0,l=g.__kbref.__kbevents[c];d<l;d++)if(g.__kbref.__kbevents[c][d].toString()===b.toString()){g.__kbref.__kbevents[c].splice(d,1);break}return this}),subscribe:e(function(c,b){var g=c.split("."),d=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;void 0===g.__kbsubscribers[d]&&(g.__kbsubscribers[d]=
[]);g.__kbsubscribers[d].push(b);return this}),unsubscribe:e(function(c,b){var g=c.split("."),d=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;if(void 0!==g.__kbsubscribers[d])for(var l=0,k=g.__kbsubscribers[d].length;l<k;l++)if(g.__kbsubscribers[d][l].toString()===b.toString()){g.__kbsubscribers[d].splice(l,1);break}return this}),subscribeDeep:e(function(c,b){function g(c,d){var m=Object.keys(c,"all").filter(function(b){return n.call(c[b])}.bind(c));if(void 0!==
c[d]||"*"===d)void 0===c.__kbparentsubscribers[d]&&(c.__kbparentsubscribers[d]=[]),c.__kbparentsubscribers[d].push(b);for(var l=0,k=m.length;l<k;l++)g(c[m[l]],d)}var d=-1!==c.indexOf("*"),l=c.split(".");l.slice(0,l.indexOf("*"));var k=-1!==l.indexOf("*")?l.slice(l.indexOf("*"),l.length):[],f=1===k.length,h=l.pop(),l=0!==l.length?this.__kbnonproxy.getLayer(l.join(".")):this.__kbnonproxy;d?f?g(l,"*"):(k.shift(),l.subscribeDeep(k.join("."),b)):g(l,h);return this}),unsubscribeDeep:e(function(c,b){function g(c,
d){var m=Object.keys(c,"all").filter(function(b){return n.call(c[b])&&!(c[b]instanceof HTMLElement)}.bind(c));if((void 0!==c[d]||"*"===d)&&void 0!==c.__kbparentsubscribers[d])for(var l=0,k=c.__kbparentsubscribers[d].length;l<k;l++)c.__kbparentsubscribers[d][l].toString()===b.toString()&&c.__kbparentsubscribers[d].splice(l,1);l=0;for(k=m.length;l<k;l++)g(c[m[l]],d)}var d=-1!==c.indexOf("*"),l=c.split(".");l.slice(0,l.indexOf("*"));var k=-1!==l.indexOf("*")?l.slice(l.indexOf("*"),l.length):[],f=1===
k.length,h=l.pop(),l=0!==l.length?this.__kbnonproxy.getLayer(l.join(".")):this.__kbnonproxy;d?f?g(l,"*"):(k.shift(),l.unsubscribeDeep(k.join("."),b)):g(l,h);return this}),callSubscribers:e(function(c,b,g,d,l,k){var f=this.__kbnonproxy;if(void 0!==f.__kbsubscribers[g])for(var h=0,e=f.__kbsubscribers[g].length;h<e;h++)f.__kbsubscribers[g][h].call(this,{key:g,value:d,oldValue:l,stopChange:k,local:b,kbref:c});if(void 0!==f.__kbparentsubscribers[g])for(h=0,e=f.__kbparentsubscribers[g].length;h<e;h++)f.__kbparentsubscribers[g][h].call(this,
{key:g,value:d,oldValue:l,stopChange:k,local:b,kbref:c});if(void 0!==f.__kbsubscribers["*"])for(h=0,e=f.__kbsubscribers["*"].length;h<e;h++)f.__kbsubscribers["*"][h].call(this,{key:g,value:d,oldValue:l,stopChange:k,local:b,kbref:c});if(void 0!==f.__kbparentsubscribers["*"])for(h=0,e=f.__kbparentsubscribers["*"].length;h<e;h++)f.__kbparentsubscribers["*"][h].call(this,{key:g,value:d,oldValue:l,stopChange:k,local:b,kbref:c});return this}),callAllSubscribers:e(function(){function c(b,c,d){for(var l=
0,k=c.length;l<k;l++)c[l].call(b,{key:d,value:b[d],oldValue:b[d],stopChange:!1,local:b,kbref:b.__kbref,initial:!0})}(function(b){for(var g=Object.keys(b.__kbsubscribers),d=Object.keys(b.__kbparentsubscribers),l=0,k=g.length;l<k;l++)if(0!==b.__kbsubscribers[g[l]].length)if("*"===g[l])for(var f=0,h=Object.keys(b),e=h.length;f<e;f++)c(b,b.__kbsubscribers[g[l]],h[f]);else c(b,b.__kbsubscribers[g[l]],g[l]);l=0;for(k=d.length;l<k;l++)if(0!==b.__kbparentsubscribers[d[l]].length)if("*"===d[l])for(f=0,h=Object.keys(b),
e=h.length;f<e;f++)c(b,b.__kbparentsubscribers[d[l]],h[f]);else c(b,b.__kbparentsubscribers[d[l]],d[l])})(this.__kbnonproxy);return this}),stopChange:e(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(C.prototype,{addDataListener:e(q("addDataListener","__kblisteners")),removeDataListener:e(t("removeDataListener","__kblisteners")),addDataUpdateListener:e(q("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:e(t("removeDataUpdateListener","__kbupdatelisteners")),
addDataCreateListener:e(q("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:e(t("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:e(q("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:e(t("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:e(q("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:e(t("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:e(q("addDataMethodUpdateListener",
"__kbmethodupdatelisteners")),removeDataMethodUpdateListener:e(t("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:e(z("addChildDataListener","__kbparentlisteners")),removeChildDataListener:e(v("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:e(z("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:e(v("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:e(z("addChildDataCreateListener",
"__kbparentcreatelisteners")),removeChildDataCreateListener:e(v("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:e(z("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:e(v("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return C}}(),Y=function(){return function(){function D(r){if("object"===typeof r)for(var C=0,p=r.length;C<p;C++)K_Components[r[C]]?u(r[C],K_Components[r[C]],document.getElementById("script_"+
r[C])):D.load(r[C],"component/"+r[C]+"/"+location.search,u);else"string"===typeof r&&(K_Components[r[C]]?u(r,K_Components[r],document.getElementById("script_"+r)):D.load(r,"component/"+r+"/"+location.search,u))}var u=function(){},A=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});D.getUnknowns=function(r){var u=r.match(A);return u.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(p,e){return document.createElement(p)instanceof HTMLUnknownElement&&-1===u.indexOf(p,e+1)&&!K_Components[p]})};
D.load=function(r,u,p){document.head.appendChild(function(e,p,u){var r=document.createElement("script");r.type="text/javascript";r.charset="utf-8";r.async=!0;r.src=p;r.id="script_"+e;r.onload=function(){u(e,K_Components[e],this)};return r}(r,u,p));return D};D.onLoad=function(r){if(void 0===r)return u;u="function"===typeof r?r:u;return D};return D}}(),W=function(){function D(){function u(f,d){var k=f.length,h;for(h=0;h<k&&(f[h](d),void 0===d._stopPropogation);h++);}function A(f,d){var k=f.length,h;
for(h=0;h<k&&(d.child=d.target,d.target=f[h].parent,f[h].func(d),void 0===d._stopPropogation);h++);}function r(f,d){for(var k=f.length;0<k;U++)if(f[U].toString()===d.toString())return!0;return!1}function C(f,d,k,h,c,b,g,m){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=k;this.oldValue=h;this.target=f;this.attr=d;this.arguments=c;this.action=b;this.child=void 0;this.type=g;this.stopChange=m}function p(){this._attrListeners=
{};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function e(f,d,k,h){var c=f.get,b=f.set,g;return function(m){g=c.call(this);k(this,d,m,g,void 0,this._stopChange)&&b.call(this,m);this._stopChange||h(this,d,m,g);this._stopChange=void 0}}function D(f,d,k,h){var c;return function(b){c=f.value;k(this,d,b,c,arguments,
this._stopChange)&&(f.value=b);this._stopChange||h(this,d,b,c,arguments);this._stopChange=void 0}}function R(f,d,k,h){var c=f.value,b;return function(){k(this,d,null,null,arguments,this._stopChange)&&(b=c.apply(this,arguments));this._stopChange||h(this,d,null,null,arguments,b);this._stopChange=void 0;return b}}function Q(f,d,k,h,c){var b=c.style,g=d.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),m,l;return{get:function(){return l},set:function(f){m=l;k(c,d,f,m,void 0,this._stopChange)&&(l=
f,b.setProperty(g,f));this._stopChange||h(c,d,f,m);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(f,d,k,h){if("function"!==typeof d)return n;var c=-1!==["value","checked"].indexOf(f),b=-1!==z.indexOf(f),g;if(this.toString()!==n.toString())if(k){var m=this.querySelectorAll("*");k=m.length;for(var l,e=0;e<k;e++){l=m[e].attrListeners();if(c||"*"===f)void 0!==m[e].addInputBinding&&m[e].addInputBinding(),void 0!==m[e].addInputBoxBinding&&m[e].addInputBoxBinding();if(b)n.injectStyleProperty(m[e],
f),g=h?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===f){g=h?"_parentStyleUpdateListeners":"_parentStyleListeners";k=z.length;for(var q=0;q<k;q++)n.injectStyleProperty(m[e],z[q]);void 0===l[g]["*"]&&(l[g]["*"]=[]);l[g]["*"].push({parent:this,func:d})}g=h?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===l[g][f]&&(l[g][f]=[]);l[g][f].push({parent:this,func:d})}}else{l=this.attrListeners();if(b)g=h?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,
f);else{if(c||"*"===f)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===f){g=h?"_styleUpdateListeners":"_styleListeners";k=z.length;for(e=0;e<k;e++)n.injectStyleProperty(this,z[e]);void 0===l[g][f]&&(l[g][f]=[]);l[g][f].push(d)}g=h?"_attrUpdateListeners":"_attrListeners"}void 0===l[g][f]&&(l[g][f]=[]);l[g][f].push(d)}else{if(c||"*"===f)for(q=document.querySelectorAll("input, textarea"),k=q.length,e=0;e<k;e++)void 0!==q[e].addInputBinding&&
q[e].addInputBinding(),void 0!==q[e].addInputBoxBinding&&q[e].addInputBoxBinding();if(b){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));k=b.length+1;b.unshift(document.body);for(e=0;e<k;e++)n.injectStyleProperty(b[e],f);g=h?y:E}else{if("*"===f){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));k=b.length+1;c=z.length;b.unshift(document.body);for(e=0;e<k;e++)for(q=0;q<c;q++)n.injectStyleProperty(b[e],z[q]);g=h?y:E;void 0===g[f]&&(g[f]=[]);g[f].push(d)}g=h?K:J}void 0===
g[f]&&(g[f]=[]);g[f].push(d)}}function L(f,d,k,h){function c(b,c){var l=c[b],k=l.length;for(g=0;g<k;g++)l[g].toString()===d.toString()&&l.splice(g,1)}if("function"!==typeof d)return n;["value","checked"].indexOf(f);var b=-1!==z.indexOf(f),g;if(this.toString()!==n.toString())if(k){k=this.querySelectorAll("*");var m=k.length;b?(b=h?"_childStyleUpdateListeners":"_childStyleListeners",c(f,this.attrListeners()[b]),b=h?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===f&&(b=h?"_childStyleUpdateListeners":
"_childStyleListeners",c(f,this.attrListeners()[b])),b=h?"_childAttrUpdateListeners":"_childAttrListeners",c(f,this.attrListeners()[b]),b=h?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<m;g++){for(var l=k[g].attrListeners()[b][f],e=l.length,q=0;q<e;q++)l[q].isEqualNode(this)&&l.slice(q,1);if("*"===f)for(listenersStyle=h?"_parentStyleUpdateListeners":"_parentStyleListeners",l=k[g].attrListeners()[b][f],e=l.length,q=0;q<e;q++)l[q].isEqualNode(this)&&l.slice(q,1)}}else b?b=h?"_styleUpdateListeners":
"_styleListeners":("*"===f&&(b=h?"_styleUpdateListeners":"_styleListeners",c(f,this.attrListeners()[b])),b=h?"_attrUpdateListeners":"_attrListeners"),c(f,this.attrListeners()[b]);else b?b=h?y:E:("*"===f&&(b=h?y:E,c(f,b)),b=h?K:J),c(f,b)}function O(f,d){n.addAttrListener.call(this,f,d,!0);return this}function P(f,d){n.addAttrUpdateListener.call(this,f,d,!0);return this}function M(f,d){n.removeAttrListener.call(this,f,d,!0);return this}function H(f,d){n.removeAttrUpdateListener.call(this,f,d,!0);return this}
function F(f,d,k){var h=this.attrListeners();"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(f){case "attr":if(r(h._attrListeners[d],k))return!0;break;case "attrupdate":if(r(h._attrUpdateListeners[d],k))return!0}return!1}function I(){this._stopChange=!0;return this}function n(){function f(b,c){var g,d=c.length;for(g=0;g<d;g++)-1===b.indexOf(c[g])&&b.push(c[g]);return b}function d(b,c){for(var g=Object.keys(b),d,k,f=0,h=g.length;f<h;f++)if(d=g[f],void 0===c[d])c[d]=b[d].slice();else for(var e=
0,q=b[d].length;e<q;e++)k=b[d][e],c[d].push(k)}function k(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var c=b.target.attrListeners(),g,k=["value","checked"],h=c._attrListeners,e=c._attrUpdateListeners,q=c._parentAttrListeners;g=c._parentAttrUpdateListeners;var t=!1;if(void 0!==J["*"]||void 0!==K["*"])t=!0;if(!0!==t&&void 0!==h["*"]||void 0!==e["*"]||void 0!==q["*"]||void 0!==g["*"])t=!0;if(!0!==t)for(var v=0;v<k.length;v++)if(void 0!==J[k[v]]||void 0!==K[k[v]]||void 0!==h[k[v]]||void 0!==
e[k[v]]||void 0!==q[k[v]]||void 0!==g[k[v]]){t=!0;break}g=t;k=Object.keys(E);h=Object.keys(y);Object.keys(c._styleListeners);Object.keys(c._styleUpdateListeners);e=Object.keys(c._parentStyleListeners);c=Object.keys(c._parentStyleUpdateListeners);q=[];if(0!==k.length||0!==h.length)q=f(q,k),q=f(q,h);if(0!==q.length&&0!==e.length||0!==c.length)q=f(q,e),q=f(q,c);-1!==q.indexOf("*")&&(q=z);var c=q,k=c.length,p,r,h=[],w,e="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,q=b.target;void 0!==e&&(b.attr=
"appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(g){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(h=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||h.unshift(b.arguments[0])):h=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));w=h.length;for(var u=0;u<w;u++)void 0!==h[u].addInputBinding&&h[u].addInputBinding(),void 0!==
h[u].addInputBoxBinding&&h[u].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(h=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),h.unshift(b.arguments[0])):h=Array.prototype.slice.call(b.target.querySelectorAll("*"));g=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;v=b.target.__kb._parentStyleListeners;p=b.target.__kb._parentStyleUpdateListeners;w=h.length;for(u=0;u<w;u++){if(0!==k)for(r=
0;r<k;r++)n.injectStyleProperty(h[u],c[r]);r=h[u].attrListeners();d(g,r._parentAttrListeners);d(t,r._parentAttrUpdateListeners);d(v,r._parentStyleListeners);d(p,r._parentStyleUpdateListeners)}void 0!==e&&(b.attr=e,b.target=q,b.arguments=[])}}function h(c){var g=c.target.attributes[c.arguments[0]],d="setAttribute"===c.attr?c.arguments[1]:"";b(c.target,c.arguments[0],d,void 0!==g?g.value:"",[d])||c.preventDefault()}function c(b){var c=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:
"";g(b.target,b.arguments[0],d,void 0!==c?c.value:"",[d])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");var b=N,g=w;n.addAttrUpdateListener("appendChild",k);n.addAttrUpdateListener("removeChild",k);n.addAttrUpdateListener("innerHTML",k);n.addAttrUpdateListener("outerHTML",
k);n.addAttrUpdateListener("innerText",k);n.addAttrUpdateListener("outerText",k);n.addAttrUpdateListener("textContent",k);n.addAttrListener("setAttribute",h);n.addAttrListener("removeAttribute",h);n.addAttrUpdateListener("setAttribute",c);n.addAttrUpdateListener("removeAttribute",c);return n}var J={},K={},E={},y={},q={},t="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),z=Object.getOwnPropertyNames(document.documentElement.style),
v=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}).concat(["addEventListener","removeEventListener"]),U,N=function(f,d,k,h,c,b){k=new C(f,d,k,h,c,void 0,"set",b);void 0!==f.__kb&&(h=f.__kb._attrListeners,c=f.__kb._styleListeners,b=f.__kb._parentAttrListeners,f=f.__kb._parentStyleListeners,void 0!==h[d]&&u(h[d],k),void 0===k._stopPropogation&&void 0!==c[d]&&u(c[d],k),void 0===k._stopPropogation&&void 0!==h["*"]&&(u(h["*"],k),void 0===k._stopPropogation&&u(c["*"],k)),
void 0===k._stopPropogation&&void 0!==b[d]&&A(b[d],k),void 0===k._stopPropogation&&void 0!==f[d]&&A(f[d],k),void 0===k._stopPropogation&&void 0!==b["*"]&&(A(b["*"],k),void 0===k._stopPropogation&&A(f["*"],k)));void 0===k._stopPropogation&&void 0!==J[d]&&u(J[d],k);void 0===k._stopPropogation&&void 0!==E[d]&&u(E[d],k);void 0===k._stopPropogation&&void 0!==J["*"]&&(u(J["*"],k),void 0===k._stopPropogation&&u(E["*"],k));return void 0!==k._preventDefault?!1:!0},w=function(f,d,k,h,c,b){k=new C(f,d,k,h,c,
b,"update");void 0!==f.__kb&&(h=f.__kb._attrUpdateListeners,c=f.__kb._styleUpdateListeners,b=f.__kb._parentAttrUpdateListeners,f=f.__kb._parentStyleUpdateListeners,void 0!==h[d]&&u(h[d],k),void 0===k._stopPropogation&&void 0!==c[d]&&u(c[d],k),void 0===k._stopPropogation&&void 0!==h["*"]&&(u(h["*"],k),void 0===k._stopPropogation&&u(c["*"],k)),void 0===k._stopPropogation&&void 0!==b[d]&&A(b[d],k),void 0===k._stopPropogation&&void 0!==f[d]&&A(f[d],k),void 0===k._stopPropogation&&void 0!==b["*"]&&(A(b["*"],
k),void 0===k._stopPropogation&&A(f["*"],k)));void 0===k._stopPropogation&&void 0!==K[d]&&u(K[d],k);void 0===k._stopPropogation&&void 0!==y[d]&&u(y[d],k);void 0===k._stopPropogation&&void 0!==K["*"]&&(u(K["*"],k),void 0===k._stopPropogation&&u(y["*"],k));return void 0!==k._preventDefault?!1:!0};n.injectPrototypeProperty=function(f,d,k,h,c){var b=f.prototype,g=Object.getOwnPropertyDescriptor(b,d);k=k||f.toString().split(/\s+/)[1].split("{")[0].replace("()","");var m=q[k];h=h||N;c=c||w;void 0===b.attrListeners&&
(b={},b.attrListeners=function(){void 0===this.__kb&&(this.__kb=new p);return this.__kb}.bind(b),b.addAttrListener=n.addAttrListener,b.addAttrUpdateListener=n.addAttrUpdateListener,b.addChildAttrListener=O,b.addChildAttrUpdateListener=P,b.hasListener=F,b.removeAttrListener=n.removeAttrListener,b.removeAttrUpdateListener=n.removeAttrUpdateListener,b.removeChildAttrListener=M,b.removeChildAttrUpdateListener=H,b.stopChange=I);void 0===m&&(q[k]={obj:f,proto:b,descriptors:{},set:void 0,update:void 0},
m=q[k],m.set=h,m.update=c);void 0===m.descriptors[d]&&(m.descriptors[d]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(b,d,{get:g.get,set:e(g,d,h,c),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(b,d,{value:R(g,d,h,c),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(b,d,{get:function(){return g.value},set:D(g,d,h,c),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=function(f,d,k,h){var c=f.style,b=Object.getOwnPropertyDescriptor(c,
d),g=f.attrListeners().injectedStyle;k=k||N;h=h||w;void 0===g&&(f.attrListeners().injectedStyle={obj:f,proto:c,descriptors:{},set:void 0,update:void 0},f.attrListeners().injectedStyle.set=k,f.attrListeners().injectedStyle.update=h,g=f.attrListeners().injectedStyle);void 0===g.descriptors[d]&&(g.descriptors[d]=b);b.configurable&&Object.defineProperty(c,d,Q(b,d,k,h,f));return n};n.injectPrototypes=function(f,d,k,h){var c=f.prototype;d=d||f.toString().split(/\s+/)[1].split("{")[0].replace("()","");var b=
q[d],g=Object.getOwnPropertyNames(c);k=k||N;h=h||w;var e;void 0===c.attrListeners&&(c.attrListeners=function(){void 0===this.__kb&&(this.__kb=new p);return this.__kb},c.addAttrListener=n.addAttrListener,c.addAttrUpdateListener=n.addAttrUpdateListener,c.addChildAttrListener=O,c.addChildAttrUpdateListener=P,c.removeAttrListener=n.removeAttrListener,c.removeAttrUpdateListener=n.removeAttrUpdateListener,c.removeChildAttrListener=M,c.removeChildAttrUpdateListener=H,c.hasListener=F,c.stopChange=I);void 0===
b&&(q[d]={obj:f,proto:c,descriptors:{},set:void 0,update:void 0},b=q[d],b.set=k,b.update=h);e=q[d].descriptors;for(h=0;h<g.length;h+=1)void 0===e[g[h]]&&n.injectPrototypeProperty(f,g[h],d,k,w);if(-1!==g.indexOf("value")){var l=function(c){var g,d,k;if("checkbox"===this.type||"radio"===this.type)g=!0;d=g?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){k=g?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;g&&(b.set(this,
"checked",this.checked,d)?b.update(this,"checked",this.checked,d):e.checked.set.call(this,d));this.value!==k&&(this.value=k);b.set(this,"value",this.value,d)?b.update(this,"value",this.value,d):e.value.set.call(this,d)}.bind(this),0)};c.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",l)};c.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",l)};c.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=
void 0;this.removeEventListener("mouseup",l)};c.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",l)}}return n};n.addAttrListener=function(f,d,k){if("html"===f){f=0;for(var h=t.length;f<h;f++)G.call(this,t[f],d,k,!1)}else if("events"===f)for(f=0,h=v.length;f<h;f++)G.call(this,v[f],d,k,!1);else G.call(this,f,d,k,!1);return this};n.addAttrUpdateListener=function(f,d,k){if("html"===f){f=0;for(var h=t.length;f<h;f++)G.call(this,t[f],d,k,!0)}else if("events"===
f)for(f=0,h=v.length;f<h;f++)G.call(this,v[f],d,k,!0);else G.call(this,f,d,k,!0);return this};n.removeAttrListener=function(f,d,k){if("html"===f){f=0;for(var h=t.length;f<h;f++)L.call(this,t[f],d,k,!1)}else if("events"===f)for(f=0,h=v.length;f<h;f++)L.call(this,v[f],d,k,!1);else L.call(this,f,d,k,!1);return this};n.removeAttrUpdateListener=function(f,d,k){if("html"===f){f=0;for(var h=t.length;f<h;f++)L.call(this,t[f],d,k,!0)}else if("events"===f)for(f=0,h=v.length;f<h;f++)L.call(this,v[f],d,k,!0);
else L.call(this,f,d,k,!0);return this};n.hasListener=function(f,d,k){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(f){case "attr":if(r(J[d],k))return!0;break;case "attrupdate":if(r(K[d],k))return!0}return!1};n.injectedPrototypes=function(){return q};return n}"function"===typeof define&&define.amd&&define("KB",D);return D}(),Z=function(D){return function(){function u(q){document.createDocumentFragment();this.name=q.tagName.toLowerCase();this.template=n[this.name]||'<div class="missing_component">Unknown Component</div>';
this.node=q;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name;if(this.template.match(C())){var t=this.template;q=C();for(var t=t.split(q).filter(Boolean),z={},v=0,r,p,u=t.length;v<u;v++)t[v].match(q)&&(r=e(t[v].substring(t[v].indexOf("<"),t[v].indexOf("}}"))+"}").replace(/[<>]/g,""),0===r.indexOf("/")&&z[r.replace("/","")]?(r=r.replace("/",""),p=Object.keys(z[r],"array"),0!==p.length&&
(p=p[p.length-1],t[p]="\x3c!--"+t[p],z[r].splice(parseInt(p,10),1),t[v]+="--\x3e",p=Object.keys(z[r],"array"),0===p.length&&(z[r]=null,delete z[r]))):(z[r]||(z[r]=[]),z[r][v]=t[v]));v=0;p=Object.keys(z);for(u=p.length;v<u;v++)for(q=Object.keys(z[p[v]],"array");v<u;v++)t[q[0]]="\x3c!--"+t[q[0]]+"--\x3e";this.template=t.join("")}}function A(e,t,z,n){return{value:e,writable:!!t,enumerable:!!n,configurable:!!z}}function r(){return new RegExp("(\\"+H.split("").join("\\")+")(.*?)(\\"+F.split("").join("\\")+
")","g")}function C(){return new RegExp("(<\\"+H.split("").join("\\")+".*?\\"+F.split("").join("\\")+".*?>|<\\/\\"+H.split("").join("\\")+".*?\\"+F.split("").join("\\")+">)")}function p(e){return e.split(new RegExp("("+H.split("").join("\\")+")(.*?)("+F.split("").join("\\")+")","g")).map(function(e,q,n){return n[q-1]===H?H+e+F:e}).filter(function(e,q,n){return 0!==e.length&&e!==H&&e!==F&&0!==e.length})}function e(e){return e.replace(new RegExp("["+H+F+"]","g"),"").replace(new RegExp("(\\"+I.split("").join("\\")+
"(.*?)+)","g"),"").replace(/\s/g,"")}function S(e){return e.reduce(function(e,q){q.match(/(\()(.*?)(\))/)?e.vmFilters[e.vmFilters.length]=q.replace(/[\(\)]/g,""):q.match(/(\[)(.*?)(\])/)?-1!==q.indexOf("~")?e.model[e.model.length]=q.replace(/[\[\]\~]/g,""):-1!==q.indexOf("+")?e.local[e.local.length]=q.replace(/[\[\]\+]/g,""):e.session[e.session.length]=q.replace(/[\[\]\-]/g,""):e.filters[e.filters.length]=q;return e},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function R(e){return-1!==
e.indexOf("for")?e.replace(new RegExp("["+H+F+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(e){return 0!==e.length}):[]}function Q(e){if(2>e.split("==").length&&2>e.split("<=").length&&2>e.split(">=").length&&-1!==e.indexOf("="))return e.substring(e.indexOf("=")+1,e.length)}function G(e){var t=e.match(/^(\s*)(>)((.*?)+)/),n=e.match(/^(\s*)(<)((.*?)+)/);e=e.replace(/(^<|^>)((.*?)+)/,"$2");var r=Q(e),p=e.match(/((==|<=|>=|<|>)((.*?)+))/g),u=e.match(/(([\+\*-\/])((.*?)+))/g);
return{type:t?"insert":n?"outsert":void 0,set:r!==e?r:void 0,filters:p||u?{boolFilter:p?eval("(function(){ return function(v){ return (v"+p[0]+");};}())"):void 0,mathFilter:u?eval("(function(){ return function(v){ return (v"+u[0]+");};}())"):void 0}:void 0}}function L(e){if(0!==e.length){for(var t="",n=0,r=e.length;n<r;n++)if("string"===typeof e[n])t+=e[n];else if(void 0===e[n]._data)t+=e[n].text;else var p=e[n]._data.get(e[n].key),t=t+O(void 0!==p?p:"",e[n].filters.filters,e[n]._data.filters);return t}return O(e[0]._data.get(e[0].key)||
"",e[0].filters.filters,e[0]._data.filters)}function O(e,n,r){for(var p=0,u=n.length;p<u;p++)r[n[p]]&&(e=r[n[p]](e));return e}function P(e,n,p,r){for(var u=0,y=n.length;u<y;u++)if(p[n[u]])p[n[u]](e,r);return e}function M(){function e(d,k){var f=G(k);this.text=d;this.key=k.replace(/(^>|^<*)(.*?)([=*+-\/<>]+)((.*?)+)/g,"$2").replace(/\s/g,"");this.keyLength=this.key.split(".").length;this.localKey=this.key.split(".").pop();var c;c=-1!==d.indexOf(I)?d.replace(new RegExp("["+F+"]","g"),"").replace(new RegExp("(.*?)(\\"+
I.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=S(c);this.component="for"===this.type?R(d)[1]:void 0;this.id=0;this.subType=f.subtype;this.set=f.set;this.inlineFilters=f.filters;this.isBase=!1}function n(d,e){for(var f=0,c=e.length;f<c;f++)d.stopChange().appendChild(e[f])}function p(d){if(d&&window.model)return window.model.get(d[0])}function r(d,e){if(e&&0!==e.length&&window.model)for(var f=0,c=e.length;f<c;f++)window.model.set(e[f],d)}function u(d){if(d&&window.localStorage)return localStorage.getItem(d[0])}
function C(d,e){if(d&&0!==d.length&&window.localStorage)for(var f=0,c=d.length;f<c;f++)localStorage.setItem(d[f],e)}function w(d){if(d&&window.sessionStorage)return sessionStorage.getItem(d[0])}function f(d,e){if(d&&0!==d.length&&window.sessionStorage)for(var f=0,c=d.length;f<c;f++)sessionStorage.setItem(d[f],e)}Object.defineProperties(e.prototype,{addPointer:A(function(d){for(var e=document.createElement(this.component),f=P(this._data.getLayer(this.key),this.filters.filters,this._data.filters,d)[d],
c=0,b=Object.keys(f,"all"),g=b.length;c<g;c++)e.k_post||(e.k_post={}),e.k_post[b[c]]=f,e.k_post.x=d,e.k_post.loopid=this.component+"_"+d;d>=this.node.children.length?this.node.stopChange().appendChild(e):this.node.stopChange().insertBefore(e,this.node.children[d]);y({event:"loopitem",node:e,parent:this.node,map:this});return this}),removePointer:A(function(d){for(var e=this.node.children[d].kb_maps,f=0,c=Object.keys(this.node.children[d].kb_viewmodel.pointers),b=c.length;f<b;f++){var g=e[c[f]];if(g)for(var m=
0,l=g.length;m<l;m++)g[m].unsync(),g[m]=null,delete g[m]}this.node.stopChange().removeChild(this.node.children[d]);f=0;for(b=this.node.children.length;f<b;f++)this.node.children[f].kb_viewmodel.x=f,d=this.node.children[f].kb_viewmodel.loopid,this.node.children[f].kb_viewmodel.loopid=d.substring(0,d.lastIndexOf("_")+1)+f;return this}),reapplyPointer:A(function(d){for(var e=this.node.children[d].kb_maps,f=this.node.children[d].kb_viewmodel.loopid,c=0,b=Object.keys(this.node.children[d].kb_viewmodel.pointers),
g=b.length;c<g;c++){var m=e[b[c]];if(void 0!==m)for(var l=0,q=m.length;l<q;l++)m[l].reconnect()}this.node.children[d].kb_viewmodel.x=d;this.node.children[d].kb_viewmodel.loopid=f.substring(0,f.lastIndexOf("_")+1)+d;return this}),connect:A(function(d){var e=this;this._data=d;if("for"!==this.type){if(void 0!==this._data.pointers[this.key]&&void 0!==this._data.pointers[this.key].filters)for(var f=this._data.pointers[this.key].filters.dataFilters,c=0,b=Object.keys(this._data.pointers[this.key].filters.stringFilters),
g=b.length;c<g;c++)for(var m=this._data.pointers[this.key].filters.stringFilters[b[c]],l=0,q=m.length;l<q;l++)-1===this.filters[b[c]].indexOf(m[l])&&(this.filters[b[c]].push(m[l]),-1!==["vmfilters","filters"].indexOf(b[c])&&void 0!==f[m[l]]&&void 0===this._data.filters[m[l]]&&(this._data.filters[m[l]]=f[m[l]]));if(this.insert){this.setDom(this._data.get(this.key));this.unsync();return}this.set&&(f=!isNaN(parseInt(this.set,10))&&parseInt(this.set,10).toString().length===this.set.length,c="true"===
this.set.replace(/\s/g,"")||"false"===this.set.replace(/\s/g,""),b=-1!==this.set.indexOf('"')||-1!==this.set.indexOf("'"),(this.set=f?parseInt(this.set,10):c?"true"===this.set.replace(/\s/g,""):b?this.set.replace(/((\s*\"|\')(.*?)(\"|\'))/g,"$3"):void 0)&&this._data.set(this.key,this.set));if(this.outsert){this.setDom("");this.unsync();return}this.inlineFilters&&(this.inlineFilters.boolFilter?(this.filters.filters.unshift("boolFilter"),this._data.filters.boolFilter=this.inlineFilters.boolFilter):
(this.filters.filters.unshift("mathFilter"),this._data.filters.mathFilter=this.inlineFilters.mathFilter));if("component"===this.type)return this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,p(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,w(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,u(this.filters.local)),this.node.k_post||(this.node.k_post=
{}),this.node.k_post[this.attr]={filters:{dataFilters:this._data.filters,stringFilters:this.filters},pointer:this._data.getLayer(this.key),key:this.key.split(".").pop()},this;if("node"===this.type)return this.isBase&&(this.dataListener=function(b){"delete"===b.event?e.unsync():e.replaceNode()},d.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener)),this;this.dataListener=function(b){"delete"===b.event?e.unsync():e.setDom(b.value)};this.isEvent||d.getLayer(this.key).addDataUpdateListener(this.localKey,
this.dataListener);if(1===this.bindText.length&&!this.isEvent)if(this.domListener=function(b){e.setData(b.value)},this.node.__kbhtmllistener=!0,"object"===typeof this.listener)for(c=0,g=this.listener.length;c<g;c++)this.node.addAttrUpdateListener(this.listener[c],this.domListener);else this.node.addAttrUpdateListener(this.listener,this.domListener)}else this.dataListener=function(b){"postset"!==b.type||b.oldValue&&0!==b.oldValue.length||(b.event="create");e.setLoop(b.key,b.event)},d.getLayer(this.key).addDataMethodUpdateListener(this.dataListener);
"for"!==this.type&&(this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,p(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,w(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,u(this.filters.local)),this.isEvent?(this.dataListener=function(b){e.node.stopChange().removeEventListener(e.attr.replace("on",""),b.oldValue);e.node.stopChange().addEventListener(e.attr.replace("on",
""),b.value)},this._data.addDataUpdateListener(this.key,this.dataListener),this.node.addEventListener(this.attr.replace("on",""),this._data.get(this.key))):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=L(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(d=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==d?d:"")));return this}),reconnect:A(function(){if("for"!==this.type){if(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,
this.dataListener),1===this.bindText.length)if("object"===typeof this.listener)for(var d=0,e=this.listener.length;d<e;d++)this.node.removeAttrUpdateListener(this.listener[d],this.domListener);else this.node.removeAttrUpdateListener(this.listener,this.domListener)}else this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);this.connect(this._data);return this}),createloop:A(function(){this.node.stopChange().innerHTML="";for(var d=0,e=P(this._data.get(this.key),this.filters.filters,
this._data.filters).length;d<e;d++)this.setLoop(d,"create");return this}),setData:A(function(d){d=O(d,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,d);r(this.filters.model,d);f(this.filters.session,d);C(this.filters.local,d);return this}),setDom:A(function(d){r(this.filters.model,d);f(this.filters.session,d);C(this.filters.local,d);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):this.isInput&&-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=
this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=L(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(d=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==d?d:""));return this}),setLoop:A(function(d,e){switch(e){case "create":this.addPointer(d);break;case "delete":this.removePointer(d);break;case "set":this.reapplyPointer(d);break;default:if("push"!==
e)for(var f=0,c=this._data.getLayer(this.key).length;f<c;f++)this.reapplyPointer(f)}return this}),bindMaps:A([]),unsync:A(function(){this._data=this.__proto__.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;return this}),reset:A(function(){"for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener).addDataMethodUpdateListener(this.extraListener):this.dataListener&&(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,
this.dataListener).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener).addAttrUpdateListener(this.listener,this.domListener))}),replaceNode:A(function(){var d=document.createDocumentFragment(),e=d.appendChild(document.createElement("div")),f,c=!1,b=this;e.innerHTML=this.bindText.map(function(g,d){if("object"===typeof g){if(void 0===g._data)return c=!0,"";if(g.key===b.bindText[1].key){var e=O(g._data.get(g.key),
g.filters,g._data.filters)||"unknown";"unkown"===e&&1===d&&console.error("You attempted to bind a node to %o, which does not exist on %o, with bindText: %o",g.key,g._data,g.base);return e}return O(g._data.get(g.key),g.filters,g._data.filters)}return g}).join("");c||(f=e.children[0],d.replaceChild(f,e),this.base.local.parentElement.stopChange().replaceChild(d,this.base.local),this.base.local=f,y({event:"replaceNode",node:this.base.local,parent:this.node,map:this.base}))})});return e}var H="{{",F="}}",
I="|",n={},J=/(<\/.*?>)/g;D().call();var K=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}).concat(["ontouchstart","ontouchend","ontouchmove"]),E={loopitem:[],replaceNode:[]},y=function(e){for(var n=E[e.event],p=0,r=n.length;p<r;p++)n[p](e)};u.start=function(e){if(void 0===e)return H;H="string"===typeof e?e:H;return u};u.end=function(e){if(void 0===e)return F;F="string"===typeof e?e:F;return u};u.pipe=function(e){if(void 0===e)return I;I="string"===typeof e?e:I;return u};
u.getUnknown=function(e){var p=e.match(J).map(function(e){return e.replace(/[<\/>]/g,"")});p.filter(function(e,q){return 0!==e.indexOf(H)&&document.createElement(e)instanceof HTMLUnknownElement&&-1===p.indexOf(e,q+1)&&void 0===n[e]});return p};u.isRegistered=function(e){return void 0!==n[e]};u.register=function(e,p){void 0===n[e]?(n[e]=p,u.getUnknown(p)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",e);return this};u.addEventListener=function(e,n){void 0!==
E[e]?E[e].push(n):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",e);return u};u.removeEventListener=function(e,n){if(void 0!==E[e])for(var p=0,r=E[e].length;p<r;p++)E[e][p].toString()===n.toString()&&E[e].splice(p,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return u};Object.defineProperties(u.prototype,{register:A(u.register),isRegistered:A(u.isRegistered),getUnknown:A(u.getUnknown),map:A(function(n){function u(z,
v){for(var y=0,A=z.length;y<A;y++)if(void 0===z[y].kb_maps&&8!==z[y].nodeType){z[y].kb_mapper=n;z[y].kb_maps=v;if(3===z[y].nodeType){var w=z[y],f=v,d=w.textContent;if(d.match(r())){var k=p(d),h=M();h.prototype.type=d.match(new RegExp("(\\"+H.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+F.split("").join("\\")+")","g"))?"for":"text";h.prototype.text=d;h.prototype.bindText=k;h.prototype.listener=["textContent","innerHTML","innerText"];h.prototype.attr="textContent";h.prototype.localAttr="textContent";
h.prototype.local=w;h.prototype.node=w.parentElement;h.prototype.binds=f;w=0;for(d=k.length;w<d;w++)if(0===k[w].indexOf(H)){var c="for"===h.prototype.type?R(k[w])[0]:e(k[w]),b=new h(k[w],c);void 0===f[c]&&(f[c]=[]);b.bindText[w]=b;b.bindMaps.push(b);b.id=f[c].length;f[c].push(b)}}}else for(f=z[y],k=v,h=Array.prototype.slice.call(f.attributes),w=f instanceof HTMLUnknownElement,d=0,c=h.length;d<c;d++)if(h[d].value.match(r())){var b=p(h[d].value),g=M();g.prototype.type=w?"component":"attribute";g.prototype.text=
h[d].value;g.prototype.bindText=b;g.prototype.isEvent=-1!==K.indexOf(h[d].name);g.prototype.isInput="input"===f.tagName.toLowerCase();g.prototype.isRadio=g.prototype.isInput?-1!==["radio","checkbox"].indexOf(f.type):!1;g.prototype.listener=h[d].name;g.prototype.attr=h[d].name;g.prototype.localAttr="value";g.prototype.local=h[d];g.prototype.node=f;g.prototype.binds=k;g.prototype.isEvent&&f.removeAttribute(h[d].name);for(var m=0,l=b.length;m<l;m++)if(0===b[m].indexOf(H)){var B=e(b[m]),T=new g(b[m],
B);void 0===k[B]&&(k[B]=[]);T.bindText[m]=T;T.bindMaps.push(T);T.id=k[B].length;k[B].push(T)}}z[y].childNodes&&0!==z[y].childNodes.length&&(v=u(z[y].childNodes,v))}else if(8===z[y].nodeType&&(w=z[y],f=v,d=w.textContent,d.match(C())))for(k=p(d),h=M(),h.prototype.type="node",h.prototype.text=d,h.prototype.bindText=k,h.prototype.base=k[1],h.prototype.listener="textContent",h.prototype.attr="textContent",h.prototype.localAttr="textContent",h.prototype.local=w,h.prototype.node=w.parentElement,h.prototype.binds=
f,h.prototype.replacement=void 0,w=0,d=k.length;w<d;w++)0===k[w].indexOf(H)&&(c=e(k[w]),b=new h(k[w],c),void 0===f[c]&&(f[c]=[]),b.bindText[w]=b,b.bindMaps.push(b),b.id=f[c].length,1===w&&(h.prototype.base=b,b.isBase=!0),f[c].push(b));return v}return u(n.childNodes,{})})});return u}}(W),aa=function(){return function(){function D(p){0===p.length&&(p=A);p=new u(p);for(var e=0,S=C.length;e<S;e++)if(!p._stopPropogation)C[e](p);p._preventDefault||(document.body.innerHTML="<"+p.hash+"></"+p.hash+">",r(p.hash));
return D}function u(p){this.preventDefault=function(){this._preventDefault=!0};this.stopPropogation=function(){this._stopPropogation=!0};this.hash=p;this.url=window.location.href}var A="",r=function(){},C=[];D.base=function(p){if(void 0===p)return A;A="string"===typeof p?p:A;return D};D.addHashListener=function(p){C.push(p);return D};D.removeHashListener=function(p){for(var e=0,r=C.length;e<r;e++)if(C[e].toString()===p.toString()){C.splice(e,1);break}return D};D.onChange=function(p){if(void 0===p)return r;
r="function"===typeof p?p:r;return D};D.watch=function(p){window.onhashchange=p?function(){D(window.location.hash.replace("#",""))}:null;return D};return D}}(),V=function(D,u,A,r,C){return function(p){function e(b,c,d,f,h){function n(b,c,g,d,e){for(var f=E({},b),l=0,h=Object.keys(d),m=h.length;l<m;l++)-1!==k.indexOf(h[l])?Object.defineProperty(f,h[l],G(d[h[l]],"filters"!==h[l])):d.pointers?void 0===d.pointers[h[l]]&&f.set(h[l],d[h[l]]):f.set(h[l],d[h[l]]);if(d.pointers)for(f.pointers||Object.defineProperty(f,
"pointers",G({},!1,!0)),l=0,h=Object.keys(d.pointers),m=h.length;l<m;l++)f.pointers[h[l]]=d.pointers[h[l]],f.addPointer(f.pointers[h[l]].point,f.pointers[h[l]].key,h[l]);l=0;h=Object.keys(c.prototype);for(m=h.length;l<m;l++)Object.defineProperty(f,[h[l]],G(c.prototype[h[l]],!0));c.apply(f,g);l=0;h=Object.keys(e);for(m=h.length;l<m;l++)-1!==k.indexOf(h[l])?Object.defineProperty(f,h[l],G(e[h[l]],"filters"!==h[l])):e.pointers?void 0===e.pointers[h[l]]&&f.set(h[l],e[h[l]]):f.set(h[l],e[h[l]]);if(e.pointers)for(f.pointers||
Object.defineProperty(f,"pointers",G({},!1,!0)),l=0,h=Object.keys(e.pointers),m=h.length;l<m;l++)f.pointers[h[l]]=e.pointers[h[l]],f.addPointer(f.pointers[h[l]].point,f.pointers[h[l]].key,h[l]);l=0;h=Object.keys(f.filters);for(m=h.length;l<m;l++)f.filters[h[l]]=f.filters[h[l]].bind(f);if(f.sessionStorage){if(c=sessionStorage.getItem(f.id||b))for(c=JSON.parse(c),l=0,h=Object.keys(c),m=h.length;l<m;l++)f.set(h[l],c[h[l]]);else sessionStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",
function(){sessionStorage.setItem(f.id||b,f.stringify())})}if(f.localStorage){if(c=localStorage.getItem(f.id||b))for(c=JSON.parse(c),l=0,h=Object.keys(c),m=h.length;l<m;l++)f.set(h[l],c[h[l]]);else localStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",function(){localStorage.setItem(f.id||b,f.stringify())})}f.store&&U.set(f.id||b,f);return f}function p(b,c,d){b.kb_viewmodel=d;var g=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=g;Object.keys(g).forEach(function(b){g[b].forEach(function(b){switch(b.type){case "for":b.connect(d).createloop();
break;case "component":b.connect(d).unsync();break;case "node":b.connect(d).replaceNode();break;default:b.connect(d)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onGlobalFinish&&c.wrapper.kb_viewmodel.onGlobalFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onNodeFinish&&c.wrapper.kb_viewmodel.onNodeFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function q(b){b=b.querySelectorAll("*");for(var c=0,d=b.length;c<d;c++)b[c]instanceof
HTMLUnknownElement&&e(b[c])}function r(b,d){t=new z(d,!0);t.wrapper.innerHTML=t.template;t.wrapper.kb_mapper=t.wrapper;Object.defineProperty(t.wrapper,"__kbcomponenttree",G(d.kb_mapper?d.kb_mapper.__kbcomponenttree.slice():[]));d.parentElement.stopChange().replaceChild(t.fragment,d);c.unshift(t.wrapper);p(t.wrapper,t,n(b,N[b],c,v,w));-1===t.wrapper.__kbcomponenttree.indexOf(b)||t.wrapper.kb_viewmodel.multiple?(t.wrapper.__kbcomponenttree.push(b),t.wrapper.className+=" "+t.wrapper.kb_viewmodel.local,
t.wrapper.className+=" "+t.wrapper.kb_viewmodel.id,t.wrapper.className+=t.wrapper.kb_viewmodel.loopid?" "+t.wrapper.kb_viewmodel.loopid:"",t.wrapper.kb_viewmodel.subscribeDeep("*",A).callAllSubscribers(),t.wrapper.kb_viewmodel.kbnode=t.wrapper,t.wrapper.addChildAttrListener("html",function(b){if(!b.stopChange){if(-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&(b.arguments[0]instanceof HTMLUnknownElement||b.arguments[0]instanceof HTMLScriptElement)||-1!==["innerHTML",
"textContent"].indexOf(b.attr)&&(b.child?b.child.__kbhtmllistener:b.target.__kbhtmllistener))return!0;b.preventDefault();b.stopPropagation()}}),t.wrapper.addChildAttrUpdateListener("html",function(b){-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&b.arguments[0]instanceof HTMLUnknownElement&&e(b.arguments[0])}),q(t.wrapper)):(console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
b),console.error("Recursive Component %o on %o",t.wrapper,t.wrapper.parentElement))}var u=b.tagName.toLowerCase(),t;h=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")});var v=Q(y,{}),w={};void 0===c&&(c=[]);d&&Q(d,v);Object.defineProperty(v,"local",G(v.local||"local_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"id",G(v.id||"id_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"filters",G(v.filters||
{},!1,!1,!0));"function"!==typeof v.onFinish&&(v.onFinish=function(){});Object.defineProperty(v,"onGlobalFinish",G(v.onFinish,!0,!1,!0));v.listen=O;Object.defineProperty(v,"listen",G(v.listen,!0,!1,!0));v.unlisten=L;Object.defineProperty(v,"unlisten",G(v.unlisten,!0,!1,!0));v.alert=P;Object.defineProperty(v,"alert",G(v.alert,!0,!1,!0));Object.defineProperty(v,"sessionStorage",G(!1,!0,!1,!0));Object.defineProperty(v,"localStorage",G(!1,!0,!1,!0));Object.defineProperty(v,"store",G(!1,!0,!1,!0));Object.defineProperty(v,
"multiple",G(!1,!0,!1,!0));f&&Q(f,w);w.innerHTML=Array.prototype.slice.call(b.childNodes);d=0;for(f=b.attributes.length;d<f;d++)w[b.attributes[d].name]=b.attributes[d].value;d=0;for(f=h.length;d<f;d++)b[h[d]]&&(w[h[d]]=b[h[d]]);b.k_post&&Q(b.k_post,w);e.isRegistered(u)||b.kb_isLoading?e.isRegistered(u)&&r(u,b):(e.loadWaitList(u,function(c,d){r(u,b)}),e.loadWaitList(u).loading||(e.loadWaitList(u).loading=!0,K(u)))}function A(b){var c=this.__kbref.local,d=this.__kbref.id,e=this.__kbref.loopid,h=this.__kbscopeString+
(0!==this.__kbscopeString.length?".":"")+b.key;if(f[c]&&f[c][h])for(var k=0,n=f[c][h].length;k<n;k++)f[c][h][k](b);if(f[d]&&f[d][h])for(k=0,n=f[d][h].length;k<n;k++)f[d][h][k](b);if(f[e]&&f[e][h])for(k=0,n=f[e][h].length;k<n;k++)f[e][h][k](b)}function R(b){var c=b.node.tagName.toLowerCase();e.isRegistered(c)||b.node.kb_isLoading?e.isRegistered(c)&&("replaceNode"===b.event?e(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):e(b.node)):(b.node.kb_isLoading=!0,e.loadWaitList(c,function(c,d){"replaceNode"===
b.event?e(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):e(b.node)}),e.loadWaitList(c).loading||(e.loadWaitList(c).loading=!0,K(c)))}function Q(b,c){var d=Object.keys(b);c.pointers||Object.defineProperty(c,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var e=0,f=d.length;e<f;e++)if(E.prototype.isObservable(b,d[e]))c.pointers[d[e]]={key:b.__kbscopeString.split(".").pop(),point:b.__kbImmediateParent};else if(E.prototype.isMixed(b[d[e]]))c.pointers[d[e]]={key:b[d[e]].__kbscopeString.split(".").pop(),
point:b[d[e]].__kbImmediateParent};else if(E.prototype.isObject(b[d[e]])&&b[d[e]].pointer)c.pointers[d[e]]={filters:b[d[e]].filters,key:b[d[e]].key,point:b[d[e]].pointer};else if(E.prototype.isObject(b[d[e]])){void 0===c[d[e]]&&(c[d[e]]={});for(var h=0,k=Object.keys(b[d[e]]);h<f;h++)c[d[e]][k[h]]=b[d[e]][k[h]]}else if(E.prototype.isArray(b[d[e]]))for(h=0;h<f;h++)c[d[e]][h]=b[d[e]][h];else c[d[e]]=b[d[e]];return c}function G(b,c,d,e){return{value:b,writable:!!c,enumerable:!!e,configurable:!!d}}function L(b,
c,d){if(2===arguments.length)if(d=c.bind(this),c=b,w[c])for(var e=0,h=w[c].length;e<h;e++)w[c][e].toString()===d.toString()&&w[c].splice(e,1);else console.error("no listeners exists by key %o",c);else if(d=d.bind(this),f[b]&&f[b][c])for(e=0,h=f[b][c].length;e<h;e++)f[b][c].toString()===d.toString()&&f[b][c].splice(e,1);return this}function O(b,c,d){if(2===arguments.length)d=c.bind(this),c=b,w[c]||(w[c]=[]),w[c].push(d);else if(d=d.bind(this),f[b]||(f[b]={}),f[b][c]||(f[b][c]=[]),f[b][c].push(d),document.querySelector("."+
b)){var e=f[b][c],h=document.querySelector("."+b).kb_mapper.kb_viewmodel,k=h.getLayer(c),n=c.split(".").pop(),p=k[n];e[e.length-1]({key:n,value:p,oldValue:p,local:k,kbref:h,onChange:!1,initial:!0})}return this}function P(b,c){if(w[b])for(var d=0,e=w[b].length;d<e;d++)w[b][d](c);return this}function M(){if(!document.querySelector('meta[name="viewport"]')){var b=document.createElement("meta");b.name="viewport";b.content="width=device-width, initial-scale=1.0";document.head.stopChange().appendChild(b)}e.device||
(e.device={});e.device.type=e.detectDevice();e.device.orientation=e.detectOrientation();e.device.browser=e.detectBrowser();e.device.screenSize=e.detectScreenSize();e.device.orientationSize=e.detectScreenOrientation();e.device.keyboard="desktop"!==e.device.type?window.innerHeight<screen.height-.4*screen.height:!1;document.body.className=e.device.type+" "+e.device.orientation+(e.device.keyboard?" keyboard":"")+" "+e.device.browser+" "+e.device.screenSize+" "+e.device.orientationSize}function H(b,c){var d=
document.createElement("script");d.src=b;d.onerror=function(){c(null,!0)};d.onload=function(){c(y)};document.head.stopChange().appendChild(d)}function F(b){H((void 0!==y.prefix?y.prefix:"")+"/node_modules/konnekt/config/config.js",b)}function I(b){H((void 0!==y.prefix?y.prefix:"")+"/bower_components/konnekt/config/config.js",b)}function n(b){H((void 0!==y.prefix?y.prefix:"")+"/config/config.js",b)}function J(){for(var b=0,c=t.length;b<c;b++)t[b]()}window.K_Components||(window.K_Components={});var K=
u().onLoad(function(b,c){var d="<style>"+unescape(c.prototype.k_css)+"</style>"+unescape(c.prototype.k_html);e.register(b,c,d,c.prototype.cms);q?(e.loadWaitList(b).forEach(function(d){d(b,c)}),e.loadWaitList(b,"clear")):t.push(function(){e.loadWaitList(b).forEach(function(d){d(b,c)});e.loadWaitList(b,"clear")})}),E=D(),y=p||{},q=!1,t=[],z=r().addEventListener("loopitem",R).addEventListener("replaceNode",R),v=C().base(void 0!==y.base?y.base:"default").watch(!0).onChange(function(b){e(document.querySelector(b))}),
U=E({},"Model"),N={},w={},f={},d=function(){return window.location.search.replace("?","").split("&").filter(function(b){return 0!==b.length}).reduce(function(b,c){b[c.split("=")[0]]=c.split("=")[1];return b},{})}(),k="id filters class sessionStorage localStorage store component multiple".split(" "),h={},c;e.detectDevice=function(){return navigator.userAgent.toLowerCase().match(/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|[^a-z]rim[^a-z]|sonyericsson|nokia|[^a-z]mib[^a-z])/)?
"mobile":navigator.userAgent.toLowerCase().match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/)?"tablet":"desktop"};e.detectBrowser=function(){var b=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),c="undefined"!==typeof InstallTrigger,d=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e=!!document.documentMode,f=
!e&&!!window.StyleMedia,h=!!window.chrome&&!!window.chrome.webstore;return b?"opera":c?"firefox":d?"safari":h?"chrome":e?"ie":f?"edge":"unknown"};e.detectOrientation=function(){return screen.width>screen.height?"landscape":screen.height>screen.width?"portrait":"square"};e.detectScreenOrientation=function(){return window.innerWidth>window.innerHeight?"landscape-size":window.innerHeight>window.innerWidth?"portrait-size":"square-size"};e.detectScreenSize=function(){return 1280>("landscape"===this.detectOrientation()?
window.innerWidth:window.innerHeight)?750>("landscape"===this.detectOrientation()?window.innerWidth:window.innerHeight)?"mobile-size":"tablet-size":"desktop-size"};e.config=function(b){function c(b,d){for(var e=0,f=Object.keys(b),h=f.length;e<h;e++)"object"===typeof b[f[e]]?(void 0===d[f[e]]&&(d[f[e]]={}),c(b[f[e]],d[f[e]])):"object"!==d[f[e]]&&(d[f[e]]=b[f[e]])}if(void 0===b)return y;c(b,y);v.base(void 0!==y.base?y.base:"default");return e};window.addEventListener("resize",M);document.body?M():document.addEventListener("DOMContentLoaded",
function(){M()});e.register=function(b,c,d,f){z.register(b,d);N[b]=c;return e};e.isRegistered=function(b){return void 0!==N[b]&&z.isRegistered(b)};e.registered=function(){return Object.keys(N)};e.loadWaitList=function(b,c){if("undefined"===typeof c&&b)return h[b];if(b){if(void 0===h[b]||"clear"===c){var d=void 0===h[b]?!1:!!h[b].loading;h[b]=[];h[b].loading=d}"function"===typeof c&&h[b].push(c)}return e};e.localRouting=function(b){b&&"dev"!==d.env?(c=Node.prototype.appendChild,Node.prototype.appendChild=
function(b){if("script"===b.nodeName.toLowerCase()){b.src=b.src.substring(0,-1!==b.src.indexOf("?")?b.src.indexOf("?"):b.src.length);var e=b.src.match(/(.*?component\/)/);e&&(d.env||(d.env="prod"),"dev"===d.env&&(d.env="qa"),e=b.src.replace(e[0],"").replace(/[\/\s]/g,""),b.src=(void 0!==y.prefix?y.prefix:"")+"/components/"+e+"/build/"+d.env+"/"+e+(d.debug&&"prod"!==d.env?"":".min")+".js",arguments[0]=b)}return c.apply(this,arguments)}):c&&(Node.prototype.appendChild=c,c=null);return e};e.hashRouting=
function(b){b&&(document.body?q?v(window.location.hash.replace("#","")):t.push(function(){v(window.location.hash.replace("#",""))}):document.addEventListener("DOMContentLoaded",function(){q?v(window.location.hash.replace("#","")):t.push(function(){v(window.location.hash.replace("#",""))})}));return this};e.addHashRouter=function(b){v.addHashListener(b);return e};e.removeHashRouter=function(b){v.removeHashListener(b);return e};E.prototype._parse||(E.prototype._parse=E.prototype.parse);E.prototype.parse=
function(){if(this.__kbref.kbnode){var b=this.__kbref.kbnode.kb_mapper.kb_maps;this._parse.apply(this,arguments);this.unsubscribeDeep("*",A);this.subscribeDeep("*",A).callAllSubscribers();Object.keys(b).forEach(function(c){b[c].forEach(function(b){b.reset()})})}else return this._parse.apply(this,arguments)};(function(){F(function(b,c){c?I(function(b,c){c&&console.error("The Konnekt local config was not found, this issue happens when You do not have Konnekt installed via the standard node_modules or bower_components module directories");
n(function(b,c){q=!0;J()})}):n(function(b,c){q=!0;J()})})})();return window.Konnekt=e}}(X,Y,W,Z,aa);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return V}):"undefined"!==typeof module&&(module.exports=V);return V}();
