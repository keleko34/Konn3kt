var Konnekt=function(){var X=function(){return function(E,u,C,r){function D(b,e,h,l){b=void 0===b?{}:b;var m={},y=window.Proxy?new Proxy(m,{set:M,deleteProperty:P}):m,g=Object.keys(b,"all");Object.defineProperties(m,{__kbname:c("string"===typeof e?e:"default",!0,!0),__kbref:c(h?h.__kbref||h:y,!0,!0),__kbscopeString:c(l||"",!0,!0),__kbImmediateParent:c(h||null,!0,!0),__kbsubscribers:c({}),__kbparentsubscribers:c({}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),
__kbcreatelisteners:c([]),__kbdeletelisteners:c([]),__kbparentcreatelisteners:c([]),__kbparentdeletelisteners:c([]),__kbmethodlisteners:c([]),__kbmethodupdatelisteners:c([]),__kbpointers:c({}),__kbevents:c(U),__kbsetindex:c(0,!0),__kbproto:c({}),length:c(0,!0),__kbnonproxy:c(m,!1,!0),__kbproxy:c(y,!1,!0),_stopChange:c(!1,!0)});m.__proto__=D.prototype;e=0;for(h=g.length;e<h;e++)y.set(g[e],b[g[e]]);m.__kbevents.addlistener=[];m.__kbevents.removelistener=[];m.addActionListener("addlistener",function(b){if("string"===
typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var h=b.local.__kbpointers[b.arguments[0]],e=h.point.getLayer(h.keys);if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==e[h.keys.split(".").pop()])e[b.arguments[2]](h.keys.split(".").pop(),b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var h=b.local.__kbpointers[b.arguments[0]],e=h.point.getLayer(h.keys);
if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==e[localPointerkeys.split(".").pop()])e[b.arguments[2]](h.keys.split(".").pop(),b.arguments[1])}});return y}function q(b,e,h,l,m,y,g,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=e;this.arguments=y;this.type=this.event=h;this.listener=g;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=
b.__kbImmediateParent;this.value=l;this.oldValue=m;this.stopChange=d}function c(b,e,h,l){return{value:b,writable:!!e,enumerable:!!l,configurable:!!h}}function T(b,e,h){return{get:function(){return b.call(this)},set:function(h){e&&(b=h)},enumerable:!1,configurable:!!h}}function S(b,e){var h=e,l=e;return{get:function(){return h},set:function(e){var y=new q(this,b,"set",e,h,arguments,"__kblisteners",this._stopChange);!0!==g(y)&&(l=h,h=e,y.stopChange||(y.listener="__kbupdatelisteners",y.type="postset",
g(y)),this.callSubscribers(this.__kbref,this,b,h,l,this._stopChange));this._stopChange=!1},configurable:!0,enumerable:!0}}function R(){var b=Array.prototype.slice.call(arguments),e=b.shift();return{get:function(){return b.reduce(function(b,e){return b[e]},e)},set:function(h){var l=b.slice(0,b.length-1).reduce(function(b,h){return b[h]},e);(this._stopChange?l.stopChange():l)[b[b.length-1]]=h;this._stopChange=!1},enumerable:!0,configurable:!0}}function H(b,e){for(var h=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],l=[],m,y=0,g=h.length;y<g;y++)if(m=b[h[y].listener],G.call(m))for(var l=Object.keys(m),d=0,f=l.length;d<f;d++)for(var k=0,c=m[l[d]].length;k<c;k++)e[h[y].method](l[d],m[l[d]][k]);else for(d=0,f=m.length;d<f;d++)e[h[y].method](m[d])}function M(b,e,h){var l=K(b,
e);if(l||"length"===e||"__kbsetindex"===e)if(l&&"object"===typeof h&&!n(h))b.set(e,h);else{if("length"===e)if(h>b.length&&void 0!==b[h-1])b.length=h;else{if(h<b.length){e=h;for(l=b.length;e<l;e++)b[e]&&delete b[e];b.length=h}}else b[e]=h;return!0}else b.set(e,h)}function P(b,e){b.del(e);return!0}function Q(b,e,h){var l=n(h),m=G(h),y=J(h);if(l&&h.__kbname!==b.__kbname)"default"===h.__kbname?b.merge(h,e):b.__kbpointers[e]||b.addPointer(h,e);else{var l=new q(this,e,"create",h,void 0,[],"__kbcreatelisteners",
this._stopChange),d=g(l),f=parseInt(e,10);if(!0!==d)if((m||y)&&0!==Object.keys(h,"all").length)for(Q.call(this,b,e,{}),m=0,y=Object.keys(h,"all"),l=y.length;m<l;m++)Q.call(this[e],b[e],y[m],h[y[m]]);else{if(m||y)h=new D(h,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+e),H(b,h);Object.defineProperty(b,e,S(e,h));!isNaN(f)&&b.length<=f&&(b.length=f+1);l.listener="__kbupdatelisteners";l.type="postcreate";g(l)}}}function N(b,e,h,l){var m=n(h),y=G(h),d=J(h);if(m&&h.__kbname!==b.__kbname)"default"===
h.__kbname?b.merge(h,e):b.__kbpointers[e]||b.addPointer(h,e);else if(void 0===b[e])-1===O.indexOf(e)?Q.call(this,b,e,h):(l?b.stopChange():b)[e]=h;else if(y||d)for(m=0,y=Object.keys(h,"all"),d=y.length;m<d;m++)N.call(this[e],b[e],y[m],h[y[m]],l);else(l?b.stopChange():b)[e]=h}function I(b){return k.call(b).replace(/(\[object\s|\])/g,"").toLowerCase()}function G(b){return"object"===I(void 0!==b?b:this)}function J(b){return"array"===I(void 0!==b?b:this)}function n(b){return"mixed"===I(void 0!==b?b:this)}
function K(b,e){var h=p(b,e);return h?void 0===h.value:!1}function L(b,e){function h(b){var h=parseFloat(b,10),e="true"===b,l=b.indexOf('"'),m=b.lastIndexOf('"');if(isNaN(h)||h.toString().length!==b.length){if(e||"false"===b)return e;b=0===l&&0!==m?b.substring(1,b.length-1):b.substring(1,b.length)}else return h;return b}var l=this.__kbnonproxy;split=b.split(/({"|,"(?=(?:[^"]|"[^"]*")*$)|\[(?=(?:[^"]|"[^"]*")*$)|\](?=(?:[^"]|"[^"]*")*$)|":|"}|{(?=(?:[^"]|"[^"]*")*$)|,(?=(?:[^"]|"[^"]*")*$)|}(?=(?:[^"]|"[^"]*")*$))/).filter(Boolean);
UKeys=[];isValue=isKey=!1;r="";for(var m=1,y=split.length,d,g,f,k;m<y;m++)d=split[m],g=split[m-1],f=split[m+1],k=UKeys[UKeys.length-1],'":'===g&&'{"'===d||'":'===g&&"["===d?(r+=(0!==r.length?".":"")+k,l[k]||l.set(k,e?e(k,{},r,l):{}),l=l[k],UKeys.pop()):"["===g||","===g&&0!==l.length?"{"===d||'{"'===d?(r+=(0!==r.length?".":"")+l.__kbsetindex,"object"!==typeof l[l.__kbsetindex]&&l.set(l.__kbsetindex,e?e(l.length,{},r,l):{}),l.__kbsetindex+=1,l=l[l.__kbsetindex-1]):(l.set(l.__kbsetindex,e?e(l.length,
h(d),r,l):h(d)),l.__kbsetindex+=1):'":'===g?(l.set(k,e?e(k,h(d),r,l):h(d)),UKeys.pop()):'{"'===g||","===g&&'":'===f?UKeys[UKeys.length]=d.replace(/\"/g,""):"}"!==g&&"]"!==g||void 0===d||(r=-1!==r.indexOf(".")?r.substring(0,r.lastIndexOf(".")-1):"",l=l.__kbImmediateParent);return this}function F(b,e){"number"===typeof b&&(b=b.toString());var h=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var l=new q(this,b,"set",e,this[b],arguments,
"__kbmethodlisteners");!0!==g(l)&&(N.call(this,h,b,e,this._stopChange),this.stopChange=void 0,l.type="postset",l.listener="__kbmethodupdatelisteners",g(l));return this}function A(b){return b.split(".")}function v(b,e){return function(h,l){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var m=this[e],d=new q(this,e,"addlistener",m,void 0,arguments,"");"string"===typeof h&&1!==A(h).length&&(m=A(h),h=m.pop(),m=m.join("."),d.local=this.getLayer(m),m=d.local[e],d.value=m);!0!==g(d)&&
(G.call(m)?(void 0===m[h]&&(m[h]=[]),m[h].push(l),d.type="postaddlistener",g(d)):J.call(m)&&"function"===typeof h&&(m.push(h),d.type="postaddlistener",g(d)));return this}}function t(b,e){return function(h,l){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var m=this[e],d=new q(this,e,"removelistener",m,void 0,arguments,"");"string"===typeof h&&1!==A(h).length&&(m=A(h),m.pop(),m.join("."),d.local=this.getLayer(m),m=d.local[e],d.value=m,h=A(h).pop());if(!0!==g(d))if(G.call(m)){if(void 0!==
m[h])for(var f=0,k=m[h].length;f<k;f++)if(m[h][f].toString()===l.toString()){m[h].splice(f,1);d.type="postremovelistener";g(d);break}}else if(J.call(m)&&"function"===typeof h)for(f=0,k=m.length;f<k;f++)if(m[f].toString()===h.toString()){m.splice(f,1);d.type="postremovelistener";g(d);break}return this}}function B(b,e){function h(b,e,d){var g=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),f=this,k=b;"string"===typeof b&&1!==A(b).length&&(f=A(b),k=f.pop(),f=f.join("."),
f=this.getLayer(f),void 0===f[d][k]&&(f[d][k]=[]),f[d][k].push(e));G.call(f[d])?(void 0===f[d][k]&&(f[d][k]=[]),f[d][k].push(e),f=f.__kbpointers[k],f=f.point.getLayer(f.keys),void 0!==f[k]&&(void 0===f[d][k]&&(f[d][k]=[]),f[d][k].push(_func))):f[d].push(e);k=0;for(f=g.length;k<f;k++)h.call(this[g[k]],b,e,d)}return function(l,m){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var d=new q(this,e,"addchildlistener",void 0,void 0,arguments,"");!0!==g(d)&&(h.call(this.__kbnonproxy,l,
m,e),d.type="postaddchildlistener",g(d));return this}}function w(b,e){function h(b,e,d){var g=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),f=this,k=b;if("string"===typeof b&&1!==A(b).length){var c=A(b),k=c.pop();c.join(".");f=this.getLayer(c);if(void 0!==f[d][b])for(var c=0,p=f[d][b].length;c<p;c++)if(f[d][b][c].toString()===e.toString()){f[d][b].splice(c,1);break}}if(G.call(f[d])){if(void 0!==f[d][k]){c=0;for(p=f[d][k].length;c<p;c++)if(f[d][k][c].toString()===e.toString()){f[d][k].splice(c,
1);break}if(-1!==f.__kbpointers.indexOf(k)&&(c=f.__kbpointers[k],f=c.point.getLayer(c.keys),void 0!==f[d][k]))for(c=0,p=f[d][k].length;c<p;c++)if(f[d][k][c].toString()===e.toString()){f[d][k].splice(c,1);break}}}else for(c=0,p=f[d].length;c<p;c++)if(f[d][c].toString()===e.toString()){f[d].splice(c,1);break}c=0;for(p=g.length;c<p;c++)h.call(this[g[c]],b,e,d)}return function(l,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var f=new q(this,e,"removechildlistener",void 0,void 0,
arguments,"");!0!==g(f)&&(h.call(this.__kbnonproxy,l,d,e),f.type="postremovechildlistener",g(f));return this}}var U={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],
postremovechildlistener:[]},O=["__proto__","_stopChange"],z=function(b,e){if(!e._stopPropogration&&b)for(var h=0,l=b.length;h!==l&&(b[h](e),!e._stopPropogration);h++);},g=function(b){if(b.listener){var e=b.local[b.listener],h=b.local[b.listener.replace("__kb","__kbparent")];G.call(e)?(z(e[b.key],b),z(e["*"],b)):z(e,b);G.call(h)?(z(h[b.key],b),z(h["*"],b)):z(h,b)}z(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault},d=Array.prototype.sort,f=Array.prototype.slice,k,p=Object.getOwnPropertyDescriptor;
Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof D?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,e){return Object._keys(b).filter(function(b){return e&&"object"!==e&&"o"!==e?"all"===e?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};k={}.toString;Object.defineProperties(D.prototype,{"typeof":c(I,!1,!0),sizeof:c(function(b){function e(b){for(var d=
Object.keys(b,"all"),g=0,f=void 0,k=0,c=d.length;k<c;k++)f=b[d[k]],"object"===typeof f&&void 0!==f&&null!==f?-1===h.indexOf(f)&&(h.push(f),g+=e(f)):"string"===typeof f?g+=2*f.length:"number"===typeof f?g+=8:"boolean"===typeof f?g+=4:"function"===typeof f&&(g+=2*f.toString().length),g+=2*d[k].length;return g}var h=[];return e(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:c(G,!1,!0),isArray:c(J,!1,!0),isMixed:c(n,!1,!0),isObservable:c(K,!1,!0),stringify:c(function(b){var e=[];return JSON.stringify(b||
this,function(b,l){if(J(l)||G(l)){if(-1!==e.indexOf(l))return;e.push(l)}return l})},!1,!0),getKeys:c(function(b,e){e="string"===typeof b?b:e?e:"object";return Object.keys("string"===typeof b||void 0===b?this:b,e)},!1,!0),getIndexes:c(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var e=[],h=0,l=b.length;h<l;h++)void 0!==b[h]&&(e[e.length]=h);return e},!1,!0),keyCount:T(function(){return this.getKeys("object").length},!1,!0),indexCount:T(function(){return this.length},!1,!0),count:T(function(){return this.keyCount+
this.indexCount},!1,!0),concat:c(Array.prototype.concat),every:c(Array.prototype.every),filter:c(Array.prototype.filter),find:c(Array.prototype.find),findIndex:c(Array.prototype.findIndex),forEach:c(Array.prototype.forEach),includes:c(Array.prototype.includes),indexOf:c(Array.prototype.indexOf),join:c(Array.prototype.join),lastIndexOf:c(Array.prototype.lastIndexOf),map:c(Array.prototype.map),reduce:c(Array.prototype.reduce),reduceRight:c(Array.prototype.reduceRight),slice:c(Array.prototype.slice),
some:c(Array.prototype.some),entries:c(Array.prototype.entries),toLocaleString:c(Array.prototype.toLocaleString),parse:c(L,!0),parseReplace:c(function(b,e){return L.call(e||this,b)},!0),add:c(function(b,e){F.call(this,b,e);return this}),set:c(F),get:c(function(b){"number"===typeof b&&(b=b.toString());var e=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(e)return e[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),
del:c(function(b,e){var h="number"===typeof b||!isNaN(parseInt(b,10));h&&(b=b.toString());var l=-1!==b.indexOf(".")?this.getLayer(b):this,d=b.split(".").pop();if(l&&void 0!==l[d])if(h&&l.length>parseInt(b,10)&&!e)l=l.__kbnonproxy,l.splice(d,1);else{var f=new q(l,b,"delete",l[d],void 0,[],"__kbmethodlisteners"),k=g(f),p=new q(l,b,"delete",l[d],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==g(p)&&!0!==k&&(l=l.__kbnonproxy,Object.defineProperty(l,d,c(void 0,!0,!0,!1)),delete l[d],h&&l.length>
parseInt(b,10)&&e&&--l.length,f.type="postdelete",f.listener="__kbmethodupdatelisteners",g(f),p.listener="__kbupdatelisteners",p.type="postdelete",p.oldValue=p.value,p.value=void 0,g(p))}return this}),exists:c(function(b){function e(b,l){return 1!==b.length?void 0!==l[b[0]]?e(b.slice(1,b.length),l[b[0]]):!1:void 0!==l[b[0]]}return e(b.split("."),this.__kbnonproxy)}),addPrototype:c(function(b,e){var h=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());
void 0===h[b]?Object.defineProperty(h.__proto__,b,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,h);return this}),addPointer:c(function(){var b=Array.prototype.slice.call(arguments),e=b.shift(),h=e.exists(b.join("."))?b[b.length-1]:b.pop();e instanceof D||(e=new D(e,e.__kbname));var l=new q(this,h,"create",e[h],void 0,[],"__kbcreatelisteners",this._stopChange),d=this.__kbnonproxy;l.root=e.__kbref.__kbproxy;if(!0!==g(l)){Object.defineProperty(d,
h,R.apply(d,[e].concat(b)));d.__kbpointers[h]={keys:b.join("."),point:e};var b=d,e=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],d=[],f;if(b[h]&&b[h].__kbImmediateParent)for(var k=0,c=e.length;k<c;k++){f=b[e[k].listener];for(var d=Object.keys(f),p=0,v=d.length;p<v;p++)if(h===d[k])for(var t=0,B=f[d[k]].length;t<B;t++)void 0===b[h].__kbImmediateParent[e[k].listener][h]&&(b[h].__kbImmediateParent[e[k].listener][h]=[]),b[h].__kbImmediateParent[e[k].listener][h].push(f[d[k]][t])}H(b,
b[h]);l.listener="__kbupdatelisteners";l.type="postcreate";g(l)}return this}),move:c(function(b,e){this.__kbnonproxy.set(e,b[e]);n(b)?b.del(e):(b[e]=null,delete b[e]);return this}),copy:c(function(b,e){var h=this.__kbnonproxy;n(b)?"default"===b.__kbname?h.merge(b[e],e):h.addPointer(b,e):h.set(e,b[e]);return this}),merge:c(function(b,e){function h(b,e){for(var f=n(b)?b.keys("object"):Object.keys(b),g,m=0,k=f.length;m<k;m++)g=b[f[m]],"object"===typeof g&&-1===d.indexOf(g)&&"undefined"!==e[f[m]]?h(g,
e):void 0===e[f[m]]&&e.set(f[m],"object"===typeof g?{}:g)}var d=[],f=this.__kbnonproxy;e&&void 0===f[e]&&f.set(e,{});h(b,e?f[e]:f);return this}),replace:c(function(b,e){function h(b,e){var f=n(b)?b.keys("object"):Object.keys(b),g;g=b[f[x]];"object"===typeof g&&-1===d.indexOf(g)&&"undefined"!==e[f[x]]?h(g,e):e.set(f[x],"object"===typeof g?{}:g)}var d=[],f=this.__kbnonproxy;e&&void 0===f[e]&&f.set(e,{});h(b,e?f[e]:f);return this}),copyWithin:c(function(b,e,h){e=e||0;h=h||0;var d=new q(this,b,"copyWithin",
this[b],void 0,arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==g(d)&&b<f.length){b=0>b?f.length-1:b;e=e<f.length?e:f.length-1;h=h<f.length?h:f.length-1;e=0>e?f.length-1:e;h=0>e?f.length-1:h;for(var k=e;k<=h;k++)f.set(b+(k-e),f[k]);d.type="postcopyWithin";d.listener="__kbmethodupdatelisteners";g(d)}return this}),fill:c(function(b,e,h){e=void 0!==e?Math.max(0,e):0;h=void 0!==h&&h<=this.length?Math.min(this.length,Math.max(0,h)):this.length;var d=new q(this,_start,"fill",this[_start],void 0,
arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==g(d)){for(var k=a.key;k<h;k++)f[k]=b;d.type="postfill";d.listener="__kbmethodupdatelisteners";g(d)}return this}),pop:c(function(){var b=new q(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(b)){var h=e[e.length-1];e.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";g(b);return h}return null}),push:c(function(b){var e=new q(this,this.length,"push",
b,void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;!0!==g(e)&&(h.set(h.length,b),e.type="postpush",e.listener="__kbmethodupdatelisteners",g(e));return this.length}),reverse:c(function(){var b=new q(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(b)){for(var h=null,d=null,f=e.length,h=0;h<f/2;h+=1){var d=f-1-h,k=e[h];e[h]=e[d];e[d]=k}b.type="postreverse";b.listener="__kbmethodupdatelisteners";g(b)}return this}),shift:c(function(){var b=
new q(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(b)){for(var h=a.key,d=this.length-1;h<d;h++)e[h]=e[h+1];e.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";g(b)}return null}),sort:c(function(){var b=new q(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(b)){var h=f.call(e);d.apply(h,arguments);for(var l=0,k=h.length;l<k;l++)e[l]=h[l];b.type="postsort";b.listener="__kbmethodupdatelisteners";
g(b)}return this}),splice:c(function(b,e,h){b="string"===typeof b?parseInt(b,10):b;var d=new q(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==g(d)){var k=[],c=Array.prototype.slice.call(arguments,2),p=c.length-2,v=0;if(0!==e&&void 0!==f[b-1+e])for(var t=0,B=e;t<B;t++){k.push(f[b+t]);for(var n=b+t,w=this.length-1;n<w;n++)f[n]=f[n+1];f.del(f.length-1,!0)}if(0!==p)for(t=0,B=p;t<B;t++){v=b+Math.min(1,t);n=f.length;for(w=v;n>w;n--)f.set(n,f[n-1]);f.set(v,c[t])}d.type=
"postsplice";d.listener="__kbmethodupdatelisteners";g(d);return k}return[]}),unshift:c(function(){var b=new q(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(b)){for(var h=Array.prototype.slice.call(arguments),d=e.length-1+h.length,f=h.length;-1!==d;d--)d<f?e.set(d,h[d]):e.set(d,e[d-h.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";g(b)}return this.length}),getLayer:c(function(b){function e(b){var d=b[0];return void 0===this[d]&&
0!==b.length-1?null:n(this[d])?0!==b.length-1?(b.shift(),e.call(this[d],b)):this[d]:this}b=A(b);return e.call(this,b)}),setLayer:c(function(b){function e(b){var d=b[0];void 0===this[d]&&0!==b.length-1&&(this[d]=D({},this.__kbname,this,this.__kbscopeString+"."+d));return n(this[d])?0!==b.length-1?(b.shift(),e.call(this[d],b)):this[d]:this}b=A(b);return e.call(this,b)}),ignoreCreate:c(function(b){-1===O.indexOf(b)&&O.push(b);return this}),addActionListener:c(function(b,e){var h=this.__kbnonproxy;void 0!==
h.__kbref.__kbevents[b]&&h.__kbref.__kbevents[b].push(e);return this}),removeActionListener:c(function(b,e){var h=this.__kbnonproxy;if(void 0!==h.__kbref.__kbevents[b])for(var d=0,f=h.__kbref.__kbevents[b];d<f;d++)if(h.__kbref.__kbevents[b][d].toString()===e.toString()){h.__kbref.__kbevents[b].splice(d,1);break}return this}),subscribe:c(function(b,e){var h=b.split("."),d=h.pop(),h=0!==h.length?this.__kbnonproxy.getLayer(h.join(".")):this.__kbnonproxy;void 0===h.__kbsubscribers[d]&&(h.__kbsubscribers[d]=
[]);h.__kbsubscribers[d].push(e);return this}),unsubscribe:c(function(b,e){var h=b.split("."),d=h.pop(),h=0!==h.length?this.__kbnonproxy.getLayer(h.join(".")):this.__kbnonproxy;if(void 0!==h.__kbsubscribers[d])for(var f=0,g=h.__kbsubscribers[d].length;f<g;f++)if(h.__kbsubscribers[d][f].toString()===e.toString()){h.__kbsubscribers[d].splice(f,1);break}return this}),subscribeDeep:c(function(b,e){function h(b,d){var f=Object.keys(b,"all").filter(function(e){return n.call(b[e])}.bind(b));if(void 0!==
b[d]||"*"===d)void 0===b.__kbparentsubscribers[d]&&(b.__kbparentsubscribers[d]=[]),b.__kbparentsubscribers[d].push(e);for(var g=0,l=f.length;g<l;g++)h(b[f[g]],d)}var d=-1!==b.indexOf("*"),f=b.split(".");f.slice(0,f.indexOf("*"));var g=-1!==f.indexOf("*")?f.slice(f.indexOf("*"),f.length):[],k=1===g.length,c=f.pop(),f=0!==f.length?this.__kbnonproxy.getLayer(f.join(".")):this.__kbnonproxy;d?k?h(f,"*"):(g.shift(),f.subscribeDeep(g.join("."),e)):h(f,c);return this}),unsubscribeDeep:c(function(b,e){function h(b,
d){var f=Object.keys(b,"all").filter(function(e){return n.call(b[e])&&!(b[e]instanceof HTMLElement)}.bind(b));if((void 0!==b[d]||"*"===d)&&void 0!==b.__kbparentsubscribers[d])for(var g=0,l=b.__kbparentsubscribers[d].length;g<l;g++)b.__kbparentsubscribers[d][g].toString()===e.toString()&&b.__kbparentsubscribers[d].splice(g,1);g=0;for(l=f.length;g<l;g++)h(b[f[g]],d)}var d=-1!==b.indexOf("*"),f=b.split(".");f.slice(0,f.indexOf("*"));var g=-1!==f.indexOf("*")?f.slice(f.indexOf("*"),f.length):[],k=1===
g.length,c=f.pop(),f=0!==f.length?this.__kbnonproxy.getLayer(f.join(".")):this.__kbnonproxy;d?k?h(f,"*"):(g.shift(),f.unsubscribeDeep(g.join("."),e)):h(f,c);return this}),callSubscribers:c(function(b,e,h,d,f,g){var k=this.__kbnonproxy;if(void 0!==k.__kbsubscribers[h])for(var c=0,p=k.__kbsubscribers[h].length;c<p;c++)k.__kbsubscribers[h][c].call(this,{key:h,value:d,oldValue:f,stopChange:g,local:e,kbref:b});if(void 0!==k.__kbparentsubscribers[h])for(c=0,p=k.__kbparentsubscribers[h].length;c<p;c++)k.__kbparentsubscribers[h][c].call(this,
{key:h,value:d,oldValue:f,stopChange:g,local:e,kbref:b});if(void 0!==k.__kbsubscribers["*"])for(c=0,p=k.__kbsubscribers["*"].length;c<p;c++)k.__kbsubscribers["*"][c].call(this,{key:h,value:d,oldValue:f,stopChange:g,local:e,kbref:b});if(void 0!==k.__kbparentsubscribers["*"])for(c=0,p=k.__kbparentsubscribers["*"].length;c<p;c++)k.__kbparentsubscribers["*"][c].call(this,{key:h,value:d,oldValue:f,stopChange:g,local:e,kbref:b});return this}),callAllSubscribers:c(function(){function b(b,h,d){for(var f=
0,g=h.length;f<g;f++)h[f].call(b,{key:d,value:b[d],oldValue:b[d],stopChange:!1,local:b,kbref:b.__kbref,initial:!0})}(function(e){for(var h=Object.keys(e.__kbsubscribers),d=Object.keys(e.__kbparentsubscribers),f=0,g=h.length;f<g;f++)if(0!==e.__kbsubscribers[h[f]].length)if("*"===h[f])for(var k=0,c=Object.keys(e),p=c.length;k<p;k++)b(e,e.__kbsubscribers[h[f]],c[k]);else b(e,e.__kbsubscribers[h[f]],h[f]);f=0;for(g=d.length;f<g;f++)if(0!==e.__kbparentsubscribers[d[f]].length)if("*"===d[f])for(k=0,c=Object.keys(e),
p=c.length;k<p;k++)b(e,e.__kbparentsubscribers[d[f]],c[k]);else b(e,e.__kbparentsubscribers[d[f]],d[f])})(this.__kbnonproxy);return this}),stopChange:c(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(D.prototype,{addDataListener:c(v("addDataListener","__kblisteners")),removeDataListener:c(t("removeDataListener","__kblisteners")),addDataUpdateListener:c(v("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(t("removeDataUpdateListener","__kbupdatelisteners")),
addDataCreateListener:c(v("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:c(t("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:c(v("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:c(t("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:c(v("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:c(t("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:c(v("addDataMethodUpdateListener",
"__kbmethodupdatelisteners")),removeDataMethodUpdateListener:c(t("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:c(B("addChildDataListener","__kbparentlisteners")),removeChildDataListener:c(w("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:c(B("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:c(w("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:c(B("addChildDataCreateListener",
"__kbparentcreatelisteners")),removeChildDataCreateListener:c(w("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:c(B("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:c(w("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return D}}(),Y=function(){return function(){function E(r){if("object"===typeof r)for(var D=0,q=r.length;D<q;D++)K_Components[r[D]]?u(r[D],K_Components[r[D]],document.getElementById("script_"+
r[D])):E.load(r[D],"component/"+r[D]+"/"+location.search,u);else"string"===typeof r&&(K_Components[r[D]]?u(r,K_Components[r],document.getElementById("script_"+r)):E.load(r,"component/"+r+"/"+location.search,u))}var u=function(){},C=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});E.getUnknowns=function(r){var u=r.match(C);return u.map(function(q){return q.replace(/[<\/>]/g,"")}).filter(function(q,c){return document.createElement(q)instanceof HTMLUnknownElement&&-1===u.indexOf(q,c+1)&&!K_Components[q]})};
E.load=function(r,u,q){document.head.appendChild(function(c,q,u){var r=document.createElement("script");r.type="text/javascript";r.charset="utf-8";r.async=!0;r.src=q;r.id="script_"+c;r.onload=function(){u(c,K_Components[c],this)};return r}(r,u,q));return E};E.onLoad=function(r){if(void 0===r)return u;u="function"===typeof r?r:u;return E};return E}}(),W=function(){function E(){function u(g,d){var f=g.length,k;for(k=0;k<f&&(g[k](d),void 0===d._stopPropogation);k++);}function C(g,d){var f=g.length,k;
for(k=0;k<f&&(d.child=d.target,d.target=g[k].parent,g[k].func(d),void 0===d._stopPropogation);k++);}function r(g,d){for(var f=g.length;0<f;U++)if(g[U].toString()===d.toString())return!0;return!1}function D(g,d,f,k,c,b,e,h){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=f;this.oldValue=k;this.target=g;this.attr=d;this.arguments=c;this.action=b;this.child=void 0;this.type=e;this.stopChange=h}function q(){this._attrListeners=
{};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function c(g,d,f,k){var c=g.get,b=g.set,e;return function(h){e=c.call(this);f(this,d,h,e,void 0,this._stopChange)&&b.call(this,h);this._stopChange||k(this,d,h,e);this._stopChange=void 0}}function E(g,d,f,k){var c;return function(b){c=g.value;f(this,d,b,c,arguments,
this._stopChange)&&(g.value=b);this._stopChange||k(this,d,b,c,arguments);this._stopChange=void 0}}function S(g,d,f,k){var c=g.value,b;return function(){f(this,d,null,null,arguments,this._stopChange)&&(b=c.apply(this,arguments));this._stopChange||k(this,d,null,null,arguments,b);this._stopChange=void 0;return b}}function R(g,d,f,k,c){var b=c.style,e=d.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),h,l;return{get:function(){return l},set:function(g){h=l;f(c,d,g,h,void 0,this._stopChange)&&(l=
g,b.setProperty(e,g));this._stopChange||k(c,d,g,h);this._stopChange=void 0},enumerable:!0,configurable:!0}}function H(g,d,f,k){if("function"!==typeof d)return n;var c=-1!==["value","checked"].indexOf(g),b=-1!==B.indexOf(g),e;if(this.toString()!==n.toString())if(f){var h=this.querySelectorAll("*");f=h.length;for(var l,m=0;m<f;m++){l=h[m].attrListeners();if(c||"*"===g)void 0!==h[m].addInputBinding&&h[m].addInputBinding(),void 0!==h[m].addInputBoxBinding&&h[m].addInputBoxBinding();if(b)n.injectStyleProperty(h[m],
g),e=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===g){e=k?"_parentStyleUpdateListeners":"_parentStyleListeners";f=B.length;for(var y=0;y<f;y++)n.injectStyleProperty(h[m],B[y]);void 0===l[e]["*"]&&(l[e]["*"]=[]);l[e]["*"].push({parent:this,func:d})}e=k?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===l[e][g]&&(l[e][g]=[]);l[e][g].push({parent:this,func:d})}}else{l=this.attrListeners();if(b)e=k?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,
g);else{if(c||"*"===g)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===g){e=k?"_styleUpdateListeners":"_styleListeners";f=B.length;for(m=0;m<f;m++)n.injectStyleProperty(this,B[m]);void 0===l[e][g]&&(l[e][g]=[]);l[e][g].push(d)}e=k?"_attrUpdateListeners":"_attrListeners"}void 0===l[e][g]&&(l[e][g]=[]);l[e][g].push(d)}else{if(c||"*"===g)for(y=document.querySelectorAll("input, textarea"),f=y.length,m=0;m<f;m++)void 0!==y[m].addInputBinding&&
y[m].addInputBinding(),void 0!==y[m].addInputBoxBinding&&y[m].addInputBoxBinding();if(b){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));f=b.length+1;b.unshift(document.body);for(m=0;m<f;m++)n.injectStyleProperty(b[m],g);e=k?A:F}else{if("*"===g){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));f=b.length+1;c=B.length;b.unshift(document.body);for(m=0;m<f;m++)for(y=0;y<c;y++)n.injectStyleProperty(b[m],B[y]);e=k?A:F;void 0===e[g]&&(e[g]=[]);e[g].push(d)}e=k?L:K}void 0===
e[g]&&(e[g]=[]);e[g].push(d)}}function M(g,d,f,k){function c(b,h){var f=h[b],g=f.length;for(e=0;e<g;e++)f[e].toString()===d.toString()&&f.splice(e,1)}if("function"!==typeof d)return n;["value","checked"].indexOf(g);var b=-1!==B.indexOf(g),e;if(this.toString()!==n.toString())if(f){f=this.querySelectorAll("*");var h=f.length;b?(b=k?"_childStyleUpdateListeners":"_childStyleListeners",c(g,this.attrListeners()[b]),b=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===g&&(b=k?"_childStyleUpdateListeners":
"_childStyleListeners",c(g,this.attrListeners()[b])),b=k?"_childAttrUpdateListeners":"_childAttrListeners",c(g,this.attrListeners()[b]),b=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(e=0;e<h;e++){for(var l=f[e].attrListeners()[b][g],m=l.length,y=0;y<m;y++)l[y].isEqualNode(this)&&l.slice(y,1);if("*"===g)for(listenersStyle=k?"_parentStyleUpdateListeners":"_parentStyleListeners",l=f[e].attrListeners()[b][g],m=l.length,y=0;y<m;y++)l[y].isEqualNode(this)&&l.slice(y,1)}}else b?b=k?"_styleUpdateListeners":
"_styleListeners":("*"===g&&(b=k?"_styleUpdateListeners":"_styleListeners",c(g,this.attrListeners()[b])),b=k?"_attrUpdateListeners":"_attrListeners"),c(g,this.attrListeners()[b]);else b?b=k?A:F:("*"===g&&(b=k?A:F,c(g,b)),b=k?L:K),c(g,b)}function P(g,d){n.addAttrListener.call(this,g,d,!0);return this}function Q(g,d){n.addAttrUpdateListener.call(this,g,d,!0);return this}function N(g,d){n.removeAttrListener.call(this,g,d,!0);return this}function I(g,d){n.removeAttrUpdateListener.call(this,g,d,!0);return this}
function G(g,d,f){var k=this.attrListeners();"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(g){case "attr":if(r(k._attrListeners[d],f))return!0;break;case "attrupdate":if(r(k._attrUpdateListeners[d],f))return!0}return!1}function J(){this._stopChange=!0;return this}function n(){function g(b,e){var d,f=e.length;for(d=0;d<f;d++)-1===b.indexOf(e[d])&&b.push(e[d]);return b}function d(b,e){for(var d=Object.keys(b),f,g,k=0,c=d.length;k<c;k++)if(f=d[k],void 0===e[f])e[f]=b[f].slice();else for(var p=
0,v=b[f].length;p<v;p++)g=b[f][p],e[f].push(g)}function f(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),f,k=["value","checked"],c=e._attrListeners,p=e._attrUpdateListeners,v=e._parentAttrListeners;f=e._parentAttrUpdateListeners;var t=!1;if(void 0!==K["*"]||void 0!==L["*"])t=!0;if(!0!==t&&void 0!==c["*"]||void 0!==p["*"]||void 0!==v["*"]||void 0!==f["*"])t=!0;if(!0!==t)for(var w=0;w<k.length;w++)if(void 0!==K[k[w]]||void 0!==L[k[w]]||void 0!==c[k[w]]||void 0!==
p[k[w]]||void 0!==v[k[w]]||void 0!==f[k[w]]){t=!0;break}f=t;k=Object.keys(F);c=Object.keys(A);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);p=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);v=[];if(0!==k.length||0!==c.length)v=g(v,k),v=g(v,c);if(0!==v.length&&0!==p.length||0!==e.length)v=g(v,p),v=g(v,e);-1!==v.indexOf("*")&&(v=B);var e=v,k=e.length,q,r,c=[],z,p="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,v=b.target;void 0!==p&&(b.attr=
"appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(f){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(c=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||c.unshift(b.arguments[0])):c=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));z=c.length;for(var u=0;u<z;u++)void 0!==c[u].addInputBinding&&c[u].addInputBinding(),void 0!==
c[u].addInputBoxBinding&&c[u].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(c=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),c.unshift(b.arguments[0])):c=Array.prototype.slice.call(b.target.querySelectorAll("*"));f=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;w=b.target.__kb._parentStyleListeners;q=b.target.__kb._parentStyleUpdateListeners;z=c.length;for(u=0;u<z;u++){if(0!==k)for(r=
0;r<k;r++)n.injectStyleProperty(c[u],e[r]);r=c[u].attrListeners();d(f,r._parentAttrListeners);d(t,r._parentAttrUpdateListeners);d(w,r._parentStyleListeners);d(q,r._parentStyleUpdateListeners)}void 0!==p&&(b.attr=p,b.target=v,b.arguments=[])}}function k(e){var d=e.target.attributes[e.arguments[0]],f="setAttribute"===e.attr?e.arguments[1]:"";b(e.target,e.arguments[0],f,void 0!==d?d.value:"",[f])||e.preventDefault()}function c(b){var d=b.target.attributes[b.arguments[0]],f="setAttribute"===b.attr?b.arguments[1]:
"";e(b.target,b.arguments[0],f,void 0!==d?d.value:"",[f])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");var b=O,e=z;n.addAttrUpdateListener("appendChild",f);n.addAttrUpdateListener("removeChild",f);n.addAttrUpdateListener("innerHTML",f);n.addAttrUpdateListener("outerHTML",
f);n.addAttrUpdateListener("innerText",f);n.addAttrUpdateListener("outerText",f);n.addAttrUpdateListener("textContent",f);n.addAttrListener("setAttribute",k);n.addAttrListener("removeAttribute",k);n.addAttrUpdateListener("setAttribute",c);n.addAttrUpdateListener("removeAttribute",c);return n}var K={},L={},F={},A={},v={},t="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),B=Object.getOwnPropertyNames(document.documentElement.style),
w=Object.keys(HTMLElement.prototype).filter(function(g){return 0===g.indexOf("on")}).concat(["addEventListener","removeEventListener"]),U,O=function(g,d,f,k,c,b){f=new D(g,d,f,k,c,void 0,"set",b);void 0!==g.__kb&&(k=g.__kb._attrListeners,c=g.__kb._styleListeners,b=g.__kb._parentAttrListeners,g=g.__kb._parentStyleListeners,void 0!==k[d]&&u(k[d],f),void 0===f._stopPropogation&&void 0!==c[d]&&u(c[d],f),void 0===f._stopPropogation&&void 0!==k["*"]&&(u(k["*"],f),void 0===f._stopPropogation&&u(c["*"],f)),
void 0===f._stopPropogation&&void 0!==b[d]&&C(b[d],f),void 0===f._stopPropogation&&void 0!==g[d]&&C(g[d],f),void 0===f._stopPropogation&&void 0!==b["*"]&&(C(b["*"],f),void 0===f._stopPropogation&&C(g["*"],f)));void 0===f._stopPropogation&&void 0!==K[d]&&u(K[d],f);void 0===f._stopPropogation&&void 0!==F[d]&&u(F[d],f);void 0===f._stopPropogation&&void 0!==K["*"]&&(u(K["*"],f),void 0===f._stopPropogation&&u(F["*"],f));return void 0!==f._preventDefault?!1:!0},z=function(g,d,f,k,c,b){f=new D(g,d,f,k,c,
b,"update");void 0!==g.__kb&&(k=g.__kb._attrUpdateListeners,c=g.__kb._styleUpdateListeners,b=g.__kb._parentAttrUpdateListeners,g=g.__kb._parentStyleUpdateListeners,void 0!==k[d]&&u(k[d],f),void 0===f._stopPropogation&&void 0!==c[d]&&u(c[d],f),void 0===f._stopPropogation&&void 0!==k["*"]&&(u(k["*"],f),void 0===f._stopPropogation&&u(c["*"],f)),void 0===f._stopPropogation&&void 0!==b[d]&&C(b[d],f),void 0===f._stopPropogation&&void 0!==g[d]&&C(g[d],f),void 0===f._stopPropogation&&void 0!==b["*"]&&(C(b["*"],
f),void 0===f._stopPropogation&&C(g["*"],f)));void 0===f._stopPropogation&&void 0!==L[d]&&u(L[d],f);void 0===f._stopPropogation&&void 0!==A[d]&&u(A[d],f);void 0===f._stopPropogation&&void 0!==L["*"]&&(u(L["*"],f),void 0===f._stopPropogation&&u(A["*"],f));return void 0!==f._preventDefault?!1:!0};n.injectPrototypeProperty=function(g,d,f,k,p){var b=g.prototype,e=Object.getOwnPropertyDescriptor(b,d);f=f||g.toString().split(/\s+/)[1].split("{")[0].replace("()","");var h=v[f];k=k||O;p=p||z;void 0===b.attrListeners&&
(b={},b.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb}.bind(b),b.addAttrListener=n.addAttrListener,b.addAttrUpdateListener=n.addAttrUpdateListener,b.addChildAttrListener=P,b.addChildAttrUpdateListener=Q,b.hasListener=G,b.removeAttrListener=n.removeAttrListener,b.removeAttrUpdateListener=n.removeAttrUpdateListener,b.removeChildAttrListener=N,b.removeChildAttrUpdateListener=I,b.stopChange=J);void 0===h&&(v[f]={obj:g,proto:b,descriptors:{},set:void 0,update:void 0},
h=v[f],h.set=k,h.update=p);void 0===h.descriptors[d]&&(h.descriptors[d]=e);e.configurable&&(void 0!==e.set?Object.defineProperty(b,d,{get:e.get,set:c(e,d,k,p),enumerable:!0,configurable:!0}):"function"===typeof e.value?Object.defineProperty(b,d,{value:S(e,d,k,p),writable:!0,enumerable:!0,configurable:!0}):void 0!==e.value&&Object.defineProperty(b,d,{get:function(){return e.value},set:E(e,d,k,p),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=function(g,d,f,k){var c=g.style,b=Object.getOwnPropertyDescriptor(c,
d),e=g.attrListeners().injectedStyle;f=f||O;k=k||z;void 0===e&&(g.attrListeners().injectedStyle={obj:g,proto:c,descriptors:{},set:void 0,update:void 0},g.attrListeners().injectedStyle.set=f,g.attrListeners().injectedStyle.update=k,e=g.attrListeners().injectedStyle);void 0===e.descriptors[d]&&(e.descriptors[d]=b);b.configurable&&Object.defineProperty(c,d,R(b,d,f,k,g));return n};n.injectPrototypes=function(g,d,f,c){var p=g.prototype;d=d||g.toString().split(/\s+/)[1].split("{")[0].replace("()","");var b=
v[d],e=Object.getOwnPropertyNames(p);f=f||O;c=c||z;var h;void 0===p.attrListeners&&(p.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb},p.addAttrListener=n.addAttrListener,p.addAttrUpdateListener=n.addAttrUpdateListener,p.addChildAttrListener=P,p.addChildAttrUpdateListener=Q,p.removeAttrListener=n.removeAttrListener,p.removeAttrUpdateListener=n.removeAttrUpdateListener,p.removeChildAttrListener=N,p.removeChildAttrUpdateListener=I,p.hasListener=G,p.stopChange=J);void 0===
b&&(v[d]={obj:g,proto:p,descriptors:{},set:void 0,update:void 0},b=v[d],b.set=f,b.update=c);h=v[d].descriptors;for(c=0;c<e.length;c+=1)void 0===h[e[c]]&&n.injectPrototypeProperty(g,e[c],d,f,z);if(-1!==e.indexOf("value")){var l=function(e){var d,f,g;if("checkbox"===this.type||"radio"===this.type)d=!0;f=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){g=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;d&&(b.set(this,
"checked",this.checked,f)?b.update(this,"checked",this.checked,f):h.checked.set.call(this,f));this.value!==g&&(this.value=g);b.set(this,"value",this.value,f)?b.update(this,"value",this.value,f):h.value.set.call(this,f)}.bind(this),0)};p.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",l)};p.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",l)};p.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=
void 0;this.removeEventListener("mouseup",l)};p.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",l)}}return n};n.addAttrListener=function(g,d,f){if("html"===g){g=0;for(var c=t.length;g<c;g++)H.call(this,t[g],d,f,!1)}else if("events"===g)for(g=0,c=w.length;g<c;g++)H.call(this,w[g],d,f,!1);else H.call(this,g,d,f,!1);return this};n.addAttrUpdateListener=function(g,d,f){if("html"===g){g=0;for(var c=t.length;g<c;g++)H.call(this,t[g],d,f,!0)}else if("events"===
g)for(g=0,c=w.length;g<c;g++)H.call(this,w[g],d,f,!0);else H.call(this,g,d,f,!0);return this};n.removeAttrListener=function(g,d,f){if("html"===g){g=0;for(var c=t.length;g<c;g++)M.call(this,t[g],d,f,!1)}else if("events"===g)for(g=0,c=w.length;g<c;g++)M.call(this,w[g],d,f,!1);else M.call(this,g,d,f,!1);return this};n.removeAttrUpdateListener=function(g,d,f){if("html"===g){g=0;for(var c=t.length;g<c;g++)M.call(this,t[g],d,f,!0)}else if("events"===g)for(g=0,c=w.length;g<c;g++)M.call(this,w[g],d,f,!0);
else M.call(this,g,d,f,!0);return this};n.hasListener=function(g,d,f){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(g){case "attr":if(r(K[d],f))return!0;break;case "attrupdate":if(r(L[d],f))return!0}return!1};n.injectedPrototypes=function(){return v};return n}"function"===typeof define&&define.amd&&define("KB",E);return E}(),Z=function(E){return function(){function u(v){document.createDocumentFragment();this.name=v.tagName.toLowerCase();this.template=n[this.name]||'<div class="missing_component">Unknown Component</div>';
this.node=v;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name;if(this.template.match(D())){var t=this.template;v=D();for(var t=t.split(v).filter(Boolean),B={},w=0,r,q,u=t.length;w<u;w++)t[w].match(v)&&(r=c(t[w].substring(t[w].indexOf("<"),t[w].indexOf("}}"))+"}").replace(/[<>]/g,""),0===r.indexOf("/")&&B[r.replace("/","")]?(r=r.replace("/",""),q=Object.keys(B[r],"array"),0!==q.length&&
(q=q[q.length-1],t[q]="\x3c!--"+t[q],B[r].splice(parseInt(q,10),1),t[w]+="--\x3e",q=Object.keys(B[r],"array"),0===q.length&&(B[r]=null,delete B[r]))):(B[r]||(B[r]=[]),B[r][w]=t[w]));w=0;q=Object.keys(B);for(u=q.length;w<u;w++)for(v=Object.keys(B[q[w]],"array");w<u;w++)t[v[0]]="\x3c!--"+t[v[0]]+"--\x3e";this.template=t.join("")}}function C(c,t,B,n){return{value:c,writable:!!t,enumerable:!!n,configurable:!!B}}function r(){return new RegExp("(\\"+I.split("").join("\\")+")(.*?)(\\"+G.split("").join("\\")+
")","g")}function D(){return new RegExp("(<\\"+I.split("").join("\\")+".*?\\"+G.split("").join("\\")+".*?>|<\\/\\"+I.split("").join("\\")+".*?\\"+G.split("").join("\\")+">)")}function q(c){return c.split(new RegExp("("+I.split("").join("\\")+")(.*?)("+G.split("").join("\\")+")","g")).map(function(c,v,n){return n[v-1]===I?I+c+G:c}).filter(function(c,v,n){return 0!==c.length&&c!==I&&c!==G&&0!==c.length})}function c(c){return c.replace(new RegExp("["+I+G+"]","g"),"").replace(new RegExp("(\\"+J.split("").join("\\")+
"(.*?)+)","g"),"").replace(/\s/g,"")}function T(c){return c.reduce(function(c,v){v.match(/(\()(.*?)(\))/)?c.vmFilters[c.vmFilters.length]=v.replace(/[\(\)]/g,""):v.match(/(\[)(.*?)(\])/)?-1!==v.indexOf("~")?c.model[c.model.length]=v.replace(/[\[\]\~]/g,""):-1!==v.indexOf("+")?c.local[c.local.length]=v.replace(/[\[\]\+]/g,""):c.session[c.session.length]=v.replace(/[\[\]\-]/g,""):c.filters[c.filters.length]=v;return c},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function S(c){return-1!==
c.indexOf("for")?c.replace(new RegExp("["+I+G+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(c){return 0!==c.length}):[]}function R(c){if(2>c.split("==").length&&2>c.split("<=").length&&2>c.split(">=").length&&-1!==c.indexOf("="))return c.substring(c.indexOf("=")+1,c.length)}function H(c){var t=c.match(/^(\s*)(>)((.*?)+)/),n=c.match(/^(\s*)(<)((.*?)+)/);c=c.replace(/(^<|^>)((.*?)+)/,"$2");var r=R(c),q=c.match(/((==|<=|>=|<|>)((.*?)+))/g),u=c.match(/(([\+\*-\/])((.*?)+))/g);
return{type:t?"insert":n?"outsert":void 0,set:r!==c?r:void 0,filters:q||u?{boolFilter:q?eval("(function(){ return function(v){ return (v"+q[0]+");};}())"):void 0,mathFilter:u?eval("(function(){ return function(v){ return (v"+u[0]+");};}())"):void 0}:void 0}}function M(c){if(0!==c.length){for(var t="",n=0,r=c.length;n<r;n++)if("string"===typeof c[n])t+=c[n];else if(void 0===c[n]._data)t+=c[n].text;else var q=c[n]._data.get(c[n].key),t=t+P(void 0!==q?q:"",c[n].filters.filters,c[n]._data.filters);return t}return P(c[0]._data.get(c[0].key)||
"",c[0].filters.filters,c[0]._data.filters)}function P(c,n,r){for(var q=0,u=n.length;q<u;q++)r[n[q]]&&(c=r[n[q]](c));return c}function Q(c,n,q,r){for(var u=0,A=n.length;u<A;u++)if(q[n[u]])q[n[u]](c,r);return c}function N(){function c(d,f){var g=H(f);this.text=d;this.key=f.replace(/(^>|^<*)(.*?)([=*+-\/<>]+)((.*?)+)/g,g.filters?"$2":"$4").replace(/\s/g,"");this.keyLength=this.key.split(".").length;this.localKey=this.key.split(".").pop();var p;p=-1!==d.indexOf(J)?d.replace(new RegExp("["+G+"]","g"),
"").replace(new RegExp("(.*?)(\\"+J.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=T(p);this.component="for"===this.type?S(d)[1]:void 0;this.id=0;this.insert="insert"===g.type;this.outsert="outsert"===g.type;this.set=g.set;this.inlineFilters=g.filters;this.isBase=!1}function n(d,f){for(var c=0,g=f.length;c<g;c++)d.stopChange().appendChild(f[c])}function q(d){if(d&&window.model)return window.model.get(d[0])}function r(d,f){if(f&&0!==f.length&&window.model)for(var c=0,g=
f.length;c<g;c++)window.model.set(f[c],d)}function u(d){if(d&&window.localStorage)return localStorage.getItem(d[0])}function D(d,f){if(d&&0!==d.length&&window.localStorage)for(var c=0,g=d.length;c<g;c++)localStorage.setItem(d[c],f)}function z(d){if(d&&window.sessionStorage)return sessionStorage.getItem(d[0])}function g(d,f){if(d&&0!==d.length&&window.sessionStorage)for(var c=0,g=d.length;c<g;c++)sessionStorage.setItem(d[c],f)}Object.defineProperties(c.prototype,{addPointer:C(function(d){for(var f=
document.createElement(this.component),c=Q(this._data.getLayer(this.key),this.filters.filters,this._data.filters,d)[d],g=0,b=Object.keys(c,"all"),e=b.length;g<e;g++)f.k_post||(f.k_post={}),f.k_post[b[g]]=c,f.k_post.x=d,f.k_post.loopid=this.component+"_"+d;d>=this.node.children.length?this.node.stopChange().appendChild(f):this.node.stopChange().insertBefore(f,this.node.children[d]);A({event:"loopitem",node:f,parent:this.node,map:this});return this}),removePointer:C(function(d){for(var f=this.node.children[d].kb_maps,
c=0,g=Object.keys(this.node.children[d].kb_viewmodel.pointers),b=g.length;c<b;c++){var e=f[g[c]];if(e)for(var h=0,l=e.length;h<l;h++)e[h].unsync(),e[h]=null,delete e[h]}this.node.stopChange().removeChild(this.node.children[d]);c=0;for(b=this.node.children.length;c<b;c++)this.node.children[c].kb_viewmodel.x=c,d=this.node.children[c].kb_viewmodel.loopid,this.node.children[c].kb_viewmodel.loopid=d.substring(0,d.lastIndexOf("_")+1)+c;return this}),reapplyPointer:C(function(d){for(var c=this.node.children[d].kb_maps,
g=this.node.children[d].kb_viewmodel.loopid,p=0,b=Object.keys(this.node.children[d].kb_viewmodel.pointers),e=b.length;p<e;p++){var h=c[b[p]];if(void 0!==h)for(var l=0,m=h.length;l<m;l++)h[l].reconnect()}this.node.children[d].kb_viewmodel.x=d;this.node.children[d].kb_viewmodel.loopid=g.substring(0,g.lastIndexOf("_")+1)+d;return this}),connect:C(function(d){var c=this;this._data=d;if("for"!==this.type){if(void 0!==this._data.pointers[this.key]&&void 0!==this._data.pointers[this.key].filters)for(var g=
this._data.pointers[this.key].filters.dataFilters,p=0,b=Object.keys(this._data.pointers[this.key].filters.stringFilters),e=b.length;p<e;p++)for(var h=this._data.pointers[this.key].filters.stringFilters[b[p]],l=0,m=h.length;l<m;l++)-1===this.filters[b[p]].indexOf(h[l])&&(this.filters[b[p]].push(h[l]),-1!==["vmfilters","filters"].indexOf(b[p])&&void 0!==g[h[l]]&&void 0===this._data.filters[h[l]]&&(this._data.filters[h[l]]=g[h[l]]));if(this.insert){this.setDom(this._data.get(this.key));this.unsync();
return}this.set&&(g=!isNaN(parseInt(this.set,10))&&parseInt(this.set,10).toString().length===this.set.length,p="true"===this.set.replace(/\s/g,"")||"false"===this.set.replace(/\s/g,""),b=-1!==this.set.indexOf('"')||-1!==this.set.indexOf("'"),(this.set=g?parseInt(this.set,10):p?"true"===this.set.replace(/\s/g,""):b?this.set.replace(/((\s*\"|\')(.*?)(\"|\'))/g,"$3"):void 0)&&this._data.set(this.key,this.set));if(this.outsert){this.setDom("");this.unsync();return}this.inlineFilters&&(this.inlineFilters.boolFilter?
(this.filters.filters.unshift("boolFilter"),this._data.filters.boolFilter=this.inlineFilters.boolFilter):(this.filters.filters.unshift("mathFilter"),this._data.filters.mathFilter=this.inlineFilters.mathFilter));if("component"===this.type)return this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,q(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,z(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&
this._data.stopChange().set(this.key,u(this.filters.local)),this.node.k_post||(this.node.k_post={}),this.node.k_post[this.attr]={filters:{dataFilters:this._data.filters,stringFilters:this.filters},pointer:this._data.getLayer(this.key),key:this.key.split(".").pop()},this;if("node"===this.type)return this.isBase&&(this.dataListener=function(b){"delete"===b.event?c.unsync():c.replaceNode()},d.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener)),this;this.dataListener=function(b){"delete"===
b.event?c.unsync():c.setDom(b.value)};this.isEvent||d.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener);if(1===this.bindText.length&&!this.isEvent)if(this.domListener=function(b){c.setData(b.value)},this.node.__kbhtmllistener=!0,"object"===typeof this.listener)for(p=0,e=this.listener.length;p<e;p++)this.node.addAttrUpdateListener(this.listener[p],this.domListener);else this.node.addAttrUpdateListener(this.listener,this.domListener)}else this.dataListener=function(b){"postset"!==
b.type||b.oldValue&&0!==b.oldValue.length||(b.event="create");c.setLoop(b.key,b.event)},d.getLayer(this.key).addDataMethodUpdateListener(this.dataListener);"for"!==this.type&&(this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,q(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,z(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,u(this.filters.local)),
this.isEvent?(this.dataListener=function(b){c.node.stopChange().removeEventListener(c.attr.replace("on",""),b.oldValue);c.node.stopChange().addEventListener(c.attr.replace("on",""),b.value)},this._data.addDataUpdateListener(this.key,this.dataListener),this.node.addEventListener(this.attr.replace("on",""),this._data.get(this.key))):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=M(this.bindText),this.isInput&&-1!==
["value","checked"].indexOf(this.attr)&&(d=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==d?d:"")));return this}),reconnect:C(function(){if("for"!==this.type){if(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length)if("object"===typeof this.listener)for(var d=0,c=this.listener.length;d<c;d++)this.node.removeAttrUpdateListener(this.listener[d],this.domListener);else this.node.removeAttrUpdateListener(this.listener,this.domListener)}else this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);
this.connect(this._data);return this}),createloop:C(function(){this.node.stopChange().innerHTML="";for(var c=0,f=Q(this._data.get(this.key),this.filters.filters,this._data.filters).length;c<f;c++)this.setLoop(c,"create");return this}),setData:C(function(c){c=P(c,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,c);r(this.filters.model,c);g(this.filters.session,c);D(this.filters.local,c);return this}),setDom:C(function(c){r(this.filters.model,c);g(this.filters.session,
c);D(this.filters.local,c);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):this.isInput&&-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",n(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=M(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(c=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==c?
c:""));return this}),setLoop:C(function(c,f){switch(f){case "create":this.addPointer(c);break;case "delete":this.removePointer(c);break;case "set":this.reapplyPointer(c);break;default:if("push"!==f)for(var g=0,p=this._data.getLayer(this.key).length;g<p;g++)this.reapplyPointer(g)}return this}),bindMaps:C([]),unsync:C(function(){"component"===this.type&&(this.__proto__.bindText=null);this._data=this.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;
return this}),reset:C(function(){"for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener).addDataMethodUpdateListener(this.extraListener):this.dataListener&&(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener).addAttrUpdateListener(this.listener,this.domListener))}),replaceNode:C(function(){var c=
document.createDocumentFragment(),f=c.appendChild(document.createElement("div")),g,p=!1,b=this;f.innerHTML=this.bindText.map(function(e,c){if("object"===typeof e){if(void 0===e._data)return p=!0,"";if(e.key===b.bindText[1].key){var d=P(e._data.get(e.key),e.filters,e._data.filters)||"unknown";"unkown"===d&&1===c&&console.error("You attempted to bind a node to %o, which does not exist on %o, with bindText: %o",e.key,e._data,e.base);return d}return P(e._data.get(e.key),e.filters,e._data.filters)}return e}).join("");
p||(g=f.children[0],c.replaceChild(g,f),this.base.local.parentElement.stopChange().replaceChild(c,this.base.local),this.base.local=g,A({event:"replaceNode",node:this.base.local,parent:this.node,map:this.base}))})});return c}var I="{{",G="}}",J="|",n={},K=/(<\/.*?>)/g;E().call();var L=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["ontouchstart","ontouchend","ontouchmove"]),F={loopitem:[],replaceNode:[]},A=function(c){for(var n=F[c.event],q=0,r=n.length;q<
r;q++)n[q](c)};u.start=function(c){if(void 0===c)return I;I="string"===typeof c?c:I;return u};u.end=function(c){if(void 0===c)return G;G="string"===typeof c?c:G;return u};u.pipe=function(c){if(void 0===c)return J;J="string"===typeof c?c:J;return u};u.getUnknown=function(c){var q=c.match(K).map(function(c){return c.replace(/[<\/>]/g,"")});q.filter(function(c,r){return 0!==c.indexOf(I)&&document.createElement(c)instanceof HTMLUnknownElement&&-1===q.indexOf(c,r+1)&&void 0===n[c]});return q};u.isRegistered=
function(c){return void 0!==n[c]};u.register=function(c,q){void 0===n[c]?(n[c]=q,u.getUnknown(q)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",c);return this};u.addEventListener=function(c,n){void 0!==F[c]?F[c].push(n):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",c);return u};u.removeEventListener=function(c,n){if(void 0!==F[c])for(var q=0,r=F[c].length;q<r;q++)F[c][q].toString()===n.toString()&&F[c].splice(q,
1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",c);return u};Object.defineProperties(u.prototype,{register:C(u.register),isRegistered:C(u.isRegistered),getUnknown:C(u.getUnknown),map:C(function(n){function u(B,w){for(var A=0,C=B.length;A<C;A++)if(void 0===B[A].kb_maps&&8!==B[A].nodeType){B[A].kb_mapper=n;B[A].kb_maps=w;if(3===B[A].nodeType){var z=B[A],g=w,d=z.textContent;if(d.match(r())){var f=q(d),k=N();k.prototype.type=d.match(new RegExp("(\\"+
I.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+G.split("").join("\\")+")","g"))?"for":"text";k.prototype.text=d;k.prototype.bindText=f;k.prototype.listener=["textContent","innerHTML","innerText"];k.prototype.attr="textContent";k.prototype.localAttr="textContent";k.prototype.local=z;k.prototype.node=z.parentElement;k.prototype.binds=g;z=0;for(d=f.length;z<d;z++)if(0===f[z].indexOf(I)){var p="for"===k.prototype.type?S(f[z])[0]:c(f[z]),b=new k(f[z],p);void 0===g[p]&&(g[p]=[]);b.bindText[z]=
b;b.bindMaps.push(b);b.id=g[p].length;g[p].push(b)}}}else for(g=B[A],f=w,k=Array.prototype.slice.call(g.attributes),z=g instanceof HTMLUnknownElement,d=0,p=k.length;d<p;d++)if(k[d].value.match(r())){var b=q(k[d].value),e=N();e.prototype.type=z?"component":"attribute";e.prototype.text=k[d].value;e.prototype.bindText=b;e.prototype.isEvent=-1!==L.indexOf(k[d].name);e.prototype.isInput="input"===g.tagName.toLowerCase();e.prototype.isRadio=e.prototype.isInput?-1!==["radio","checkbox"].indexOf(g.type):
!1;e.prototype.listener=k[d].name;e.prototype.attr=k[d].name;e.prototype.localAttr="value";e.prototype.local=k[d];e.prototype.node=g;e.prototype.binds=f;e.prototype.isEvent&&g.removeAttribute(k[d].name);for(var h=0,l=b.length;h<l;h++)if(0===b[h].indexOf(I)){var m=c(b[h]),y=new e(b[h],m);void 0===f[m]&&(f[m]=[]);y.bindText[h]=y;y.bindMaps.push(y);y.id=f[m].length;f[m].push(y)}}B[A].childNodes&&0!==B[A].childNodes.length&&(w=u(B[A].childNodes,w))}else if(8===B[A].nodeType&&(z=B[A],g=w,d=z.textContent,
d.match(D())))for(f=q(d),k=N(),k.prototype.type="node",k.prototype.text=d,k.prototype.bindText=f,k.prototype.base=f[1],k.prototype.listener="textContent",k.prototype.attr="textContent",k.prototype.localAttr="textContent",k.prototype.local=z,k.prototype.node=z.parentElement,k.prototype.binds=g,k.prototype.replacement=void 0,z=0,d=f.length;z<d;z++)0===f[z].indexOf(I)&&(p=c(f[z]),b=new k(f[z],p),void 0===g[p]&&(g[p]=[]),b.bindText[z]=b,b.bindMaps.push(b),b.id=g[p].length,1===z&&(k.prototype.base=b,b.isBase=
!0),g[p].push(b));return w}return u(n.childNodes,{})})});return u}}(W),aa=function(){return function(){function E(q){0===q.length&&(q=C);q=new u(q);for(var c=0,T=D.length;c<T;c++)if(!q._stopPropogation)D[c](q);q._preventDefault||(document.body.innerHTML="<"+q.hash+"></"+q.hash+">",r(q.hash));return E}function u(q){this.preventDefault=function(){this._preventDefault=!0};this.stopPropogation=function(){this._stopPropogation=!0};this.hash=q;this.url=window.location.href}var C="",r=function(){},D=[];
E.base=function(q){if(void 0===q)return C;C="string"===typeof q?q:C;return E};E.addHashListener=function(q){D.push(q);return E};E.removeHashListener=function(q){for(var c=0,r=D.length;c<r;c++)if(D[c].toString()===q.toString()){D.splice(c,1);break}return E};E.onChange=function(q){if(void 0===q)return r;r="function"===typeof q?q:r;return E};E.watch=function(q){window.onhashchange=q?function(){E(window.location.hash.replace("#",""))}:null;return E};return E}}(),V=function(E,u,C,r,D){return function(q){function c(b,
e,d,g,k){function n(b,e,c,d,h){for(var g=F({},b),k=0,l=Object.keys(d),m=l.length;k<m;k++)-1!==f.indexOf(l[k])?Object.defineProperty(g,l[k],H(d[l[k]],"filters"!==l[k])):d.pointers?void 0===d.pointers[l[k]]&&g.set(l[k],d[l[k]]):g.set(l[k],d[l[k]]);if(d.pointers)for(g.pointers||Object.defineProperty(g,"pointers",H({},!1,!0)),k=0,l=Object.keys(d.pointers),m=l.length;k<m;k++)g.pointers[l[k]]=d.pointers[l[k]],g.addPointer(g.pointers[l[k]].point,g.pointers[l[k]].key,l[k]);k=0;l=Object.keys(e.prototype);
for(m=l.length;k<m;k++)Object.defineProperty(g,[l[k]],H(e.prototype[l[k]],!0));e.apply(g,c);k=0;l=Object.keys(h);for(m=l.length;k<m;k++)-1!==f.indexOf(l[k])?Object.defineProperty(g,l[k],H(h[l[k]],"filters"!==l[k])):h.pointers?void 0===h.pointers[l[k]]&&g.set(l[k],h[l[k]]):g.set(l[k],h[l[k]]);if(h.pointers)for(g.pointers||Object.defineProperty(g,"pointers",H({},!1,!0)),k=0,l=Object.keys(h.pointers),m=l.length;k<m;k++)g.pointers[l[k]]=h.pointers[l[k]],g.addPointer(g.pointers[l[k]].point,g.pointers[l[k]].key,
l[k]);k=0;l=Object.keys(g.filters);for(m=l.length;k<m;k++)g.filters[l[k]]=g.filters[l[k]].bind(g);if(g.sessionStorage){if(e=sessionStorage.getItem(g.id||b))for(e=JSON.parse(e),k=0,l=Object.keys(e),m=l.length;k<m;k++)g.set(l[k],e[l[k]]);else sessionStorage.setItem(g.id||b,g.stringify());g.addChildDataUpdateListener("*",function(){sessionStorage.setItem(g.id||b,g.stringify())})}if(g.localStorage){if(e=localStorage.getItem(g.id||b))for(e=JSON.parse(e),k=0,l=Object.keys(e),m=l.length;k<m;k++)g.set(l[k],
e[l[k]]);else localStorage.setItem(g.id||b,g.stringify());g.addChildDataUpdateListener("*",function(){localStorage.setItem(g.id||b,g.stringify())})}g.store&&U.set(g.id||b,g);return g}function p(b,e,c){b.kb_viewmodel=c;var d=e.maps=e.map(e.wrapper);e.wrapper.kb_maps=d;Object.keys(d).forEach(function(b){d[b].forEach(function(b){switch(b.type){case "for":b.connect(c).createloop();break;case "component":b.connect(c).unsync();break;case "node":b.connect(c).replaceNode();break;default:b.connect(c)}})});
e.wrapper.kb_viewmodel.onFinish.call(e.wrapper.kb_viewmodel,e.wrapper);e.wrapper.kb_viewmodel.onGlobalFinish&&e.wrapper.kb_viewmodel.onGlobalFinish.call(e.wrapper.kb_viewmodel,e.wrapper);e.wrapper.kb_viewmodel.onNodeFinish&&e.wrapper.kb_viewmodel.onNodeFinish.call(e.wrapper.kb_viewmodel,e.wrapper)}function q(b){b=b.querySelectorAll("*");for(var e=0,d=b.length;e<d;e++)b[e]instanceof HTMLUnknownElement&&c(b[e])}function r(b,d){t=new B(d,!0);t.wrapper.innerHTML=t.template;t.wrapper.kb_mapper=t.wrapper;
Object.defineProperty(t.wrapper,"__kbcomponenttree",H(d.kb_mapper?d.kb_mapper.__kbcomponenttree.slice():[]));d.parentElement.stopChange().replaceChild(t.fragment,d);e.unshift(t.wrapper);p(t.wrapper,t,n(b,O[b],e,v,w));-1===t.wrapper.__kbcomponenttree.indexOf(b)||t.wrapper.kb_viewmodel.multiple?(t.wrapper.__kbcomponenttree.push(b),t.wrapper.className+=" "+t.wrapper.kb_viewmodel.local,t.wrapper.className+=" "+t.wrapper.kb_viewmodel.id,t.wrapper.className+=t.wrapper.kb_viewmodel.loopid?" "+t.wrapper.kb_viewmodel.loopid:
"",t.wrapper.kb_viewmodel.subscribeDeep("*",C).callAllSubscribers(),t.wrapper.kb_viewmodel.kbnode=t.wrapper,t.wrapper.addChildAttrListener("html",function(b){if(!b.stopChange){if(-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&(b.arguments[0]instanceof HTMLUnknownElement||b.arguments[0]instanceof HTMLScriptElement)||-1!==["innerHTML","textContent"].indexOf(b.attr)&&(b.child?b.child.__kbhtmllistener:b.target.__kbhtmllistener))return!0;b.preventDefault();b.stopPropagation()}}),
t.wrapper.addChildAttrUpdateListener("html",function(b){-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&b.arguments[0]instanceof HTMLUnknownElement&&c(b.arguments[0])}),q(t.wrapper)):(console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
b),console.error("Recursive Component %o on %o",t.wrapper,t.wrapper.parentElement))}var u=b.tagName.toLowerCase(),t;k=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")});var v=R(A,{}),w={};void 0===e&&(e=[]);d&&R(d,v);Object.defineProperty(v,"local",H(v.local||"local_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"id",H(v.id||"id_"+u+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(v,"filters",H(v.filters||
{},!1,!1,!0));"function"!==typeof v.onFinish&&(v.onFinish=function(){});Object.defineProperty(v,"onGlobalFinish",H(v.onFinish,!0,!1,!0));v.listen=P;Object.defineProperty(v,"listen",H(v.listen,!0,!1,!0));v.unlisten=M;Object.defineProperty(v,"unlisten",H(v.unlisten,!0,!1,!0));v.alert=Q;Object.defineProperty(v,"alert",H(v.alert,!0,!1,!0));Object.defineProperty(v,"sessionStorage",H(!1,!0,!1,!0));Object.defineProperty(v,"localStorage",H(!1,!0,!1,!0));Object.defineProperty(v,"store",H(!1,!0,!1,!0));Object.defineProperty(v,
"multiple",H(!1,!0,!1,!0));g&&R(g,w);w.innerHTML=Array.prototype.slice.call(b.childNodes);d=0;for(g=b.attributes.length;d<g;d++)w[b.attributes[d].name]=b.attributes[d].value;d=0;for(g=k.length;d<g;d++)b[k[d]]&&(w[k[d]]=b[k[d]]);b.k_post&&R(b.k_post,w);c.isRegistered(u)||b.kb_isLoading?c.isRegistered(u)&&r(u,b):(c.loadWaitList(u,function(e,c){r(u,b)}),c.loadWaitList(u).loading||(c.loadWaitList(u).loading=!0,L(u)))}function C(b){var e=this.__kbref.local,c=this.__kbref.id,d=this.__kbref.loopid,f=this.__kbscopeString+
(0!==this.__kbscopeString.length?".":"")+b.key;if(g[e]&&g[e][f])for(var k=0,n=g[e][f].length;k<n;k++)g[e][f][k](b);if(g[c]&&g[c][f])for(k=0,n=g[c][f].length;k<n;k++)g[c][f][k](b);if(g[d]&&g[d][f])for(k=0,n=g[d][f].length;k<n;k++)g[d][f][k](b)}function S(b){var e=b.node.tagName.toLowerCase();c.isRegistered(e)||b.node.kb_isLoading?c.isRegistered(e)&&("replaceNode"===b.event?c(b.node,[],{onNodeFinish:function(e){b.map.local=e}}):c(b.node)):(b.node.kb_isLoading=!0,c.loadWaitList(e,function(e,d){"replaceNode"===
b.event?c(b.node,[],{onNodeFinish:function(e){b.map.local=e}}):c(b.node)}),c.loadWaitList(e).loading||(c.loadWaitList(e).loading=!0,L(e)))}function R(b,e){var c=Object.keys(b);e.pointers||Object.defineProperty(e,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var d=0,f=c.length;d<f;d++)if(F.prototype.isObservable(b,c[d]))e.pointers[c[d]]={key:b.__kbscopeString.split(".").pop(),point:b.__kbImmediateParent};else if(F.prototype.isMixed(b[c[d]]))e.pointers[c[d]]={key:b[c[d]].__kbscopeString.split(".").pop(),
point:b[c[d]].__kbImmediateParent};else if(F.prototype.isObject(b[c[d]])&&b[c[d]].pointer)e.pointers[c[d]]={filters:b[c[d]].filters,key:b[c[d]].key,point:b[c[d]].pointer};else if(F.prototype.isObject(b[c[d]])){void 0===e[c[d]]&&(e[c[d]]={});for(var g=0,k=Object.keys(b[c[d]]);g<f;g++)e[c[d]][k[g]]=b[c[d]][k[g]]}else if(F.prototype.isArray(b[c[d]]))for(g=0;g<f;g++)e[c[d]][g]=b[c[d]][g];else e[c[d]]=b[c[d]];return e}function H(b,e,c,d){return{value:b,writable:!!e,enumerable:!!d,configurable:!!c}}function M(b,
e,c){if(2===arguments.length)if(c=e.bind(this),e=b,z[e])for(var d=0,f=z[e].length;d<f;d++)z[e][d].toString()===c.toString()&&z[e].splice(d,1);else console.error("no listeners exists by key %o",e);else if(c=c.bind(this),g[b]&&g[b][e])for(d=0,f=g[b][e].length;d<f;d++)g[b][e].toString()===c.toString()&&g[b][e].splice(d,1);return this}function P(b,c,d){if(2===arguments.length)d=c.bind(this),c=b,z[c]||(z[c]=[]),z[c].push(d);else if(d=d.bind(this),g[b]||(g[b]={}),g[b][c]||(g[b][c]=[]),g[b][c].push(d),document.querySelector("."+
b)){var f=g[b][c],k=document.querySelector("."+b).kb_mapper.kb_viewmodel,n=k.getLayer(c),p=c.split(".").pop(),q=n[p];f[f.length-1]({key:p,value:q,oldValue:q,local:n,kbref:k,onChange:!1,initial:!0})}return this}function Q(b,c){if(z[b])for(var d=0,f=z[b].length;d<f;d++)z[b][d](c);return this}function N(){if(!document.querySelector('meta[name="viewport"]')){var b=document.createElement("meta");b.name="viewport";b.content="width=device-width, initial-scale=1.0";document.head.stopChange().appendChild(b)}c.device||
(c.device={});c.device.type=c.detectDevice();c.device.orientation=c.detectOrientation();c.device.browser=c.detectBrowser();c.device.screenSize=c.detectScreenSize();c.device.orientationSize=c.detectScreenOrientation();c.device.keyboard="desktop"!==c.device.type?window.innerHeight<screen.height-.4*screen.height:!1;document.body.className=c.device.type+" "+c.device.orientation+(c.device.keyboard?" keyboard":"")+" "+c.device.browser+" "+c.device.screenSize+" "+c.device.orientationSize}function I(b,c){var d=
document.createElement("script");d.src=b;d.onerror=function(){c(null,!0)};d.onload=function(){c(A)};document.head.stopChange().appendChild(d)}function G(b){I((void 0!==A.prefix?A.prefix:"")+"/node_modules/konnekt/config/config.js",b)}function J(b){I((void 0!==A.prefix?A.prefix:"")+"/bower_components/konnekt/config/config.js",b)}function n(b){I((void 0!==A.prefix?A.prefix:"")+"/config/config.js",b)}function K(){for(var b=0,c=t.length;b<c;b++)t[b]()}window.K_Components||(window.K_Components={});var L=
u().onLoad(function(b,e){var d="<style>"+unescape(e.prototype.k_css)+"</style>"+unescape(e.prototype.k_html);c.register(b,e,d,e.prototype.cms);v?(c.loadWaitList(b).forEach(function(c){c(b,e)}),c.loadWaitList(b,"clear")):t.push(function(){c.loadWaitList(b).forEach(function(c){c(b,e)});c.loadWaitList(b,"clear")})}),F=E(),A=q||{},v=!1,t=[],B=r().addEventListener("loopitem",S).addEventListener("replaceNode",S),w=D().base(void 0!==A.base?A.base:"default").watch(!0).onChange(function(b){c(document.querySelector(b))}),
U=F({},"Model"),O={},z={},g={},d=function(){return window.location.search.replace("?","").split("&").filter(function(b){return 0!==b.length}).reduce(function(b,c){b[c.split("=")[0]]=c.split("=")[1];return b},{})}(),f="id filters class sessionStorage localStorage store component multiple".split(" "),k={},p;c.detectDevice=function(){return navigator.userAgent.toLowerCase().match(/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|[^a-z]rim[^a-z]|sonyericsson|nokia|[^a-z]mib[^a-z])/)?
"mobile":navigator.userAgent.toLowerCase().match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/)?"tablet":"desktop"};c.detectBrowser=function(){var b=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),c="undefined"!==typeof InstallTrigger,d=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),f=!!document.documentMode,g=
!f&&!!window.StyleMedia,k=!!window.chrome&&!!window.chrome.webstore;return b?"opera":c?"firefox":d?"safari":k?"chrome":f?"ie":g?"edge":"unknown"};c.detectOrientation=function(){return screen.width>screen.height?"landscape":screen.height>screen.width?"portrait":"square"};c.detectScreenOrientation=function(){return window.innerWidth>window.innerHeight?"landscape-size":window.innerHeight>window.innerWidth?"portrait-size":"square-size"};c.detectScreenSize=function(){return 1280>("landscape"===this.detectOrientation()?
window.innerWidth:window.innerHeight)?750>("landscape"===this.detectOrientation()?window.innerWidth:window.innerHeight)?"mobile-size":"tablet-size":"desktop-size"};c.config=function(b){function e(b,c){for(var d=0,f=Object.keys(b),g=f.length;d<g;d++)"object"===typeof b[f[d]]?(void 0===c[f[d]]&&(c[f[d]]={}),e(b[f[d]],c[f[d]])):"object"!==c[f[d]]&&(c[f[d]]=b[f[d]])}if(void 0===b)return A;e(b,A);w.base(void 0!==A.base?A.base:"default");return c};window.addEventListener("resize",N);document.body?N():document.addEventListener("DOMContentLoaded",
function(){N()});c.register=function(b,e,d,f){B.register(b,d);O[b]=e;return c};c.isRegistered=function(b){return void 0!==O[b]&&B.isRegistered(b)};c.registered=function(){return Object.keys(O)};c.loadWaitList=function(b,e){if("undefined"===typeof e&&b)return k[b];if(b){if(void 0===k[b]||"clear"===e){var d=void 0===k[b]?!1:!!k[b].loading;k[b]=[];k[b].loading=d}"function"===typeof e&&k[b].push(e)}return c};c.localRouting=function(b){b&&"dev"!==d.env?(p=Node.prototype.appendChild,Node.prototype.appendChild=
function(b){if("script"===b.nodeName.toLowerCase()){b.src=b.src.substring(0,-1!==b.src.indexOf("?")?b.src.indexOf("?"):b.src.length);var c=b.src.match(/(.*?component\/)/);c&&(d.env||(d.env="prod"),"dev"===d.env&&(d.env="qa"),c=b.src.replace(c[0],"").replace(/[\/\s]/g,""),b.src=(void 0!==A.prefix?A.prefix:"")+"/components/"+c+"/build/"+d.env+"/"+c+(d.debug&&"prod"!==d.env?"":".min")+".js",arguments[0]=b)}return p.apply(this,arguments)}):p&&(Node.prototype.appendChild=p,p=null);return c};c.hashRouting=
function(b){b&&(document.body?v?w(window.location.hash.replace("#","")):t.push(function(){w(window.location.hash.replace("#",""))}):document.addEventListener("DOMContentLoaded",function(){v?w(window.location.hash.replace("#","")):t.push(function(){w(window.location.hash.replace("#",""))})}));return this};c.addHashRouter=function(b){w.addHashListener(b);return c};c.removeHashRouter=function(b){w.removeHashListener(b);return c};F.prototype._parse||(F.prototype._parse=F.prototype.parse);F.prototype.parse=
function(){if(this.__kbref.kbnode){var b=this.__kbref.kbnode.kb_mapper.kb_maps;this._parse.apply(this,arguments);this.unsubscribeDeep("*",C);this.subscribeDeep("*",C).callAllSubscribers();Object.keys(b).forEach(function(c){b[c].forEach(function(b){b.reset()})})}else return this._parse.apply(this,arguments)};(function(){G(function(b,c){c?J(function(b,c){c&&console.error("The Konnekt local config was not found, this issue happens when You do not have Konnekt installed via the standard node_modules or bower_components module directories");
n(function(b,c){v=!0;K()})}):n(function(b,c){v=!0;K()})})})();return window.Konnekt=c}}(X,Y,W,Z,aa);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return V}):"undefined"!==typeof module&&(module.exports=V);return V}();
