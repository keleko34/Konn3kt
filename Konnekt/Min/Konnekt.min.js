var Konnekt=function(){var Y=function(){return function(B,t,A,v){function D(b,e,g,f){b=void 0===b?{}:b;var k={},w=window.Proxy?new Proxy(k,{set:P,deleteProperty:V}):k,d=Object.keys(b,"all");Object.defineProperties(k,{__kbname:c("string"===typeof e?e:"default",!0,!0),__kbref:c(g?g.__kbref||g:w,!0,!0),__kbscopeString:c(f||"",!0,!0),__kbImmediateParent:c(g||null,!0,!0),__kbsubscribers:c({}),__kbparentsubscribers:c({}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),
__kbcreatelisteners:c([]),__kbdeletelisteners:c([]),__kbparentcreatelisteners:c([]),__kbparentdeletelisteners:c([]),__kbmethodlisteners:c([]),__kbmethodupdatelisteners:c([]),__kbpointers:c({}),__kbevents:c(u),__kbsetindex:c(0,!0),__kbproto:c({}),length:c(0,!0),__kbnonproxy:c(k,!1,!0),__kbproxy:c(w,!1,!0),_stopChange:c(!1,!0)});k.__proto__=D.prototype;e=0;for(g=d.length;e<g;e++)w.set(d[e],b[d[e]]);k.__kbevents.addlistener=[];k.__kbevents.removelistener=[];k.addActionListener("addlistener",function(b){if("string"===
typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],e=g.point.getLayer(g.keys);if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==e[g.keys.split(".").pop()])e[b.arguments[2]](g.keys.split(".").pop(),b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var g=b.local.__kbpointers[b.arguments[0]],e=g.point.getLayer(g.keys);
if(void 0!==e[b.arguments[0]])e[b.arguments[2]](b.arguments[0],b.arguments[1]);else if(void 0!==e[localPointerkeys.split(".").pop()])e[b.arguments[2]](g.keys.split(".").pop(),b.arguments[1])}});return w}function q(b,e,g,f,k,w,d,l){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=e;this.arguments=w;this.type=this.event=g;this.listener=d;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=
b.__kbImmediateParent;this.value=f;this.oldValue=k;this.stopChange=l}function c(b,e,g,f){return{value:b,writable:!!e,enumerable:!!f,configurable:!!g}}function T(b,e,g){return{get:function(){return b.call(this)},set:function(g){e&&(b=g)},enumerable:!1,configurable:!!g}}function Q(b,e){var g=e,f=e;return{get:function(){return g},set:function(e){var w=new q(this,b,"set",e,g,arguments,"__kblisteners",this._stopChange);!0!==d(w)&&(f=g,g=e,w.stopChange||(w.listener="__kbupdatelisteners",w.type="postset",
d(w)),this.callSubscribers(this.__kbref,this,b,g,f,this._stopChange));this._stopChange=!1},configurable:!0,enumerable:!0}}function U(){var b=Array.prototype.slice.call(arguments),e=b.shift();return{get:function(){return b.reduce(function(b,e){return b[e]},e)},set:function(g){var f=b.slice(0,b.length-1).reduce(function(b,g){return b[g]},e);(this._stopChange?f.stopChange():f)[b[b.length-1]]=g;this._stopChange=!1},enumerable:!0,configurable:!0}}function F(b,e){for(var g=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],f=[],k,w=0,d=g.length;w<d;w++)if(k=b[g[w].listener],L.call(k))for(var f=Object.keys(k),l=0,h=f.length;l<h;l++)for(var c=0,m=k[f[l]].length;c<m;c++)e[g[w].method](f[l],k[f[l]][c]);else for(l=0,h=k.length;l<h;l++)e[g[w].method](k[l])}function P(b,e,g){var f=K(b,
e);if(f||"length"===e||"__kbsetindex"===e)if(f&&"object"===typeof g&&!p(g))b.set(e,g);else{if("length"===e)if(g>b.length&&void 0!==b[g-1])b.length=g;else{if(g<b.length){e=g;for(f=b.length;e<f;e++)b[e]&&delete b[e];b.length=g}}else b[e]=g;return!0}else b.set(e,g)}function V(b,e){b.del(e);return!0}function R(b,e,g){var f=p(g),k=L(g),w=E(g);if(f&&g.__kbname!==b.__kbname)"default"===g.__kbname?b.merge(g,e):b.__kbpointers[e]||b.addPointer(g,e);else{var f=new q(this,e,"create",g,void 0,[],"__kbcreatelisteners",
this._stopChange),l=d(f),h=parseInt(e,10);if(!0!==l)if((k||w)&&0!==Object.keys(g,"all").length)for(R.call(this,b,e,{}),k=0,w=Object.keys(g,"all"),f=w.length;k<f;k++)R.call(this[e],b[e],w[k],g[w[k]]);else{if(k||w)g=new D(g,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+e),F(b,g);Object.defineProperty(b,e,Q(e,g));!isNaN(h)&&b.length<=h&&(b.length=h+1);f.listener="__kbupdatelisteners";f.type="postcreate";d(f)}}}function N(b,e,g,f){var k=p(g),w=L(g),d=E(g);if(k&&g.__kbname!==b.__kbname)"default"===
g.__kbname?b.merge(g,e):b.__kbpointers[e]||b.addPointer(g,e);else if(void 0===b[e])-1===J.indexOf(e)?R.call(this,b,e,g):(f?b.stopChange():b)[e]=g;else if(w||d)for(k=0,w=Object.keys(g,"all"),d=w.length;k<d;k++)N.call(this[e],b[e],w[k],g[w[k]],f);else(f?b.stopChange():b)[e]=g}function O(b){return l.call(b).replace(/(\[object\s|\])/g,"").toLowerCase()}function L(b){return"object"===O(void 0!==b?b:this)}function E(b){return"array"===O(void 0!==b?b:this)}function p(b){return"mixed"===O(void 0!==b?b:this)}
function K(b,e){var g=n(b,e);return g?void 0===g.value:!1}function M(b,e){function g(b){var g=parseFloat(b,10),e="true"===b,f=b.indexOf('"'),k=b.lastIndexOf('"');if(isNaN(g)||g.toString().length!==b.length){if(e||"false"===b)return e;b=0===f&&0!==k?b.substring(1,b.length-1):b.substring(1,b.length)}else return g;return b}var f=this.__kbnonproxy;split=b.split(/({"|,"(?=(?:[^"]|"[^"]*")*$)|\[(?=(?:[^"]|"[^"]*")*$)|\](?=(?:[^"]|"[^"]*")*$)|":|"}|{(?=(?:[^"]|"[^"]*")*$)|,(?=(?:[^"]|"[^"]*")*$)|}(?=(?:[^"]|"[^"]*")*$))/).filter(Boolean);
UKeys=[];isValue=isKey=!1;v="";for(var k=1,d=split.length,l,h,c,m;k<d;k++)l=split[k],h=split[k-1],c=split[k+1],m=UKeys[UKeys.length-1],'":'===h&&'{"'===l||'":'===h&&"["===l?(v+=(0!==v.length?".":"")+m,f[m]||f.set(m,e?e(m,{},v,f):{}),f=f[m],UKeys.pop()):"["===h||","===h&&0!==f.length?"{"===l||'{"'===l?(v+=(0!==v.length?".":"")+f.__kbsetindex,"object"!==typeof f[f.__kbsetindex]&&f.set(f.__kbsetindex,e?e(f.length,{},v,f):{}),f.__kbsetindex+=1,f=f[f.__kbsetindex-1]):(f.set(f.__kbsetindex,e?e(f.length,
g(l),v,f):g(l)),f.__kbsetindex+=1):'":'===h?(f.set(m,e?e(m,g(l),v,f):g(l)),UKeys.pop()):'{"'===h||","===h&&'":'===c?UKeys[UKeys.length]=l.replace(/\"/g,""):"}"!==h&&"]"!==h||void 0===l||(v=-1!==v.indexOf(".")?v.substring(0,v.lastIndexOf(".")-1):"",f=f.__kbImmediateParent);return this}function H(b,e){"number"===typeof b&&(b=b.toString());var g=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var f=new q(this,b,"set",e,this[b],arguments,
"__kbmethodlisteners");!0!==d(f)&&(N.call(this,g,b,e,this._stopChange),this.stopChange=void 0,f.type="postset",f.listener="__kbmethodupdatelisteners",d(f));return this}function C(b){return b.split(".")}function G(b,e){return function(g,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=this[e],w=new q(this,e,"addlistener",k,void 0,arguments,"");"string"===typeof g&&1!==C(g).length&&(k=C(g),g=k.pop(),k=k.join("."),w.local=this.getLayer(k),k=w.local[e],w.value=k);!0!==d(w)&&
(L.call(k)?(void 0===k[g]&&(k[g]=[]),k[g].push(f),w.type="postaddlistener",d(w)):E.call(k)&&"function"===typeof g&&(k.push(g),w.type="postaddlistener",d(w)));return this}}function I(b,e){return function(g,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=this[e],w=new q(this,e,"removelistener",k,void 0,arguments,"");"string"===typeof g&&1!==C(g).length&&(k=C(g),k.pop(),k.join("."),w.local=this.getLayer(k),k=w.local[e],w.value=k,g=C(g).pop());if(!0!==d(w))if(L.call(k)){if(void 0!==
k[g])for(var l=0,h=k[g].length;l<h;l++)if(k[g][l].toString()===f.toString()){k[g].splice(l,1);w.type="postremovelistener";d(w);break}}else if(E.call(k)&&"function"===typeof g)for(l=0,h=k.length;l<h;l++)if(k[l].toString()===g.toString()){k.splice(l,1);w.type="postremovelistener";d(w);break}return this}}function z(b,e){function g(b,e,d){var l=Object.keys(this,"all").filter(function(b){return p.call(this[b])}.bind(this)),h=this,c=b;"string"===typeof b&&1!==C(b).length&&(h=C(b),c=h.pop(),h=h.join("."),
h=this.getLayer(h),void 0===h[d][c]&&(h[d][c]=[]),h[d][c].push(e));L.call(h[d])?(void 0===h[d][c]&&(h[d][c]=[]),h[d][c].push(e),h=h.__kbpointers[c],h=h.point.getLayer(h.keys),void 0!==h[c]&&(void 0===h[d][c]&&(h[d][c]=[]),h[d][c].push(_func))):h[d].push(e);c=0;for(h=l.length;c<h;c++)g.call(this[l[c]],b,e,d)}return function(f,k){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new q(this,e,"addchildlistener",void 0,void 0,arguments,"");!0!==d(l)&&(g.call(this.__kbnonproxy,f,
k,e),l.type="postaddchildlistener",d(l));return this}}function y(b,e){function g(b,e,d){var l=Object.keys(this,"all").filter(function(b){return p.call(this[b])}.bind(this)),h=this,c=b;if("string"===typeof b&&1!==C(b).length){var m=C(b),c=m.pop();m.join(".");h=this.getLayer(m);if(void 0!==h[d][b])for(var m=0,n=h[d][b].length;m<n;m++)if(h[d][b][m].toString()===e.toString()){h[d][b].splice(m,1);break}}if(L.call(h[d])){if(void 0!==h[d][c]){m=0;for(n=h[d][c].length;m<n;m++)if(h[d][c][m].toString()===e.toString()){h[d][c].splice(m,
1);break}if(-1!==h.__kbpointers.indexOf(c)&&(m=h.__kbpointers[c],h=m.point.getLayer(m.keys),void 0!==h[d][c]))for(m=0,n=h[d][c].length;m<n;m++)if(h[d][c][m].toString()===e.toString()){h[d][c].splice(m,1);break}}}else for(m=0,n=h[d].length;m<n;m++)if(h[d][m].toString()===e.toString()){h[d].splice(m,1);break}m=0;for(n=l.length;m<n;m++)g.call(this[l[m]],b,e,d)}return function(f,k){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new q(this,e,"removechildlistener",void 0,void 0,
arguments,"");!0!==d(l)&&(g.call(this.__kbnonproxy,f,k,e),l.type="postremovechildlistener",d(l));return this}}var u={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],
postremovechildlistener:[]},J=["__proto__","_stopChange"],r=function(b,e){if(!e._stopPropogration&&b)for(var g=0,f=b.length;g!==f&&(b[g](e),!e._stopPropogration);g++);},d=function(b){if(b.listener){var e=b.local[b.listener],g=b.local[b.listener.replace("__kb","__kbparent")];L.call(e)?(r(e[b.key],b),r(e["*"],b)):r(e,b);L.call(g)?(r(g[b.key],b),r(g["*"],b)):r(g,b)}r(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault},h=Array.prototype.sort,m=Array.prototype.slice,l,n=Object.getOwnPropertyDescriptor;
Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof D?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,e){return Object._keys(b).filter(function(b){return e&&"object"!==e&&"o"!==e?"all"===e?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};l={}.toString;Object.defineProperties(D.prototype,{"typeof":c(O,!1,!0),sizeof:c(function(b){function e(b){for(var k=
Object.keys(b,"all"),d=0,l=void 0,h=0,c=k.length;h<c;h++)l=b[k[h]],"object"===typeof l&&void 0!==l&&null!==l?-1===g.indexOf(l)&&(g.push(l),d+=e(l)):"string"===typeof l?d+=2*l.length:"number"===typeof l?d+=8:"boolean"===typeof l?d+=4:"function"===typeof l&&(d+=2*l.toString().length),d+=2*k[h].length;return d}var g=[];return e(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:c(L,!1,!0),isArray:c(E,!1,!0),isMixed:c(p,!1,!0),isObservable:c(K,!1,!0),stringify:c(function(b){var e=[];return JSON.stringify(b||
this,function(b,f){if(E(f)||L(f)){if(-1!==e.indexOf(f))return;e.push(f)}return f})},!1,!0),getKeys:c(function(b,e){e="string"===typeof b?b:e?e:"object";return Object.keys("string"===typeof b||void 0===b?this:b,e)},!1,!0),getIndexes:c(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var e=[],g=0,f=b.length;g<f;g++)void 0!==b[g]&&(e[e.length]=g);return e},!1,!0),keyCount:T(function(){return this.getKeys("object").length},!1,!0),indexCount:T(function(){return this.length},!1,!0),count:T(function(){return this.keyCount+
this.indexCount},!1,!0),concat:c(Array.prototype.concat),every:c(Array.prototype.every),filter:c(Array.prototype.filter),find:c(Array.prototype.find),findIndex:c(Array.prototype.findIndex),forEach:c(Array.prototype.forEach),includes:c(Array.prototype.includes),indexOf:c(Array.prototype.indexOf),join:c(Array.prototype.join),lastIndexOf:c(Array.prototype.lastIndexOf),map:c(Array.prototype.map),reduce:c(Array.prototype.reduce),reduceRight:c(Array.prototype.reduceRight),slice:c(Array.prototype.slice),
some:c(Array.prototype.some),entries:c(Array.prototype.entries),toLocaleString:c(Array.prototype.toLocaleString),parse:c(M,!0),parseReplace:c(function(b,e){return M.call(e||this,b)},!0),add:c(function(b,e){H.call(this,b,e);return this}),set:c(H),get:c(function(b){"number"===typeof b&&(b=b.toString());var e=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(e)return e[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),
del:c(function(b,e){var g="number"===typeof b||!isNaN(parseInt(b,10));g&&(b=b.toString());var f=-1!==b.indexOf(".")?this.getLayer(b):this,k=b.split(".").pop();if(f&&void 0!==f[k])if(g&&f.length>parseInt(b,10)&&!e)f=f.__kbnonproxy,f.splice(k,1);else{var l=new q(f,b,"delete",f[k],void 0,[],"__kbmethodlisteners"),h=d(l),m=new q(f,b,"delete",f[k],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==d(m)&&!0!==h&&(f=f.__kbnonproxy,Object.defineProperty(f,k,c(void 0,!0,!0,!1)),delete f[k],g&&f.length>
parseInt(b,10)&&e&&--f.length,l.type="postdelete",l.listener="__kbmethodupdatelisteners",d(l),m.listener="__kbupdatelisteners",m.type="postdelete",m.oldValue=m.value,m.value=void 0,d(m))}return this}),exists:c(function(b){function e(b,f){return 1!==b.length?void 0!==f[b[0]]?e(b.slice(1,b.length),f[b[0]]):!1:void 0!==f[b[0]]}return e(b.split("."),this.__kbnonproxy)}),addPrototype:c(function(b,e){var g=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());
void 0===g[b]?Object.defineProperty(g.__proto__,b,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,g);return this}),addPointer:c(function(){var b=Array.prototype.slice.call(arguments),e=b.shift(),g=e.exists(b.join("."))?b[b.length-1]:b.pop();e instanceof D||(e=new D(e,e.__kbname));var f=new q(this,g,"create",e[g],void 0,[],"__kbcreatelisteners",this._stopChange),k=this.__kbnonproxy;f.root=e.__kbref.__kbproxy;if(!0!==d(f)){Object.defineProperty(k,
g,U.apply(k,[e].concat(b)));k.__kbpointers[g]={keys:b.join("."),point:e};var b=k,e=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],k=[],l;if(b[g]&&b[g].__kbImmediateParent)for(var h=0,c=e.length;h<c;h++){l=b[e[h].listener];for(var k=Object.keys(l),m=0,n=k.length;m<n;m++)if(g===k[h])for(var z=0,y=l[k[h]].length;z<y;z++)void 0===b[g].__kbImmediateParent[e[h].listener][g]&&(b[g].__kbImmediateParent[e[h].listener][g]=[]),b[g].__kbImmediateParent[e[h].listener][g].push(l[k[h]][z])}F(b,
b[g]);f.listener="__kbupdatelisteners";f.type="postcreate";d(f)}return this}),move:c(function(b,e){this.__kbnonproxy.set(e,b[e]);p(b)?b.del(e):(b[e]=null,delete b[e]);return this}),copy:c(function(b,e){var g=this.__kbnonproxy;p(b)?"default"===b.__kbname?g.merge(b[e],e):g.addPointer(b,e):g.set(e,b[e]);return this}),merge:c(function(b,e){function g(b,e){for(var k=p(b)?b.keys("object"):Object.keys(b),d,l=0,h=k.length;l<h;l++)d=b[k[l]],"object"===typeof d&&-1===f.indexOf(d)&&"undefined"!==e[k[l]]?g(d,
e):void 0===e[k[l]]&&e.set(k[l],"object"===typeof d?{}:d)}var f=[],k=this.__kbnonproxy;e&&void 0===k[e]&&k.set(e,{});g(b,e?k[e]:k);return this}),replace:c(function(b,e){function g(b,e){var k=p(b)?b.keys("object"):Object.keys(b),d;d=b[k[x]];"object"===typeof d&&-1===f.indexOf(d)&&"undefined"!==e[k[x]]?g(d,e):e.set(k[x],"object"===typeof d?{}:d)}var f=[],k=this.__kbnonproxy;e&&void 0===k[e]&&k.set(e,{});g(b,e?k[e]:k);return this}),copyWithin:c(function(b,e,g){e=e||0;g=g||0;var f=new q(this,b,"copyWithin",
this[b],void 0,arguments,"__kbmethodlisteners"),k=this.__kbnonproxy;if(!0!==d(f)&&b<k.length){b=0>b?k.length-1:b;e=e<k.length?e:k.length-1;g=g<k.length?g:k.length-1;e=0>e?k.length-1:e;g=0>e?k.length-1:g;for(var l=e;l<=g;l++)k.set(b+(l-e),k[l]);f.type="postcopyWithin";f.listener="__kbmethodupdatelisteners";d(f)}return this}),fill:c(function(b,e,g){e=void 0!==e?Math.max(0,e):0;g=void 0!==g&&g<=this.length?Math.min(this.length,Math.max(0,g)):this.length;var f=new q(this,_start,"fill",this[_start],void 0,
arguments,"__kbmethodlisteners"),k=this.__kbnonproxy;if(!0!==d(f)){for(var l=a.key;l<g;l++)k[l]=b;f.type="postfill";f.listener="__kbmethodupdatelisteners";d(f)}return this}),pop:c(function(){var b=new q(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==d(b)){var g=e[e.length-1];e.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";d(b);return g}return null}),push:c(function(b){var e=new q(this,this.length,"push",
b,void 0,arguments,"__kbmethodlisteners"),g=this.__kbnonproxy;!0!==d(e)&&(g.set(g.length,b),e.type="postpush",e.listener="__kbmethodupdatelisteners",d(e));return this.length}),reverse:c(function(){var b=new q(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==d(b)){for(var g=null,f=null,k=e.length,g=0;g<k/2;g+=1){var f=k-1-g,l=e[g];e[g]=e[f];e[f]=l}b.type="postreverse";b.listener="__kbmethodupdatelisteners";d(b)}return this}),shift:c(function(){var b=
new q(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==d(b)){for(var g=a.key,f=this.length-1;g<f;g++)e[g]=e[g+1];e.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";d(b)}return null}),sort:c(function(){var b=new q(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==d(b)){var g=m.call(e);h.apply(g,arguments);for(var f=0,k=g.length;f<k;f++)e[f]=g[f];b.type="postsort";b.listener="__kbmethodupdatelisteners";
d(b)}return this}),splice:c(function(b,e,g){b="string"===typeof b?parseInt(b,10):b;var f=new q(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),k=this.__kbnonproxy;if(!0!==d(f)){var l=[],h=Array.prototype.slice.call(arguments,2),c=h.length-2,m=0;if(0!==e&&void 0!==k[b-1+e])for(var n=0,z=e;n<z;n++){l.push(k[b+n]);for(var y=b+n,u=this.length-1;y<u;y++)k[y]=k[y+1];k.del(k.length-1,!0)}if(0!==c)for(n=0,z=c;n<z;n++){m=b+Math.min(1,n);y=k.length;for(u=m;y>u;y--)k.set(y,k[y-1]);k.set(m,h[n])}f.type=
"postsplice";f.listener="__kbmethodupdatelisteners";d(f);return l}return[]}),unshift:c(function(){var b=new q(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==d(b)){for(var g=Array.prototype.slice.call(arguments),f=e.length-1+g.length,k=g.length;-1!==f;f--)f<k?e.set(f,g[f]):e.set(f,e[f-g.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";d(b)}return this.length}),getLayer:c(function(b){function e(b){var f=b[0];return void 0===this[f]&&
0!==b.length-1?null:p(this[f])?0!==b.length-1?(b.shift(),e.call(this[f],b)):this[f]:this}b=C(b);return e.call(this,b)}),setLayer:c(function(b){function e(b){var f=b[0];void 0===this[f]&&0!==b.length-1&&(this[f]=D({},this.__kbname,this,this.__kbscopeString+"."+f));return p(this[f])?0!==b.length-1?(b.shift(),e.call(this[f],b)):this[f]:this}b=C(b);return e.call(this,b)}),ignoreCreate:c(function(b){-1===J.indexOf(b)&&J.push(b);return this}),addActionListener:c(function(b,e){var g=this.__kbnonproxy;void 0!==
g.__kbref.__kbevents[b]&&g.__kbref.__kbevents[b].push(e);return this}),removeActionListener:c(function(b,e){var g=this.__kbnonproxy;if(void 0!==g.__kbref.__kbevents[b])for(var f=0,k=g.__kbref.__kbevents[b];f<k;f++)if(g.__kbref.__kbevents[b][f].toString()===e.toString()){g.__kbref.__kbevents[b].splice(f,1);break}return this}),subscribe:c(function(b,e){var g=b.split("."),f=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;void 0===g.__kbsubscribers[f]&&(g.__kbsubscribers[f]=
[]);g.__kbsubscribers[f].push(e);return this}),unsubscribe:c(function(b,e){var g=b.split("."),f=g.pop(),g=0!==g.length?this.__kbnonproxy.getLayer(g.join(".")):this.__kbnonproxy;if(void 0!==g.__kbsubscribers[f])for(var k=0,d=g.__kbsubscribers[f].length;k<d;k++)if(g.__kbsubscribers[f][k].toString()===e.toString()){g.__kbsubscribers[f].splice(k,1);break}return this}),subscribeDeep:c(function(b,e){function g(b,f){var k=Object.keys(b,"all").filter(function(e){return p.call(b[e])}.bind(b));if(void 0!==
b[f]||"*"===f)void 0===b.__kbparentsubscribers[f]&&(b.__kbparentsubscribers[f]=[]),b.__kbparentsubscribers[f].push(e);for(var d=0,l=k.length;d<l;d++)g(b[k[d]],f)}var f=-1!==b.indexOf("*"),k=b.split(".");k.slice(0,k.indexOf("*"));var d=-1!==k.indexOf("*")?k.slice(k.indexOf("*"),k.length):[],l=1===d.length,h=k.pop(),k=0!==k.length?this.__kbnonproxy.getLayer(k.join(".")):this.__kbnonproxy;f?l?g(k,"*"):(d.shift(),k.subscribeDeep(d.join("."),e)):g(k,h);return this}),unsubscribeDeep:c(function(b,e){function g(b,
f){var k=Object.keys(b,"all").filter(function(e){return p.call(b[e])&&!(b[e]instanceof HTMLElement)}.bind(b));if((void 0!==b[f]||"*"===f)&&void 0!==b.__kbparentsubscribers[f])for(var d=0,l=b.__kbparentsubscribers[f].length;d<l;d++)b.__kbparentsubscribers[f][d].toString()===e.toString()&&b.__kbparentsubscribers[f].splice(d,1);d=0;for(l=k.length;d<l;d++)g(b[k[d]],f)}var f=-1!==b.indexOf("*"),k=b.split(".");k.slice(0,k.indexOf("*"));var d=-1!==k.indexOf("*")?k.slice(k.indexOf("*"),k.length):[],l=1===
d.length,h=k.pop(),k=0!==k.length?this.__kbnonproxy.getLayer(k.join(".")):this.__kbnonproxy;f?l?g(k,"*"):(d.shift(),k.unsubscribeDeep(d.join("."),e)):g(k,h);return this}),callSubscribers:c(function(b,e,g,f,d,l){var h=this.__kbnonproxy;if(void 0!==h.__kbsubscribers[g])for(var c=0,m=h.__kbsubscribers[g].length;c<m;c++)h.__kbsubscribers[g][c].call(this,{key:g,value:f,oldValue:d,stopChange:l,local:e,kbref:b});if(void 0!==h.__kbparentsubscribers[g])for(c=0,m=h.__kbparentsubscribers[g].length;c<m;c++)h.__kbparentsubscribers[g][c].call(this,
{key:g,value:f,oldValue:d,stopChange:l,local:e,kbref:b});if(void 0!==h.__kbsubscribers["*"])for(c=0,m=h.__kbsubscribers["*"].length;c<m;c++)h.__kbsubscribers["*"][c].call(this,{key:g,value:f,oldValue:d,stopChange:l,local:e,kbref:b});if(void 0!==h.__kbparentsubscribers["*"])for(c=0,m=h.__kbparentsubscribers["*"].length;c<m;c++)h.__kbparentsubscribers["*"][c].call(this,{key:g,value:f,oldValue:d,stopChange:l,local:e,kbref:b});return this}),callAllSubscribers:c(function(){function b(b,g,f){for(var d=
0,l=g.length;d<l;d++)g[d].call(b,{key:f,value:b[f],oldValue:b[f],stopChange:!1,local:b,kbref:b.__kbref,initial:!0})}(function(e){for(var g=Object.keys(e.__kbsubscribers),f=Object.keys(e.__kbparentsubscribers),d=0,l=g.length;d<l;d++)if(0!==e.__kbsubscribers[g[d]].length)if("*"===g[d])for(var h=0,c=Object.keys(e),m=c.length;h<m;h++)b(e,e.__kbsubscribers[g[d]],c[h]);else b(e,e.__kbsubscribers[g[d]],g[d]);d=0;for(l=f.length;d<l;d++)if(0!==e.__kbparentsubscribers[f[d]].length)if("*"===f[d])for(h=0,c=Object.keys(e),
m=c.length;h<m;h++)b(e,e.__kbparentsubscribers[f[d]],c[h]);else b(e,e.__kbparentsubscribers[f[d]],f[d])})(this.__kbnonproxy);return this}),stopChange:c(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(D.prototype,{addDataListener:c(G("addDataListener","__kblisteners")),removeDataListener:c(I("removeDataListener","__kblisteners")),addDataUpdateListener:c(G("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(I("removeDataUpdateListener","__kbupdatelisteners")),
addDataCreateListener:c(G("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:c(I("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:c(G("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:c(I("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:c(G("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:c(I("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:c(G("addDataMethodUpdateListener",
"__kbmethodupdatelisteners")),removeDataMethodUpdateListener:c(I("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:c(z("addChildDataListener","__kbparentlisteners")),removeChildDataListener:c(y("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:c(z("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:c(y("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:c(z("addChildDataCreateListener",
"__kbparentcreatelisteners")),removeChildDataCreateListener:c(y("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:c(z("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:c(y("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return D}}(),Z=function(){return function(){function B(v){if("object"===typeof v)for(var D=0,q=v.length;D<q;D++)K_Components[v[D]]?t(v[D],K_Components[v[D]],document.getElementById("script_"+
v[D])):B.load(v[D],"component/"+v[D]+"/"+location.search,t);else"string"===typeof v&&(K_Components[v[D]]?t(v,K_Components[v],document.getElementById("script_"+v)):B.load(v,"component/"+v+"/"+location.search,t))}var t=function(){},A=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});B.getUnknowns=function(v){var t=v.match(A);return t.map(function(q){return q.replace(/[<\/>]/g,"")}).filter(function(q,c){return document.createElement(q)instanceof HTMLUnknownElement&&-1===t.indexOf(q,c+1)&&!K_Components[q]})};
B.load=function(v,t,q){document.head.appendChild(function(c,q,t){var v=document.createElement("script");v.type="text/javascript";v.charset="utf-8";v.async=!0;v.src=q;v.id="script_"+c;v.onload=function(){t(c,K_Components[c],this)};return v}(v,t,q));return B};B.onLoad=function(v){if(void 0===v)return t;t="function"===typeof v?v:t;return B};return B}}(),X=function(){function B(){function t(d,h){var c=d.length,l;for(l=0;l<c&&(d[l](h),void 0===h._stopPropogation);l++);}function A(d,h){var c=d.length,l;
for(l=0;l<c&&(h.child=h.target,h.target=d[l].parent,d[l].func(h),void 0===h._stopPropogation);l++);}function v(d,h){for(var c=d.length;0<c;u++)if(d[u].toString()===h.toString())return!0;return!1}function D(d,h,c,l,n,b,e,g){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=l;this.target=d;this.attr=h;this.arguments=n;this.action=b;this.child=void 0;this.type=e;this.stopChange=g}function q(){this._attrListeners=
{};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function c(d,h,c,l){var n=d.get,b=d.set,e;return function(g){e=n.call(this);c(this,h,g,e,void 0,this._stopChange)&&b.call(this,g);this._stopChange||l(this,h,g,e);this._stopChange=void 0}}function B(d,h,c,l){var n;return function(b){n=d.value;c(this,h,b,n,arguments,
this._stopChange)&&(d.value=b);this._stopChange||l(this,h,b,n,arguments);this._stopChange=void 0}}function Q(d,h,c,l){var n=d.value,b;return function(){c(this,h,null,null,arguments,this._stopChange)&&(b=n.apply(this,arguments));this._stopChange||l(this,h,null,null,arguments,b);this._stopChange=void 0;return b}}function U(d,h,c,l,n){var b=n.style,e=h.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),g,f;return{get:function(){return f},set:function(d){g=f;c(n,h,d,g,void 0,this._stopChange)&&(f=
d,b.setProperty(e,d));this._stopChange||l(n,h,d,g);this._stopChange=void 0},enumerable:!0,configurable:!0}}function F(d,h,c,l){if("function"!==typeof h)return p;var n=-1!==["value","checked"].indexOf(d),b=-1!==z.indexOf(d),e;if(this.toString()!==p.toString())if(c){var g=this.querySelectorAll("*");c=g.length;for(var f,k=0;k<c;k++){f=g[k].attrListeners();if(n||"*"===d)void 0!==g[k].addInputBinding&&g[k].addInputBinding(),void 0!==g[k].addInputBoxBinding&&g[k].addInputBoxBinding();if(b)p.injectStyleProperty(g[k],
d),e=l?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===d){e=l?"_parentStyleUpdateListeners":"_parentStyleListeners";c=z.length;for(var w=0;w<c;w++)p.injectStyleProperty(g[k],z[w]);void 0===f[e]["*"]&&(f[e]["*"]=[]);f[e]["*"].push({parent:this,func:h})}e=l?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===f[e][d]&&(f[e][d]=[]);f[e][d].push({parent:this,func:h})}}else{f=this.attrListeners();if(b)e=l?"_styleUpdateListeners":"_styleListeners",p.injectStyleProperty(this,
d);else{if(n||"*"===d)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===d){e=l?"_styleUpdateListeners":"_styleListeners";c=z.length;for(k=0;k<c;k++)p.injectStyleProperty(this,z[k]);void 0===f[e][d]&&(f[e][d]=[]);f[e][d].push(h)}e=l?"_attrUpdateListeners":"_attrListeners"}void 0===f[e][d]&&(f[e][d]=[]);f[e][d].push(h)}else{if(n||"*"===d)for(w=document.querySelectorAll("input, textarea"),c=w.length,k=0;k<c;k++)void 0!==w[k].addInputBinding&&
w[k].addInputBinding(),void 0!==w[k].addInputBoxBinding&&w[k].addInputBoxBinding();if(b){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=b.length+1;b.unshift(document.body);for(k=0;k<c;k++)p.injectStyleProperty(b[k],d);e=l?C:H}else{if("*"===d){b=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=b.length+1;n=z.length;b.unshift(document.body);for(k=0;k<c;k++)for(w=0;w<n;w++)p.injectStyleProperty(b[k],z[w]);e=l?C:H;void 0===e[d]&&(e[d]=[]);e[d].push(h)}e=l?M:K}void 0===
e[d]&&(e[d]=[]);e[d].push(h)}}function P(d,h,c,l){function n(b,g){var f=g[b],d=f.length;for(e=0;e<d;e++)f[e].toString()===h.toString()&&f.splice(e,1)}if("function"!==typeof h)return p;["value","checked"].indexOf(d);var b=-1!==z.indexOf(d),e;if(this.toString()!==p.toString())if(c){c=this.querySelectorAll("*");var g=c.length;b?(b=l?"_childStyleUpdateListeners":"_childStyleListeners",n(d,this.attrListeners()[b]),b=l?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===d&&(b=l?"_childStyleUpdateListeners":
"_childStyleListeners",n(d,this.attrListeners()[b])),b=l?"_childAttrUpdateListeners":"_childAttrListeners",n(d,this.attrListeners()[b]),b=l?"_parentAttrUpdateListeners":"_parentAttrListeners");for(e=0;e<g;e++){for(var f=c[e].attrListeners()[b][d],k=f.length,w=0;w<k;w++)f[w].isEqualNode(this)&&f.slice(w,1);if("*"===d)for(listenersStyle=l?"_parentStyleUpdateListeners":"_parentStyleListeners",f=c[e].attrListeners()[b][d],k=f.length,w=0;w<k;w++)f[w].isEqualNode(this)&&f.slice(w,1)}}else b?b=l?"_styleUpdateListeners":
"_styleListeners":("*"===d&&(b=l?"_styleUpdateListeners":"_styleListeners",n(d,this.attrListeners()[b])),b=l?"_attrUpdateListeners":"_attrListeners"),n(d,this.attrListeners()[b]);else b?b=l?C:H:("*"===d&&(b=l?C:H,n(d,b)),b=l?M:K),n(d,b)}function V(d,h){p.addAttrListener.call(this,d,h,!0);return this}function R(d,h){p.addAttrUpdateListener.call(this,d,h,!0);return this}function N(d,h){p.removeAttrListener.call(this,d,h,!0);return this}function O(d,h){p.removeAttrUpdateListener.call(this,d,h,!0);return this}
function L(d,h,c){var l=this.attrListeners();"html"===h&&(h="innerHTML");"events"===h&&(h="onclick");switch(d){case "attr":if(v(l._attrListeners[h],c))return!0;break;case "attrupdate":if(v(l._attrUpdateListeners[h],c))return!0}return!1}function E(){this._stopChange=!0;return this}function p(){function d(b,e){var d,l=e.length;for(d=0;d<l;d++)-1===b.indexOf(e[d])&&b.push(e[d]);return b}function h(b,e){for(var d=Object.keys(b),l,h,c=0,m=d.length;c<m;c++)if(l=d[c],void 0===e[l])e[l]=b[l].slice();else for(var n=
0,z=b[l].length;n<z;n++)h=b[l][n],e[l].push(h)}function c(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),l,m=["value","checked"],n=e._attrListeners,y=e._attrUpdateListeners,u=e._parentAttrListeners;l=e._parentAttrUpdateListeners;var r=!1;if(void 0!==K["*"]||void 0!==M["*"])r=!0;if(!0!==r&&void 0!==n["*"]||void 0!==y["*"]||void 0!==u["*"]||void 0!==l["*"])r=!0;if(!0!==r)for(var q=0;q<m.length;q++)if(void 0!==K[m[q]]||void 0!==M[m[q]]||void 0!==n[m[q]]||void 0!==
y[m[q]]||void 0!==u[m[q]]||void 0!==l[m[q]]){r=!0;break}l=r;m=Object.keys(H);n=Object.keys(C);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);y=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);u=[];if(0!==m.length||0!==n.length)u=d(u,m),u=d(u,n);if(0!==u.length&&0!==y.length||0!==e.length)u=d(u,y),u=d(u,e);-1!==u.indexOf("*")&&(u=z);var e=u,m=e.length,v,J,n=[],t,y="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,u=b.target;void 0!==y&&(b.attr=
"appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(l){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(n=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||n.unshift(b.arguments[0])):n=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));t=n.length;for(var S=0;S<t;S++)void 0!==n[S].addInputBinding&&n[S].addInputBinding(),void 0!==
n[S].addInputBoxBinding&&n[S].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(n=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),n.unshift(b.arguments[0])):n=Array.prototype.slice.call(b.target.querySelectorAll("*"));l=b.target.__kb._parentAttrListeners;r=b.target.__kb._parentAttrUpdateListeners;q=b.target.__kb._parentStyleListeners;v=b.target.__kb._parentStyleUpdateListeners;t=n.length;for(S=0;S<t;S++){if(0!==m)for(J=
0;J<m;J++)p.injectStyleProperty(n[S],e[J]);J=n[S].attrListeners();h(l,J._parentAttrListeners);h(r,J._parentAttrUpdateListeners);h(q,J._parentStyleListeners);h(v,J._parentStyleUpdateListeners)}void 0!==y&&(b.attr=y,b.target=u,b.arguments=[])}}function l(e){var d=e.target.attributes[e.arguments[0]],l="setAttribute"===e.attr?e.arguments[1]:"";b(e.target,e.arguments[0],l,void 0!==d?d.value:"",[l])||e.preventDefault()}function n(b){var d=b.target.attributes[b.arguments[0]],l="setAttribute"===b.attr?b.arguments[1]:
"";e(b.target,b.arguments[0],l,void 0!==d?d.value:"",[l])}p.injectPrototypes(Node,"Node");p.injectPrototypes(Element,"Element");p.injectPrototypes(HTMLElement,"HTMLElement");p.injectPrototypes(HTMLInputElement,"HTMLInputElement");p.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");p.injectPrototypes(Document,"Document");var b=J,e=r;p.addAttrUpdateListener("appendChild",c);p.addAttrUpdateListener("removeChild",c);p.addAttrUpdateListener("innerHTML",c);p.addAttrUpdateListener("outerHTML",
c);p.addAttrUpdateListener("innerText",c);p.addAttrUpdateListener("outerText",c);p.addAttrUpdateListener("textContent",c);p.addAttrListener("setAttribute",l);p.addAttrListener("removeAttribute",l);p.addAttrUpdateListener("setAttribute",n);p.addAttrUpdateListener("removeAttribute",n);return p}var K={},M={},H={},C={},G={},I="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),z=Object.getOwnPropertyNames(document.documentElement.style),
y=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}).concat(["addEventListener","removeEventListener"]),u,J=function(d,h,c,l,n,b){c=new D(d,h,c,l,n,void 0,"set",b);void 0!==d.__kb&&(l=d.__kb._attrListeners,n=d.__kb._styleListeners,b=d.__kb._parentAttrListeners,d=d.__kb._parentStyleListeners,void 0!==l[h]&&t(l[h],c),void 0===c._stopPropogation&&void 0!==n[h]&&t(n[h],c),void 0===c._stopPropogation&&void 0!==l["*"]&&(t(l["*"],c),void 0===c._stopPropogation&&t(n["*"],c)),
void 0===c._stopPropogation&&void 0!==b[h]&&A(b[h],c),void 0===c._stopPropogation&&void 0!==d[h]&&A(d[h],c),void 0===c._stopPropogation&&void 0!==b["*"]&&(A(b["*"],c),void 0===c._stopPropogation&&A(d["*"],c)));void 0===c._stopPropogation&&void 0!==K[h]&&t(K[h],c);void 0===c._stopPropogation&&void 0!==H[h]&&t(H[h],c);void 0===c._stopPropogation&&void 0!==K["*"]&&(t(K["*"],c),void 0===c._stopPropogation&&t(H["*"],c));return void 0!==c._preventDefault?!1:!0},r=function(d,c,m,l,n,b){m=new D(d,c,m,l,n,
b,"update");void 0!==d.__kb&&(l=d.__kb._attrUpdateListeners,n=d.__kb._styleUpdateListeners,b=d.__kb._parentAttrUpdateListeners,d=d.__kb._parentStyleUpdateListeners,void 0!==l[c]&&t(l[c],m),void 0===m._stopPropogation&&void 0!==n[c]&&t(n[c],m),void 0===m._stopPropogation&&void 0!==l["*"]&&(t(l["*"],m),void 0===m._stopPropogation&&t(n["*"],m)),void 0===m._stopPropogation&&void 0!==b[c]&&A(b[c],m),void 0===m._stopPropogation&&void 0!==d[c]&&A(d[c],m),void 0===m._stopPropogation&&void 0!==b["*"]&&(A(b["*"],
m),void 0===m._stopPropogation&&A(d["*"],m)));void 0===m._stopPropogation&&void 0!==M[c]&&t(M[c],m);void 0===m._stopPropogation&&void 0!==C[c]&&t(C[c],m);void 0===m._stopPropogation&&void 0!==M["*"]&&(t(M["*"],m),void 0===m._stopPropogation&&t(C["*"],m));return void 0!==m._preventDefault?!1:!0};p.injectPrototypeProperty=function(d,h,m,l,n){var b=d.prototype,e=Object.getOwnPropertyDescriptor(b,h);m=m||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=G[m];l=l||J;n=n||r;void 0===b.attrListeners&&
(b={},b.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb}.bind(b),b.addAttrListener=p.addAttrListener,b.addAttrUpdateListener=p.addAttrUpdateListener,b.addChildAttrListener=V,b.addChildAttrUpdateListener=R,b.hasListener=L,b.removeAttrListener=p.removeAttrListener,b.removeAttrUpdateListener=p.removeAttrUpdateListener,b.removeChildAttrListener=N,b.removeChildAttrUpdateListener=O,b.stopChange=E);void 0===g&&(G[m]={obj:d,proto:b,descriptors:{},set:void 0,update:void 0},
g=G[m],g.set=l,g.update=n);void 0===g.descriptors[h]&&(g.descriptors[h]=e);e.configurable&&(void 0!==e.set?Object.defineProperty(b,h,{get:e.get,set:c(e,h,l,n),enumerable:!0,configurable:!0}):"function"===typeof e.value?Object.defineProperty(b,h,{value:Q(e,h,l,n),writable:!0,enumerable:!0,configurable:!0}):void 0!==e.value&&Object.defineProperty(b,h,{get:function(){return e.value},set:B(e,h,l,n),enumerable:!0,configurable:!0}));return p};p.injectStyleProperty=function(d,c,m,l){var n=d.style,b=Object.getOwnPropertyDescriptor(n,
c),e=d.attrListeners().injectedStyle;m=m||J;l=l||r;void 0===e&&(d.attrListeners().injectedStyle={obj:d,proto:n,descriptors:{},set:void 0,update:void 0},d.attrListeners().injectedStyle.set=m,d.attrListeners().injectedStyle.update=l,e=d.attrListeners().injectedStyle);void 0===e.descriptors[c]&&(e.descriptors[c]=b);b.configurable&&Object.defineProperty(n,c,U(b,c,m,l,d));return p};p.injectPrototypes=function(d,c,m,l){var n=d.prototype;c=c||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var b=
G[c],e=Object.getOwnPropertyNames(n);m=m||J;l=l||r;var g;void 0===n.attrListeners&&(n.attrListeners=function(){void 0===this.__kb&&(this.__kb=new q);return this.__kb},n.addAttrListener=p.addAttrListener,n.addAttrUpdateListener=p.addAttrUpdateListener,n.addChildAttrListener=V,n.addChildAttrUpdateListener=R,n.removeAttrListener=p.removeAttrListener,n.removeAttrUpdateListener=p.removeAttrUpdateListener,n.removeChildAttrListener=N,n.removeChildAttrUpdateListener=O,n.hasListener=L,n.stopChange=E);void 0===
b&&(G[c]={obj:d,proto:n,descriptors:{},set:void 0,update:void 0},b=G[c],b.set=m,b.update=l);g=G[c].descriptors;for(l=0;l<e.length;l+=1)void 0===g[e[l]]&&p.injectPrototypeProperty(d,e[l],c,m,r);if(-1!==e.indexOf("value")){var f=function(e){var d,f,l;if("checkbox"===this.type||"radio"===this.type)d=!0;f=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){l=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;d&&(b.set(this,
"checked",this.checked,f)?b.update(this,"checked",this.checked,f):g.checked.set.call(this,f));this.value!==l&&(this.value=l);b.set(this,"value",this.value,f)?b.update(this,"value",this.value,f):g.value.set.call(this,f)}.bind(this),0)};n.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",f)};n.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",f)};n.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=
void 0;this.removeEventListener("mouseup",f)};n.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",f)}}return p};p.addAttrListener=function(d,c,m){if("html"===d){d=0;for(var l=I.length;d<l;d++)F.call(this,I[d],c,m,!1)}else if("events"===d)for(d=0,l=y.length;d<l;d++)F.call(this,y[d],c,m,!1);else F.call(this,d,c,m,!1);return this};p.addAttrUpdateListener=function(d,c,m){if("html"===d){d=0;for(var l=I.length;d<l;d++)F.call(this,I[d],c,m,!0)}else if("events"===
d)for(d=0,l=y.length;d<l;d++)F.call(this,y[d],c,m,!0);else F.call(this,d,c,m,!0);return this};p.removeAttrListener=function(d,c,m){if("html"===d){d=0;for(var l=I.length;d<l;d++)P.call(this,I[d],c,m,!1)}else if("events"===d)for(d=0,l=y.length;d<l;d++)P.call(this,y[d],c,m,!1);else P.call(this,d,c,m,!1);return this};p.removeAttrUpdateListener=function(d,c,m){if("html"===d){d=0;for(var l=I.length;d<l;d++)P.call(this,I[d],c,m,!0)}else if("events"===d)for(d=0,l=y.length;d<l;d++)P.call(this,y[d],c,m,!0);
else P.call(this,d,c,m,!0);return this};p.hasListener=function(d,c,m){"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(d){case "attr":if(v(K[c],m))return!0;break;case "attrupdate":if(v(M[c],m))return!0}return!1};p.injectedPrototypes=function(){return G};return p}"function"===typeof define&&define.amd&&define("KB",B);return B}(),aa=function(B){return function(){function t(z){document.createDocumentFragment();this.name=z.tagName.toLowerCase();this.template=M[this.name]||'<div class="missing_component">Unknown Component</div>';
this.node=z;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name;if(this.template.match(D())||this.template.match(q())){z=c;var y,u=this.template;y=D();for(var u=u.split(y).filter(Boolean),p={},r=0,d,h,m=u.length;r<m;r++)u[r].match(y)&&(d=Q(u[r].substring(u[r].indexOf("<"),u[r].indexOf("}}"))+"}").replace(/[<>]/g,""),0===d.indexOf("/")&&p[d.replace("/","")]?(d=d.replace("/",""),h=
Object.keys(p[d],"array"),0!==h.length&&(h=h[h.length-1],u[h]="\x3c!--"+u[h],p[d].splice(parseInt(h,10),1),u[r]+="--\x3e",h=Object.keys(p[d],"array"),0===h.length&&(p[d]=null,delete p[d]))):(p[d]||(p[d]=[]),p[d][r]=u[r]));r=0;h=Object.keys(p);for(m=h.length;r<m;r++)for(y=Object.keys(p[h[r]],"array");r<m;r++)u[y[0]]="\x3c!--"+u[y[0]]+"--\x3e";y=u.join("");this.template=z(y)}}function A(c,y,u,p){return{value:c,writable:!!y,enumerable:!!p,configurable:!!u}}function v(){return new RegExp("(\\"+E.split("").join("\\")+
")(.*?)(\\"+p.split("").join("\\")+")","g")}function D(){return new RegExp("(<\\"+E.split("").join("\\")+".*?\\"+p.split("").join("\\")+".*?>|<\\/\\"+E.split("").join("\\")+".*?\\"+p.split("").join("\\")+">)","g")}function q(){return new RegExp("([^<\\/>\\'\\\"]\\"+E.split("").join("\\")+".*?\\"+p.split("").join("\\")+"=[\\'\\\"].*?[\\'\\\"])","g")}function c(c){var y=RegExp("(<.*?.*?>|</.*?>)","g"),u=q();c=c.split(y).filter(Boolean);for(var y=0,p=c.length;y<p;y++)if(c[y].match(u)){var r=c[y].split(u).filter(function(d){return d.match(u)}).join(" & ");
c[y]=c[y].replace(u,"").replace(">"," data-kbattr='"+r.replace(/['"]/g,'\\"')+"' >")}return c.join("")}function T(c){return c.split(new RegExp("("+E.split("").join("\\")+")(.*?)("+p.split("").join("\\")+")","g")).map(function(c,z,q){return q[z-1]===E?E+c+p:c}).filter(function(c,z,q){return 0!==c.length&&c!==E&&c!==p&&0!==c.length})}function Q(c){return c.replace(new RegExp("["+E+p+"]","g"),"").replace(new RegExp("(\\"+K.split("").join("\\")+"(.*?)+)","g"),"").replace(/\s/g,"")}function U(c){return c.reduce(function(c,
z){z.match(/(\()(.*?)(\))/)?c.vmFilters[c.vmFilters.length]=z.replace(/[\(\)]/g,""):z.match(/(\[)(.*?)(\])/)?-1!==z.indexOf("~")?c.model[c.model.length]=z.replace(/[\[\]\~]/g,""):-1!==z.indexOf("+")?c.local[c.local.length]=z.replace(/[\[\]\+]/g,""):c.session[c.session.length]=z.replace(/[\[\]\-]/g,""):c.filters[c.filters.length]=z;return c},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function F(c){return-1!==c.indexOf("for")?c.replace(new RegExp("["+E+p+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,
"").split(/for(.*?)loop/).filter(function(c){return 0!==c.length}):[]}function P(c){if(2>c.split("==").length&&2>c.split("<=").length&&2>c.split(">=").length&&-1!==c.indexOf("="))return c.substring(c.indexOf("=")+1,c.length)}function V(c){var p=c.match(/^(\s*)(>)((.*?)+)/),u=c.match(/^(\s*)(<)((.*?)+)/);c=c.replace(/(^<|^>)((.*?)+)/,"$2");var q=P(c),r=c.match(/((==|<=|>=|<|>)((.*?)+))/g),d=c.match(/(([\+\*-\/])((.*?)+))/g);return{type:p?"insert":u?"outsert":void 0,set:q!==c?q:void 0,filters:r||d?
{boolFilter:r?eval("(function(){ return function(v){ return (v"+r[0]+");};}())"):void 0,mathFilter:d?eval("(function(){ return function(v){ return (v"+d[0]+");};}())"):void 0}:void 0}}function R(c){if(0!==c.length){for(var p="",u=0,q=c.length;u<q;u++)if("string"===typeof c[u])p+=c[u];else if(void 0===c[u]._data)p+=c[u].text;else var r=c[u]._data.get(c[u].key),p=p+N(void 0!==r?r:"",c[u].filters.filters,c[u]._data.filters);return p}return N(c[0]._data.get(c[0].key)||"",c[0].filters.filters,c[0]._data.filters)}
function N(c,p,u){for(var q=0,r=p.length;q<r;q++)u[p[q]]&&(c=u[p[q]](c));return c}function O(c,p,u,q){for(var r=0,d=p.length;r<d;r++)if(u[p[r]])u[p[r]](c,q);return c}function L(){function c(d,h){var b=V(h);this.text=d;this.key=h.replace(/(^>|^<*)(.*?)([=*+-\/<>]+)((.*?)+)/g,b.filters?"$2":"$4").replace(/\s/g,"");this.keyLength=this.key.split(".").length;this.localKey=this.key.split(".").pop();var e;e=-1!==d.indexOf(K)?d.replace(new RegExp("["+p+"]","g"),"").replace(new RegExp("(.*?)(\\"+K.split("").join("\\")+
")"),"").replace(/\s/g,"").split(","):[];this.filters=U(e);this.component="for"===this.type?F(d)[1]:void 0;this.id=0;this.insert="insert"===b.type;this.outsert="outsert"===b.type;this.set=b.set;this.inlineFilters=b.filters;this.isBase=!1}function q(c,d){for(var b=0,e=d.length;b<e;b++)c.stopChange().appendChild(d[b])}function u(c){if(c&&window.model)return window.model.get(c[0])}function v(c,d){if(d&&0!==d.length&&window.model)for(var b=0,e=d.length;b<e;b++)window.model.set(d[b],c)}function r(c){if(c&&
window.localStorage)return localStorage.getItem(c[0])}function d(c,d){if(c&&0!==c.length&&window.localStorage)for(var b=0,e=c.length;b<e;b++)localStorage.setItem(c[b],d)}function h(c){if(c&&window.sessionStorage)return sessionStorage.getItem(c[0])}function m(c,d){if(c&&0!==c.length&&window.sessionStorage)for(var b=0,e=c.length;b<e;b++)sessionStorage.setItem(c[b],d)}Object.defineProperties(c.prototype,{addPointer:A(function(c){for(var d=document.createElement(this.component),b=O(this._data.getLayer(this.key),
this.filters.filters,this._data.filters,c)[c],e=0,g=Object.keys(b,"all"),f=g.length;e<f;e++)d.k_post||(d.k_post={}),d.k_post[g[e]]=b,d.k_post.x=c,d.k_post.loopid=this.component+"_"+c;c>=this.node.children.length?this.node.stopChange().appendChild(d):this.node.stopChange().insertBefore(d,this.node.children[c]);I({event:"loopitem",node:d,parent:this.node,map:this});return this}),removePointer:A(function(c){for(var d=this.node.children[c].kb_maps,b=0,e=Object.keys(this.node.children[c].kb_viewmodel.pointers),
g=e.length;b<g;b++){var f=d[e[b]];if(f)for(var k=0,h=f.length;k<h;k++)f[k].unsync(),f[k]=null,delete f[k]}this.node.stopChange().removeChild(this.node.children[c]);b=0;for(g=this.node.children.length;b<g;b++)this.node.children[b].kb_viewmodel.x=b,c=this.node.children[b].kb_viewmodel.loopid,this.node.children[b].kb_viewmodel.loopid=c.substring(0,c.lastIndexOf("_")+1)+b;return this}),reapplyPointer:A(function(c){for(var d=this.node.children[c].kb_maps,b=this.node.children[c].kb_viewmodel.loopid,e=0,
g=Object.keys(this.node.children[c].kb_viewmodel.pointers),f=g.length;e<f;e++){var k=d[g[e]];if(void 0!==k)for(var h=0,m=k.length;h<m;h++)k[h].reconnect()}this.node.children[c].kb_viewmodel.x=c;this.node.children[c].kb_viewmodel.loopid=b.substring(0,b.lastIndexOf("_")+1)+c;return this}),connect:A(function(c){var d=this;this._data=c;if("for"!==this.type){if(void 0!==this._data.pointers[this.key]&&void 0!==this._data.pointers[this.key].filters)for(var b=this._data.pointers[this.key].filters.dataFilters,
e=0,g=Object.keys(this._data.pointers[this.key].filters.stringFilters),f=g.length;e<f;e++)for(var k=this._data.pointers[this.key].filters.stringFilters[g[e]],m=0,p=k.length;m<p;m++)-1===this.filters[g[e]].indexOf(k[m])&&(this.filters[g[e]].push(k[m]),-1!==["vmfilters","filters"].indexOf(g[e])&&void 0!==b[k[m]]&&void 0===this._data.filters[k[m]]&&(this._data.filters[k[m]]=b[k[m]]));if(this.insert){this.setDom(this._data.get(this.key));this.unsync();return}this.set&&(b=!isNaN(parseInt(this.set,10))&&
parseInt(this.set,10).toString().length===this.set.length,e="true"===this.set.replace(/\s/g,"")||"false"===this.set.replace(/\s/g,""),g=-1!==this.set.indexOf('"')||-1!==this.set.indexOf("'"),(this.set=b?parseInt(this.set,10):e?"true"===this.set.replace(/\s/g,""):g?this.set.replace(/((\s*\"|\')(.*?)(\"|\'))/g,"$3"):void 0)&&this._data.set(this.key,this.set));if(this.outsert){this.setDom("");this.unsync();return}this.inlineFilters&&(this.inlineFilters.boolFilter?(this.filters.filters.unshift("boolFilter"),
this._data.filters.boolFilter=this.inlineFilters.boolFilter):(this.filters.filters.unshift("mathFilter"),this._data.filters.mathFilter=this.inlineFilters.mathFilter));if("component"===this.type)return this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,u(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,h(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,
r(this.filters.local)),this.node.k_post||(this.node.k_post={}),this.node.k_post[this.attr]={filters:{dataFilters:this._data.filters,stringFilters:this.filters},pointer:this._data.getLayer(this.key),key:this.key.split(".").pop()},this;if("node"===this.type)return this.isBase&&(this.dataListener=function(b){"delete"===b.event?d.unsync():d.replaceNode()},c.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener)),this;if("attr-name"===this.type){this.dataListener=function(b){"delete"===
b.event?d.unsyncAttr():d.switchBinds(b.oldValue,b.value)};c.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener);this.domListener=function(b){"setAttribute"===b.attr?b.oldValue===d.value&&(d.switchBinds(b.oldValue,b.value,!0),d.setData(b.value)):d.unsyncAttr()};e=0;for(f=this.listener.length;e<f;e++)this.node.addAttrUpdateListener(this.listener[e],this.domListener);this.node.stopChange().setAttribute(c.get(this.key),this.attributeValue);return this}this.dataListener=function(b){"delete"===
b.event?d.unsync():d.setDom(b.value)};this.isEvent||c.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener);if(1===this.bindText.length&&!this.isEvent)if(this.domListener=function(b){d.setData(b.value)},this.node.__kbhtmllistener=!0,"object"===typeof this.listener)for(e=0,f=this.listener.length;e<f;e++)this.node.addAttrUpdateListener(this.listener[e],this.domListener);else this.node.addAttrUpdateListener(this.listener,this.domListener)}else this.dataListener=function(b){"postset"!==
b.type||b.oldValue&&0!==b.oldValue.length||(b.event="create");d.setLoop(b.key,b.event)},c.getLayer(this.key).addDataMethodUpdateListener(this.dataListener);"for"!==this.type&&(this.filters.model&&0!==this.filters.model.length?this._data.stopChange().set(this.key,u(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,h(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,r(this.filters.local)),
this.isEvent?(this.dataListener=function(b){d.node.stopChange().removeEventListener(d.attr.replace("on",""),b.oldValue);d.node.stopChange().addEventListener(d.attr.replace("on",""),b.value)},this._data.addDataUpdateListener(this.key,this.dataListener),this.node.addEventListener(this.attr.replace("on",""),this._data.get(this.key))):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",q(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=R(this.bindText),this.isInput&&-1!==
["value","checked"].indexOf(this.attr)&&(c=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==c?c:"")));return this}),reconnect:A(function(){if("for"!==this.type){if(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length)if("object"===typeof this.listener)for(var c=0,d=this.listener.length;c<d;c++)this.node.removeAttrUpdateListener(this.listener[c],this.domListener);else this.node.removeAttrUpdateListener(this.listener,this.domListener)}else this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);
this.connect(this._data);return this}),createloop:A(function(){this.node.stopChange().innerHTML="";for(var c=0,d=O(this._data.get(this.key),this.filters.filters,this._data.filters).length;c<d;c++)this.setLoop(c,"create");return this}),setData:A(function(c){c=N(c,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,c);v(this.filters.model,c);m(this.filters.session,c);d(this.filters.local,c);return this}),setDom:A(function(c){v(this.filters.model,c);m(this.filters.session,
c);d(this.filters.local,c);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):this.isInput&&-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",q(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=R(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(c=this._data.get(this.key),this.node.stopChange()[this.attr]=void 0!==c?
c:""));return this}),setLoop:A(function(c,d){switch(d){case "create":this.addPointer(c);break;case "delete":this.removePointer(c);break;case "set":this.reapplyPointer(c);break;default:if("push"!==d)for(var b=0,e=this._data.getLayer(this.key).length;b<e;b++)this.reapplyPointer(b)}return this}),bindMaps:A([]),unsync:A(function(){"component"===this.type&&(this.__proto__.bindText=null);this._data=this.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;
return this}),reset:A(function(){"for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener).addDataMethodUpdateListener(this.extraListener):this.dataListener&&(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener).addAttrUpdateListener(this.listener,this.domListener))}),replaceNode:A(function(){var c=
document.createDocumentFragment(),d=c.appendChild(document.createElement("div")),b,e=!1,g=this;d.innerHTML=this.bindText.map(function(b,c){if("object"===typeof b){if(void 0===b._data)return e=!0,"";if(b.key===g.bindText[1].key){var d=N(b._data.get(b.key),b.filters,b._data.filters)||"unknown";"unkown"===d&&1===c&&console.error("You attempted to bind a node to %o, which does not exist on %o, with bindText: %o",b.key,b._data,b.base);return d}return N(b._data.get(b.key),b.filters,b._data.filters)}return b}).join("");
e||(b=d.children[0],c.replaceChild(b,d),this.base.local.parentElement.stopChange().replaceChild(c,this.base.local),this.base.local=b,I({event:"replaceNode",node:this.base.local,parent:this.node,map:this.base}))})});return c}var E="{{",p="}}",K="|",M={},H=/(<\/.*?>)/g;B().call();var C=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["ontouchstart","ontouchend","ontouchmove"]),G={loopitem:[],replaceNode:[]},I=function(c){for(var p=G[c.event],u=0,q=p.length;u<
q;u++)p[u](c)};t.start=function(c){if(void 0===c)return E;E="string"===typeof c?c:E;return t};t.end=function(c){if(void 0===c)return p;p="string"===typeof c?c:p;return t};t.pipe=function(c){if(void 0===c)return K;K="string"===typeof c?c:K;return t};t.getUnknown=function(c){var p=c.match(H).map(function(c){return c.replace(/[<\/>]/g,"")});p.filter(function(c,q){return 0!==c.indexOf(E)&&document.createElement(c)instanceof HTMLUnknownElement&&-1===p.indexOf(c,q+1)&&void 0===M[c]});return p};t.isRegistered=
function(c){return void 0!==M[c]};t.register=function(c,p){void 0===M[c]?(M[c]=p,t.getUnknown(p)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",c);return this};t.addEventListener=function(c,p){void 0!==G[c]?G[c].push(p):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",c);return t};t.removeEventListener=function(c,p){if(void 0!==G[c])for(var q=0,v=G[c].length;q<v;q++)G[c][q].toString()===p.toString()&&G[c].splice(q,
1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",c);return t};Object.defineProperties(t.prototype,{register:A(t.register),isRegistered:A(t.isRegistered),getUnknown:A(t.getUnknown),map:A(function(c){function q(u,t){for(var r=0,d=u.length;r<d;r++)if(void 0===u[r].kb_maps&&8!==u[r].nodeType){u[r].kb_mapper=c;u[r].kb_maps=t;if(3===u[r].nodeType){var h=u[r],m=t,l=h.textContent;if(l.match(v())){var n=T(l),b=L();b.prototype.type=l.match(new RegExp("(\\"+
E.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+p.split("").join("\\")+")","g"))?"for":"text";b.prototype.text=l;b.prototype.bindText=n;b.prototype.listener=["textContent","innerHTML","innerText"];b.prototype.attr="textContent";b.prototype.localAttr="textContent";b.prototype.local=h;b.prototype.node=h.parentElement;b.prototype.binds=m;h=0;for(l=n.length;h<l;h++)if(0===n[h].indexOf(E)){var e="for"===b.prototype.type?F(n[h])[0]:Q(n[h]),g=new b(n[h],e);void 0===m[e]&&(m[e]=[]);g.bindText[h]=
g;g.bindMaps.push(g);g.id=m[e].length;m[e].push(g)}}}else{if(u[r].getAttribute("data-kbattr")){m=u[r];n=t;b=m.getAttribute("data-kbattr").split("&");h=0;for(l=b.length;h<l;h++)for(e=T(b[h].substring(0,b[h].indexOf("="))),g=L(),g.prototype.type="attr-name",g.prototype.text=b[h],g.prototype.bindText=e,g.prototype.base=e[1],g.prototype.listener=["setAttribute","removeAtribute"],g.prototype.attr=void 0,g.prototype.localAttr=void 0,g.prototype.local=m,g.prototype.node=m.parentElement,g.prototype.binds=
n,g.prototype.replacement=void 0,g.prototype.attributeValue=b[h].substring(b[h].indexOf('="')+2,b[h].length-1),h=0,l=e.length;h<l;h++)if(0===e[h].indexOf(E)){var f=Q(e[h]),k=new g(e[h],f);void 0===n[f]&&(n[f]=[]);k.bindText[h]=k;k.bindMaps.push(k);k.id=n[f].length;n[f].push(k)}m.removeAttribute("data-kbattr")}m=u[r];n=t;b=Array.prototype.slice.call(m.attributes);h=m instanceof HTMLUnknownElement;l=0;for(e=b.length;l<e;l++)if(b[l].value.match(v())){g=T(b[l].value);f=L();f.prototype.type=h?"component":
"attribute";f.prototype.text=b[l].value;f.prototype.bindText=g;f.prototype.isEvent=-1!==C.indexOf(b[l].name);f.prototype.isInput="input"===m.tagName.toLowerCase();f.prototype.isRadio=f.prototype.isInput?-1!==["radio","checkbox"].indexOf(m.type):!1;f.prototype.listener=b[l].name;f.prototype.attr=b[l].name;f.prototype.localAttr="value";f.prototype.local=b[l];f.prototype.node=m;f.prototype.binds=n;f.prototype.isEvent&&m.removeAttribute(b[l].name);for(var k=0,w=g.length;k<w;k++)if(0===g[k].indexOf(E)){var A=
Q(g[k]),B=new f(g[k],A);void 0===n[A]&&(n[A]=[]);B.bindText[k]=B;B.bindMaps.push(B);B.id=n[A].length;n[A].push(B)}}}u[r].childNodes&&0!==u[r].childNodes.length&&(t=q(u[r].childNodes,t))}else if(8===u[r].nodeType&&(h=u[r],m=t,l=h.textContent,l.match(D())))for(n=T(l),b=L(),b.prototype.type="node",b.prototype.text=l,b.prototype.bindText=n,b.prototype.base=n[1],b.prototype.listener="textContent",b.prototype.attr="textContent",b.prototype.localAttr="textContent",b.prototype.local=h,b.prototype.node=h.parentElement,
b.prototype.binds=m,b.prototype.replacement=void 0,h=0,l=n.length;h<l;h++)0===n[h].indexOf(E)&&(e=Q(n[h]),g=new b(n[h],e),void 0===m[e]&&(m[e]=[]),g.bindText[h]=g,g.bindMaps.push(g),g.id=m[e].length,1===h&&(b.prototype.base=g,g.isBase=!0),m[e].push(g));return t}return q(c.childNodes,{})})});return t}}(X),ba=function(){return function(){function B(q){0===q.length&&(q=A);q=new t(q);for(var c=0,T=D.length;c<T;c++)if(!q._stopPropogation)D[c](q);q._preventDefault||(document.body.innerHTML="<"+q.hash+"></"+
q.hash+">",v(q.hash));return B}function t(q){this.preventDefault=function(){this._preventDefault=!0};this.stopPropogation=function(){this._stopPropogation=!0};this.hash=q;this.url=window.location.href}var A="",v=function(){},D=[];B.base=function(q){if(void 0===q)return A;A="string"===typeof q?q:A;return B};B.addHashListener=function(q){D.push(q);return B};B.removeHashListener=function(q){for(var c=0,t=D.length;c<t;c++)if(D[c].toString()===q.toString()){D.splice(c,1);break}return B};B.onChange=function(q){if(void 0===
q)return v;v="function"===typeof q?q:v;return B};B.watch=function(q){window.onhashchange=q?function(){B(window.location.hash.replace("#",""))}:null;return B};return B}}(),W=function(B,t,A,v,D){return function(q){function c(b,e,d,f,k){function l(b,c,e,d,g){for(var f=H({},b),k=0,h=Object.keys(d),n=h.length;k<n;k++)-1!==m.indexOf(h[k])?Object.defineProperty(f,h[k],F(d[h[k]],"filters"!==h[k])):d.pointers?void 0===d.pointers[h[k]]&&f.set(h[k],d[h[k]]):f.set(h[k],d[h[k]]);if(d.pointers)for(f.pointers||
Object.defineProperty(f,"pointers",F({},!1,!0)),k=0,h=Object.keys(d.pointers),n=h.length;k<n;k++)f.pointers[h[k]]=d.pointers[h[k]],f.addPointer(f.pointers[h[k]].point,f.pointers[h[k]].key,h[k]);k=0;h=Object.keys(c.prototype);for(n=h.length;k<n;k++)Object.defineProperty(f,[h[k]],F(c.prototype[h[k]],!0));c.apply(f,e);k=0;h=Object.keys(g);for(n=h.length;k<n;k++)-1!==m.indexOf(h[k])?Object.defineProperty(f,h[k],F(g[h[k]],"filters"!==h[k])):g.pointers?void 0===g.pointers[h[k]]&&f.set(h[k],g[h[k]]):f.set(h[k],
g[h[k]]);if(g.pointers)for(f.pointers||Object.defineProperty(f,"pointers",F({},!1,!0)),k=0,h=Object.keys(g.pointers),n=h.length;k<n;k++)f.pointers[h[k]]=g.pointers[h[k]],f.addPointer(f.pointers[h[k]].point,f.pointers[h[k]].key,h[k]);k=0;h=Object.keys(f.filters);for(n=h.length;k<n;k++)f.filters[h[k]]=f.filters[h[k]].bind(f);if(f.sessionStorage){if(c=sessionStorage.getItem(f.id||b))for(c=JSON.parse(c),k=0,h=Object.keys(c),n=h.length;k<n;k++)f.set(h[k],c[h[k]]);else sessionStorage.setItem(f.id||b,f.stringify());
f.addChildDataUpdateListener("*",function(){sessionStorage.setItem(f.id||b,f.stringify())})}if(f.localStorage){if(c=localStorage.getItem(f.id||b))for(c=JSON.parse(c),k=0,h=Object.keys(c),n=h.length;k<n;k++)f.set(h[k],c[h[k]]);else localStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",function(){localStorage.setItem(f.id||b,f.stringify())})}f.store&&u.set(f.id||b,f);return f}function h(b,c,e){b.kb_viewmodel=e;var d=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=d;Object.keys(d).forEach(function(b){d[b].forEach(function(b){switch(b.type){case "for":b.connect(e).createloop();
break;case "component":b.connect(e).unsync();break;case "node":b.connect(e).replaceNode();break;default:b.connect(e)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onGlobalFinish&&c.wrapper.kb_viewmodel.onGlobalFinish.call(c.wrapper.kb_viewmodel,c.wrapper);c.wrapper.kb_viewmodel.onNodeFinish&&c.wrapper.kb_viewmodel.onNodeFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function n(b){b=b.querySelectorAll("*");for(var e=0,d=b.length;e<d;e++)b[e]instanceof
HTMLUnknownElement&&c(b[e])}function p(b,d){r=new z(d,!0);r.wrapper.innerHTML=r.template;r.wrapper.kb_mapper=r.wrapper;Object.defineProperty(r.wrapper,"__kbcomponenttree",F(d.kb_mapper?d.kb_mapper.__kbcomponenttree.slice():[]));d.parentElement.stopChange().replaceChild(r.fragment,d);e.unshift(r.wrapper);h(r.wrapper,r,l(b,J[b],e,t,v));-1===r.wrapper.__kbcomponenttree.indexOf(b)||r.wrapper.kb_viewmodel.multiple?(r.wrapper.__kbcomponenttree.push(b),r.wrapper.className+=" "+r.wrapper.kb_viewmodel.local,
r.wrapper.className+=" "+r.wrapper.kb_viewmodel.id,r.wrapper.className+=r.wrapper.kb_viewmodel.loopid?" "+r.wrapper.kb_viewmodel.loopid:"",r.wrapper.kb_viewmodel.subscribeDeep("*",A).callAllSubscribers(),r.wrapper.kb_viewmodel.kbnode=r.wrapper,r.wrapper.addChildAttrListener("html",function(b){if(!b.stopChange){if(-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&(b.arguments[0]instanceof HTMLUnknownElement||b.arguments[0]instanceof HTMLScriptElement)||-1!==["innerHTML",
"textContent"].indexOf(b.attr)&&(b.child?b.child.__kbhtmllistener:b.target.__kbhtmllistener))return!0;b.preventDefault();b.stopPropagation()}}),r.wrapper.addChildAttrUpdateListener("html",function(b){-1!==["appendChild","insertSibling","insertBefore","insertAfter"].indexOf(b.attr)&&b.arguments[0]instanceof HTMLUnknownElement&&c(b.arguments[0])}),n(r.wrapper)):(console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
b),console.error("Recursive Component %o on %o",r.wrapper,r.wrapper.parentElement))}var q=b.tagName.toLowerCase(),r;k=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")});var t=U(C,{}),v={};void 0===e&&(e=[]);d&&U(d,t);Object.defineProperty(t,"local",F(t.local||"local_"+q+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(t,"id",F(t.id||"id_"+q+"-"+(Math.floor(Math.random()*Date.now())+1),!0,!1,!0));Object.defineProperty(t,"filters",F(t.filters||
{},!1,!1,!0));"function"!==typeof t.onFinish&&(t.onFinish=function(){});Object.defineProperty(t,"onGlobalFinish",F(t.onFinish,!0,!1,!0));t.listen=V;Object.defineProperty(t,"listen",F(t.listen,!0,!1,!0));t.unlisten=P;Object.defineProperty(t,"unlisten",F(t.unlisten,!0,!1,!0));t.alert=R;Object.defineProperty(t,"alert",F(t.alert,!0,!1,!0));Object.defineProperty(t,"sessionStorage",F(!1,!0,!1,!0));Object.defineProperty(t,"localStorage",F(!1,!0,!1,!0));Object.defineProperty(t,"store",F(!1,!0,!1,!0));Object.defineProperty(t,
"multiple",F(!1,!0,!1,!0));f&&U(f,v);v.innerHTML=Array.prototype.slice.call(b.childNodes);d=0;for(f=b.attributes.length;d<f;d++)v[b.attributes[d].name]=b.attributes[d].value;d=0;for(f=k.length;d<f;d++)b[k[d]]&&(v[k[d]]=b[k[d]]);b.k_post&&U(b.k_post,v);c.isRegistered(q)||b.kb_isLoading?c.isRegistered(q)&&p(q,b):(c.loadWaitList(q,function(c,e){p(q,b)}),c.loadWaitList(q).loading||(c.loadWaitList(q).loading=!0,M(q)))}function A(b){var c=this.__kbref.local,g=this.__kbref.id,f=this.__kbref.loopid,k=this.__kbscopeString+
(0!==this.__kbscopeString.length?".":"")+b.key;if(d[c]&&d[c][k])for(var h=0,l=d[c][k].length;h<l;h++)d[c][k][h](b);if(d[g]&&d[g][k])for(h=0,l=d[g][k].length;h<l;h++)d[g][k][h](b);if(d[f]&&d[f][k])for(h=0,l=d[f][k].length;h<l;h++)d[f][k][h](b)}function Q(b){var e=b.node.tagName.toLowerCase();c.isRegistered(e)||b.node.kb_isLoading?c.isRegistered(e)&&("replaceNode"===b.event?c(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):c(b.node)):(b.node.kb_isLoading=!0,c.loadWaitList(e,function(e,d){"replaceNode"===
b.event?c(b.node,[],{onNodeFinish:function(c){b.map.local=c}}):c(b.node)}),c.loadWaitList(e).loading||(c.loadWaitList(e).loading=!0,M(e)))}function U(b,c){var d=Object.keys(b);c.pointers||Object.defineProperty(c,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var f=0,k=d.length;f<k;f++)if(H.prototype.isObservable(b,d[f]))c.pointers[d[f]]={key:b.__kbscopeString.split(".").pop(),point:b.__kbImmediateParent};else if(H.prototype.isMixed(b[d[f]]))c.pointers[d[f]]={key:b[d[f]].__kbscopeString.split(".").pop(),
point:b[d[f]].__kbImmediateParent};else if(H.prototype.isObject(b[d[f]])&&b[d[f]].pointer)c.pointers[d[f]]={filters:b[d[f]].filters,key:b[d[f]].key,point:b[d[f]].pointer};else if(H.prototype.isObject(b[d[f]])){void 0===c[d[f]]&&(c[d[f]]={});for(var h=0,l=Object.keys(b[d[f]]);h<k;h++)c[d[f]][l[h]]=b[d[f]][l[h]]}else if(H.prototype.isArray(b[d[f]]))for(h=0;h<k;h++)c[d[f]][h]=b[d[f]][h];else c[d[f]]=b[d[f]];return c}function F(b,c,d,f){return{value:b,writable:!!c,enumerable:!!f,configurable:!!d}}function P(b,
c,g){if(2===arguments.length)if(g=c.bind(this),c=b,r[c])for(var f=0,k=r[c].length;f<k;f++)r[c][f].toString()===g.toString()&&r[c].splice(f,1);else console.error("no listeners exists by key %o",c);else if(g=g.bind(this),d[b]&&d[b][c])for(f=0,k=d[b][c].length;f<k;f++)d[b][c].toString()===g.toString()&&d[b][c].splice(f,1);return this}function V(b,c,g){if(2===arguments.length)g=c.bind(this),c=b,r[c]||(r[c]=[]),r[c].push(g);else if(g=g.bind(this),d[b]||(d[b]={}),d[b][c]||(d[b][c]=[]),d[b][c].push(g),document.querySelector("."+
b)){var f=d[b][c],k=document.querySelector("."+b).kb_mapper.kb_viewmodel,h=k.getLayer(c),l=c.split(".").pop(),m=h[l];f[f.length-1]({key:l,value:m,oldValue:m,local:h,kbref:k,onChange:!1,initial:!0})}return this}function R(b,c){if(r[b])for(var d=0,f=r[b].length;d<f;d++)r[b][d](c);return this}function N(){if(!document.querySelector('meta[name="viewport"]')){var b=document.createElement("meta");b.name="viewport";b.content="width=device-width, initial-scale=1.0";document.head.stopChange().appendChild(b)}c.device||
(c.device={});c.device.type=c.detectDevice();c.device.orientation=c.detectOrientation();c.device.browser=c.detectBrowser();c.device.screenSize=c.detectScreenSize();c.device.orientationSize=c.detectScreenOrientation();c.device.keyboard="desktop"!==c.device.type?window.innerHeight<screen.height-.4*screen.height:!1;document.body.className=c.device.type+" "+c.device.orientation+(c.device.keyboard?" keyboard":"")+" "+c.device.browser+" "+c.device.screenSize+" "+c.device.orientationSize}function O(b,c){var d=
document.createElement("script");d.src=b;d.onerror=function(){c(null,!0)};d.onload=function(){c(C)};document.head.stopChange().appendChild(d)}function L(b){O((void 0!==C.prefix?C.prefix:"")+"/node_modules/konnekt/config/config.js",b)}function E(b){O((void 0!==C.prefix?C.prefix:"")+"/bower_components/konnekt/config/config.js",b)}function p(b){O((void 0!==C.prefix?C.prefix:"")+"/config/config.js",b)}function K(){for(var b=0,c=I.length;b<c;b++)I[b]()}window.K_Components||(window.K_Components={});var M=
t().onLoad(function(b,d){var g="<style>"+unescape(d.prototype.k_css)+"</style>"+unescape(d.prototype.k_html);c.register(b,d,g,d.prototype.cms);G?(c.loadWaitList(b).forEach(function(c){c(b,d)}),c.loadWaitList(b,"clear")):I.push(function(){c.loadWaitList(b).forEach(function(c){c(b,d)});c.loadWaitList(b,"clear")})}),H=B(),C=q||{},G=!1,I=[],z=v().addEventListener("loopitem",Q).addEventListener("replaceNode",Q),y=D().base(void 0!==C.base?C.base:"default").watch(!0).onChange(function(b){c(document.querySelector(b))}),
u=H({},"Model"),J={},r={},d={},h=function(){return window.location.search.replace("?","").split("&").filter(function(b){return 0!==b.length}).reduce(function(b,c){b[c.split("=")[0]]=c.split("=")[1];return b},{})}(),m="id filters class sessionStorage localStorage store component multiple".split(" "),l={},n;c.detectDevice=function(){return navigator.userAgent.toLowerCase().match(/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|[^a-z]rim[^a-z]|sonyericsson|nokia|[^a-z]mib[^a-z])/)?
"mobile":navigator.userAgent.toLowerCase().match(/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/)?"tablet":"desktop"};c.detectBrowser=function(){var b=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),c="undefined"!==typeof InstallTrigger,d=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),f=!!document.documentMode,h=
!f&&!!window.StyleMedia,l=!!window.chrome&&!!window.chrome.webstore;return b?"opera":c?"firefox":d?"safari":l?"chrome":f?"ie":h?"edge":"unknown"};c.detectOrientation=function(){return screen.width>screen.height?"landscape":screen.height>screen.width?"portrait":"square"};c.detectScreenOrientation=function(){return window.innerWidth>window.innerHeight?"landscape-size":window.innerHeight>window.innerWidth?"portrait-size":"square-size"};c.detectScreenSize=function(){return 1280>("landscape"===this.detectOrientation()?
window.innerWidth:window.innerHeight)?750>("landscape"===this.detectOrientation()?window.innerWidth:window.innerHeight)?"mobile-size":"tablet-size":"desktop-size"};c.config=function(b){function d(b,c){for(var h=0,l=Object.keys(b),m=l.length;h<m;h++)"object"===typeof b[l[h]]?(void 0===c[l[h]]&&(c[l[h]]={}),d(b[l[h]],c[l[h]])):"object"!==c[l[h]]&&(c[l[h]]=b[l[h]])}if(void 0===b)return C;d(b,C);y.base(void 0!==C.base?C.base:"default");return c};window.addEventListener("resize",N);document.body?N():document.addEventListener("DOMContentLoaded",
function(){N()});c.register=function(b,d,g,f){z.register(b,g);J[b]=d;return c};c.isRegistered=function(b){return void 0!==J[b]&&z.isRegistered(b)};c.registered=function(){return Object.keys(J)};c.loadWaitList=function(b,d){if("undefined"===typeof d&&b)return l[b];if(b){if(void 0===l[b]||"clear"===d){var g=void 0===l[b]?!1:!!l[b].loading;l[b]=[];l[b].loading=g}"function"===typeof d&&l[b].push(d)}return c};c.localRouting=function(b){b&&"dev"!==h.env?(n=Node.prototype.appendChild,Node.prototype.appendChild=
function(b){if("script"===b.nodeName.toLowerCase()){b.src=b.src.substring(0,-1!==b.src.indexOf("?")?b.src.indexOf("?"):b.src.length);var c=b.src.match(/(.*?component\/)/);c&&(h.env||(h.env="prod"),"dev"===h.env&&(h.env="qa"),c=b.src.replace(c[0],"").replace(/[\/\s]/g,""),b.src=(void 0!==C.prefix?C.prefix:"")+"/components/"+c+"/build/"+h.env+"/"+c+(h.debug&&"prod"!==h.env?"":".min")+".js",arguments[0]=b)}return n.apply(this,arguments)}):n&&(Node.prototype.appendChild=n,n=null);return c};c.hashRouting=
function(b){b&&(document.body?G?y(window.location.hash.replace("#","")):I.push(function(){y(window.location.hash.replace("#",""))}):document.addEventListener("DOMContentLoaded",function(){G?y(window.location.hash.replace("#","")):I.push(function(){y(window.location.hash.replace("#",""))})}));return this};c.addHashRouter=function(b){y.addHashListener(b);return c};c.removeHashRouter=function(b){y.removeHashListener(b);return c};H.prototype._parse||(H.prototype._parse=H.prototype.parse);H.prototype.parse=
function(){if(this.__kbref.kbnode){var b=this.__kbref.kbnode.kb_mapper.kb_maps;this._parse.apply(this,arguments);this.unsubscribeDeep("*",A);this.subscribeDeep("*",A).callAllSubscribers();Object.keys(b).forEach(function(c){b[c].forEach(function(b){b.reset()})})}else return this._parse.apply(this,arguments)};(function(){L(function(b,c){c?E(function(b,c){c&&console.error("The Konnekt local config was not found, this issue happens when You do not have Konnekt installed via the standard node_modules or bower_components module directories");
p(function(b,c){G=!0;K()})}):p(function(b,c){G=!0;K()})})})();return window.Konnekt=c}}(Y,Z,X,aa,ba);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return W}):"undefined"!==typeof module&&(module.exports=W);return W}();
